{"version":3,"file":"417-15b85550be92b664de26.js","mappings":"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","sources":["webpack://@my-react/ssr-example/./src/client/component/ThreeFiber/Pointcloud.tsx"],"sourcesContent":["import { Canvas, extend } from \"@my-react/react-three-fiber\";\nimport { useCallback, useMemo, useRef } from \"react\";\nimport * as THREE from \"three\";\n\nimport type { ThreeEvent } from \"@my-react/react-three-fiber\";\n\nclass DotMaterialImpl extends THREE.ShaderMaterial {\n  constructor() {\n    super({\n      transparent: true,\n      uniforms: { size: { value: 15 }, scale: { value: 1 } },\n      vertexShader: THREE.ShaderLib.points.vertexShader,\n      fragmentShader: `\n      varying vec3 vColor;\n      void main() {\n        gl_FragColor = vec4(vColor, step(length(gl_PointCoord.xy - vec2(0.5)), 0.5));\n      }`,\n    });\n  }\n}\n\nconst DotMaterial = extend(DotMaterialImpl);\n\nconst white = new THREE.Color(\"white\");\nconst hotpink = new THREE.Color(\"hotpink\");\n\nfunction Particles({ pointCount }: { pointCount: number }) {\n  const [positions, colors] = useMemo(() => {\n    const positions = [...new Array(pointCount * 3)].map(() => 5 - Math.random() * 10);\n    const colors = [...new Array(pointCount)].flatMap(() => hotpink.toArray());\n    return [new Float32Array(positions), new Float32Array(colors)];\n  }, [pointCount]);\n\n  const points = useRef<THREE.Points>(null!);\n\n  const hover = useCallback((e: ThreeEvent<PointerEvent>) => {\n    e.stopPropagation();\n    white.toArray(points.current.geometry.attributes.color.array, e.index! * 3);\n    points.current.geometry.attributes.color.needsUpdate = true;\n  }, []);\n\n  const unhover = useCallback((e: ThreeEvent<PointerEvent>) => {\n    hotpink.toArray(points.current.geometry.attributes.color.array, e.index! * 3);\n    points.current.geometry.attributes.color.needsUpdate = true;\n  }, []);\n\n  return (\n    <points ref={points} onPointerOver={hover} onPointerOut={unhover}>\n      <bufferGeometry>\n        <bufferAttribute attach=\"attributes-position\" args={[positions, 3]} />\n        <bufferAttribute attach=\"attributes-color\" args={[colors, 3]} />\n      </bufferGeometry>\n      <DotMaterial vertexColors depthWrite={false} />\n    </points>\n  );\n}\n\nexport const Exp = function App() {\n  return (\n    <Canvas orthographic camera={{ zoom: 40, position: [0, 0, 100] }} raycaster={{ params: { Points: { threshold: 0.2 } } as any }}>\n      <Particles pointCount={1000} />\n    </Canvas>\n  );\n};\n"],"names":["DotMaterialImpl","_THREE$ShaderMaterial","_inherits","_super","_classCallCheck","call","transparent","uniforms","size","value","scale","vertexShader","THREE","points","fragmentShader","_createClass","DotMaterial","extend","white","hotpink","Particles","t0","t2","t3","t4","t5","$","_c","pointCount","t1","_toConsumableArray","Array","positions","map","_temp","colors","flatMap","_temp2","Float32Array","t6","_t","_t2","_slicedToArray","positions_0","colors_0","useRef","Symbol","for","e","stopPropagation","toArray","current","geometry","attributes","color","array","index","needsUpdate","t7","hover","e_0","t8","t9","t10","t11","t12","unhover","_jsx","attach","args","_jsxs","children","vertexColors","depthWrite","Math","random","Exp","zoom","position","Points","threshold","Canvas","orthographic","camera","raycaster","params"],"sourceRoot":""}