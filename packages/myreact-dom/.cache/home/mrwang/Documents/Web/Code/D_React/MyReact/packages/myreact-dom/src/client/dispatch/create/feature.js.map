{"version":3,"file":"feature.js","sourceRoot":"","sources":["feature.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,cAAc,EAAE,eAAe,EAAE,MAAM,kBAAkB,CAAC;AAEnE,OAAO,EAAE,aAAa,EAAE,MAAM,iBAAiB,CAAC;AAChD,OAAO,EAAE,YAAY,EAAE,MAAM,gBAAgB,CAAC;AAC9C,OAAO,EAAE,eAAe,EAAE,MAAM,mBAAmB,CAAC;AAKpD,MAAM,CAAC,IAAM,MAAM,GAAG,UAAC,KAAuB,EAAE,OAAgB,EAAE,kBAAoC;IACpG,IAAI,KAAK,CAAC,iBAAiB,EAAE;QAC3B,IAAI,EAAE,GAAG,KAAK,CAAC;QACf,eAAe,CAAC,KAAK,CAAC,CAAC;QACvB,IAAI,OAAO,EAAE;YACX,IAAM,MAAM,GAAG,aAAa,CAAC,KAAK,EAAE,kBAAkB,CAAC,CAAC;YACxD,IAAI,CAAC,MAAM,EAAE;gBACX,YAAY,CAAC,KAAK,CAAC,CAAC;aACrB;YACD,EAAE,GAAG,MAAM,CAAC;SACb;aAAM;YACL,YAAY,CAAC,KAAK,CAAC,CAAC;SACrB;QACD,IAAI,eAAe,CAAC,OAAO,EAAE;YAC3B,IAAM,QAAQ,GAAG,KAAK,CAAC,GAAiB,CAAC;YACzC,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC;YAC5B,IAAI,cAAc,CAAC,OAAO,IAAI,KAAK,CAAC,eAAe,EAAE;gBACnD,IAAI,CAAC,EAAE,EAAE;oBACP,QAAQ,CAAC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;iBAChD;qBAAM;oBACL,QAAQ,CAAC,YAAY,CAAC,eAAe,EAAE,SAAS,CAAC,CAAC;iBACnD;aACF;SACF;QACD,KAAK,CAAC,iBAAiB,GAAG,KAAK,CAAC;QAChC,OAAO,EAAE,CAAC;KACX;IACD,OAAO,OAAO,CAAC;AACjB,CAAC,CAAC","sourcesContent":["import { enableAllCheck, isHydrateRender } from \"@ReactDOM_shared\";\n\nimport { hydrateCreate } from \"./hydrateCreate\";\nimport { nativeCreate } from \"./nativeCreate\";\nimport { validDomNesting } from \"./validDomNesting\";\n\nimport type { HydrateDOM } from \"./getHydrateDom\";\nimport type { MyReactFiberNode } from \"@my-react/react\";\n\nexport const create = (fiber: MyReactFiberNode, hydrate: boolean, parentFiberWithDom: MyReactFiberNode): boolean => {\n  if (fiber.__pendingCreate__) {\n    let re = false;\n    validDomNesting(fiber);\n    if (hydrate) {\n      const result = hydrateCreate(fiber, parentFiberWithDom);\n      if (!result) {\n        nativeCreate(fiber);\n      }\n      re = result;\n    } else {\n      nativeCreate(fiber);\n    }\n    if (isHydrateRender.current) {\n      const typedDom = fiber.dom as HydrateDOM;\n      typedDom.__hydrate__ = true;\n      if (enableAllCheck.current && fiber.__isPlainNode__) {\n        if (!re) {\n          typedDom.setAttribute(\"debug_hydrate\", \"fail\");\n        } else {\n          typedDom.setAttribute(\"debug_hydrate\", \"success\");\n        }\n      }\n    }\n    fiber.__pendingCreate__ = false;\n    return re;\n  }\n  return hydrate;\n};\n"]}