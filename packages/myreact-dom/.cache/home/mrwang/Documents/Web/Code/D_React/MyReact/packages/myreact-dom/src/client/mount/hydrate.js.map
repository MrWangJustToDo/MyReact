{"version":3,"file":"hydrate.js","sourceRoot":"","sources":["hydrate.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,oBAAoB,EAAE,kBAAkB,EAAE,MAAM,iBAAiB,CAAC;AAE3E,OAAO,EAAE,eAAe,EAAE,WAAW,EAAE,MAAM,cAAc,CAAC;AAC5D,OAAO,EAAE,cAAc,EAAE,MAAM,aAAa,CAAC;AAIrC,IAAA,cAAc,GAA+B,oBAAoB,eAAnD,EAAE,aAAa,GAAgB,oBAAoB,cAApC,EAAE,SAAS,GAAK,oBAAoB,UAAzB,CAA0B;AAElE,IAAA,eAAe,GAAK,kBAAkB,gBAAvB,CAAwB;AAE/C,MAAM,CAAC,IAAM,OAAO,GAAG,UAAC,OAAuB,EAAE,SAAoD;;IACnG,cAAc,CAAC,OAAO,GAAG,IAAI,cAAc,EAAE,CAAC;IAE9C,eAAe,CAAC,OAAO,GAAG,IAAI,CAAC;IAE/B,IAAM,KAAK,GAAG,eAAe,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,OAAO,CAAC,CAAC;IAExE,KAAK,CAAC,GAAG,GAAG,SAAS,CAAC;IAEtB,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;IAEtB,SAAS,CAAC,OAAO,GAAG,KAAK,CAAC;IAE1B,aAAa,CAAC,OAAO,GAAG,SAAS,CAAC;IAElC,MAAA,SAAS,CAAC,YAAY,0DAAG,SAAS,EAAE,SAAS,CAAC,CAAC;IAE/C,SAAS,CAAC,SAAS,GAAG,KAAK,CAAC;IAE5B,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;IAEzB,eAAe,CAAC,OAAO,GAAG,KAAK,CAAC;AAClC,CAAC,CAAC","sourcesContent":["import { __myreact_internal__, __myreact_shared__ } from \"@my-react/react\";\n\nimport { isHydrateRender, startRender } from \"../../shared\";\nimport { ClientDispatch } from \"../dispatch\";\n\nimport type { MyReactElement, MyReactFiberNode } from \"@my-react/react\";\n\nconst { globalDispatch, rootContainer, rootFiber } = __myreact_internal__;\n\nconst { createFiberNode } = __myreact_shared__;\n\nexport const hydrate = (element: MyReactElement, container: Element & { __fiber__: MyReactFiberNode }) => {\n  globalDispatch.current = new ClientDispatch();\n\n  isHydrateRender.current = true;\n\n  const fiber = createFiberNode({ fiberIndex: 0, parent: null }, element);\n\n  fiber.dom = container;\n\n  fiber.__root__ = true;\n\n  rootFiber.current = fiber;\n\n  rootContainer.current = container;\n\n  container.setAttribute?.(\"hydrate\", \"MyReact\");\n\n  container.__fiber__ = fiber;\n\n  startRender(fiber, true);\n\n  isHydrateRender.current = false;\n};\n"]}