{"version":3,"file":"update.js","sourceRoot":"","sources":["update.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,oBAAoB,EAAE,MAAM,iBAAiB,CAAC;AACvD,OAAO,EAAE,eAAe,EAAE,cAAc,EAAE,MAAM,4BAA4B,CAAC;AAE7E,OAAO,EAAE,eAAe,EAAE,sBAAsB,EAAE,MAAM,kBAAkB,CAAC;AAE3E,OAAO,EAAE,qBAAqB,EAAE,MAAM,QAAQ,CAAC;AAEvC,IAAA,UAAU,GAAK,oBAAoB,WAAzB,CAA0B;AAE5C,MAAM,CAAC,IAAM,aAAa,GAAG;IAC3B,UAAU,CAAC,OAAO,GAAG,IAAI,CAAC;IAE1B,cAAc,CAAC,qBAAqB,EAAE,eAAe,CAAC,CAAC;IAEvD,UAAU,CAAC,OAAO,GAAG,KAAK,CAAC;IAE3B,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;QACrB,IAAI,qBAAqB,CAAC,OAAO,EAAE,EAAE;YACnC,aAAa,EAAE,CAAC;SACjB;IACH,CAAC,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,MAAM,CAAC,IAAM,cAAc,GAAG;IAC5B,UAAU,CAAC,OAAO,GAAG,IAAI,CAAC;IAE1B,eAAe,CAAC,qBAAqB,EAAE,sBAAsB,EAAE,eAAe,CAAC,CAAC;IAEhF,UAAU,CAAC,OAAO,GAAG,KAAK,CAAC;IAE3B,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;QACrB,IAAI,qBAAqB,CAAC,OAAO,EAAE,EAAE;YACnC,cAAc,EAAE,CAAC;SAClB;IACH,CAAC,CAAC,CAAC;AACL,CAAC,CAAC","sourcesContent":["import { __myreact_internal__ } from \"@my-react/react\";\nimport { updateLoopAsync, updateLoopSync } from \"@my-react/react-reconciler\";\n\nimport { reconcileUpdate, shouldPauseAsyncUpdate } from \"@ReactDOM_shared\";\n\nimport { updateFiberController } from \"./tool\";\n\nconst { globalLoop } = __myreact_internal__;\n\nexport const updateAllSync = () => {\n  globalLoop.current = true;\n\n  updateLoopSync(updateFiberController, reconcileUpdate);\n\n  globalLoop.current = false;\n\n  Promise.resolve().then(() => {\n    if (updateFiberController.hasNext()) {\n      updateAllSync();\n    }\n  });\n};\n\nexport const updateAllAsync = () => {\n  globalLoop.current = true;\n\n  updateLoopAsync(updateFiberController, shouldPauseAsyncUpdate, reconcileUpdate);\n\n  globalLoop.current = false;\n\n  Promise.resolve().then(() => {\n    if (updateFiberController.hasNext()) {\n      updateAllAsync();\n    }\n  });\n};\n"]}