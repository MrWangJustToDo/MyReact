{"version":3,"file":"plain.js","sourceRoot":"","sources":["plain.ts"],"names":[],"mappings":"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","sourcesContent":["import { IS_SINGLE_ELEMENT } from \"@ReactDOM_shared\";\n\nimport { TextElement } from \"./text\";\n\nexport class PlainElement {\n  type: string;\n  className: string | null = null;\n  // attrs\n  style: Record<string, string | null | undefined> = {};\n  attrs: Record<string, string | boolean | null | undefined> = {};\n  children: Array<TextElement | PlainElement | string> = [];\n  constructor(type: string) {\n    this.type = type;\n  }\n\n  addEventListener() {\n    void 0;\n  }\n\n  removeEventListener() {\n    void 0;\n  }\n\n  removeAttribute(key: string) {\n    delete this.attrs[key];\n  }\n  setAttribute(key: string, value: string | boolean | null | undefined | number) {\n    if (value !== false && value !== null && value !== undefined) {\n      this.attrs[key] = value.toString();\n    }\n  }\n\n  /**\n   *\n   * @param {Element} dom\n   */\n  append(...dom: Array<TextElement | PlainElement>) {\n    dom.forEach((d) => this.appendChild(d));\n  }\n\n  appendChild(dom: PlainElement | TextElement | string) {\n    if (Object.prototype.hasOwnProperty.call(IS_SINGLE_ELEMENT, this.type)) return;\n    if (dom instanceof PlainElement || dom instanceof TextElement || typeof dom === \"string\") {\n      this.children.push(dom);\n      return dom;\n    } else {\n      throw new Error(\"element instance error\");\n    }\n  }\n\n  serializeStyle() {\n    const styleKeys = Object.keys(this.style).filter(\n      (key) => this.style[key] !== null && this.style[key] !== undefined\n    );\n    if (styleKeys.length) {\n      return `style=\"${styleKeys.map((key) => `${key}: ${this.style[key]?.toString()};`).reduce((p, c) => p + c, \"\")}\"`;\n    }\n    return \"\";\n  }\n\n  serializeAttrs() {\n    const attrsKeys = Object.keys(this.attrs);\n    if (attrsKeys.length) {\n      return attrsKeys.map((key) => `${key}='${this.attrs[key]?.toString()}'`).reduce((p, c) => `${p} ${c}`, \"\");\n    } else {\n      return \"\";\n    }\n  }\n\n  serializeProps() {\n    let props = \"\";\n    if (this.className !== undefined && this.className !== null) {\n      props += ` class=\"${this.className}\"`;\n    }\n    return props;\n  }\n\n  serialize() {\n    return `${this.serializeProps()} ${this.serializeStyle()} ${this.serializeAttrs()}`;\n  }\n\n  toString(): string {\n    if (Object.prototype.hasOwnProperty.call(IS_SINGLE_ELEMENT, this.type)) {\n      return `<${this.type} ${this.serialize()} />`;\n    } else {\n      if (this.type) {\n        return `<${this.type} ${this.serialize()} >${this.children\n          .reduce<Array<TextElement | string | PlainElement>>((p, c) => {\n            if (p.length && c instanceof TextElement && p[p.length - 1] instanceof TextElement) {\n              p.push(\"<!-- -->\");\n              p.push(c);\n            } else {\n              p.push(c);\n            }\n            return p;\n          }, [])\n          .map((dom) => dom.toString())\n          .reduce((p, c) => p + c, \"\")}</${this.type}>`;\n      } else {\n        return this.children\n          .reduce<Array<TextElement | string | PlainElement>>((p, c) => {\n            if (p.length && c instanceof TextElement && p[p.length - 1] instanceof TextElement) {\n              p.push(\"<!-- -->\");\n              p.push(c);\n            } else {\n              p.push(c);\n            }\n            return p;\n          }, [])\n          .map((dom) => dom.toString())\n          .reduce((p, c) => p + c, \"\");\n      }\n    }\n  }\n}\n"]}