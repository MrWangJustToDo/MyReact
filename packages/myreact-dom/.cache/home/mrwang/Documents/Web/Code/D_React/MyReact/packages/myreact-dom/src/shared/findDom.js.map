{"version":3,"file":"findDom.js","sourceRoot":"","sources":["findDom.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,oBAAoB,EAAE,MAAM,iBAAiB,CAAC;AAI/C,IAAA,gBAAgB,GAAK,oBAAoB,iBAAzB,CAA0B;AAElD,IAAM,gBAAgB,GAAG,UAAC,KAAuB;IAC/C,IAAM,YAAY,GAAG,CAAC,KAAK,CAAC,CAAC;IAC7B,OAAO,YAAY,CAAC,MAAM,EAAE;QAC1B,IAAM,IAAI,GAAG,YAAY,CAAC,KAAK,EAAE,CAAC;QAClC,IAAI,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,GAAG;YAAE,OAAO,IAAI,CAAC,GAAG,CAAC;QAC/B,YAAY,CAAC,IAAI,OAAjB,YAAY,EAAS,CAAC,CAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,QAAQ,KAAI,EAAE,CAAC,EAAE;KAC9C;IACD,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF,IAAM,yBAAyB,GAAG,UAAC,KAAuB;IACxD,IAAI,KAAK,EAAE;QACT,IAAI,KAAK,CAAC,GAAG;YAAE,OAAO,KAAK,CAAC,GAAG,CAAC;QAChC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC9C,IAAM,GAAG,GAAG,gBAAgB,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;YAChD,IAAI,GAAG;gBAAE,OAAO,GAAG,CAAC;SACrB;KACF;IACD,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF,MAAM,CAAC,IAAM,WAAW,GAAG,UAAC,QAAiC;IAC3D,IAAI,QAAQ,YAAY,gBAAgB,IAAI,QAAQ,CAAC,SAAS,EAAE;QAC9D,OAAO,yBAAyB,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;KACtD;SAAM;QACL,OAAO,IAAI,CAAC;KACb;AACH,CAAC,CAAC","sourcesContent":["import { __myreact_internal__ } from \"@my-react/react\";\n\nimport type { MyReactFiberNode, MyReactInternalInstance } from \"@my-react/react\";\n\nconst { MyReactComponent } = __myreact_internal__;\n\nconst findDOMFromFiber = (fiber: MyReactFiberNode) => {\n  const currentArray = [fiber];\n  while (currentArray.length) {\n    const next = currentArray.shift();\n    if (next?.dom) return next.dom;\n    currentArray.push(...(next?.children || []));\n  }\n  return null;\n};\n\nconst findDOMFromComponentFiber = (fiber: MyReactFiberNode) => {\n  if (fiber) {\n    if (fiber.dom) return fiber.dom;\n    for (let i = 0; i < fiber.children.length; i++) {\n      const dom = findDOMFromFiber(fiber.children[i]);\n      if (dom) return dom;\n    }\n  }\n  return null;\n};\n\nexport const findDOMNode = (instance: MyReactInternalInstance) => {\n  if (instance instanceof MyReactComponent && instance.__fiber__) {\n    return findDOMFromComponentFiber(instance.__fiber__);\n  } else {\n    return null;\n  }\n};\n"]}