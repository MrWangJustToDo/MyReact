{"version":3,"file":"myreact.esm.js","sources":["../src/share/createRef.ts","../src/dispatch/instance.ts","../src/share/env.ts","../src/share/debug.ts","../src/share/internalInstance.ts","../src/share/nodeType.ts","../src/share/internalType.ts","../src/share/isEquals.ts","../src/share/once.ts","../src/share/singleElement.ts","../src/share/symbol.ts","../src/share/flattenChildren.ts","../src/share/shouldPause.ts","../src/fiber/instance.ts","../src/fiber/context.ts","../src/fiber/queue.ts","../src/fiber/update.ts","../src/fiber/create.ts","../src/fiber/unmount.ts","../src/share/mapFiber.ts","../src/share/cannotUpdate.ts","../src/share/numberStyle.ts","../src/share/listTree.ts","../src/element/tool.ts","../src/element/instance.ts","../src/element/feature.ts","../src/children/tool.ts","../src/children/feature.ts","../src/component/instance.ts","../src/core/generate.ts","../src/core/invoke.ts","../src/core/mountLoopSync.ts","../src/core/updateLoopSync.ts","../src/core/updateLoopAsync.ts","../src/component/feature.ts","../src/dom/shared/reconcileMount.ts","../src/dom/shared/render.ts","../src/dom/shared/portal.ts","../src/dom/shared/tools.ts","../src/dom/shared/findDom.ts","../src/dom/shared/update.ts","../src/dom/client/dispatch/unmount/clearFiberDom.ts","../src/dom/client/dispatch/unmount/feature.ts","../src/dom/shared/unmount.ts","../src/dom/shared/reconcileUpdate.ts","../src/dom/shared/getFiberWithDom.ts","../src/dom/client/update/tool.ts","../src/dom/client/update/update.ts","../src/dom/client/dispatch/append/index.ts","../src/dom/client/dispatch/context/index.ts","../src/dom/client/dispatch/create/getHydrateDom.ts","../src/dom/client/dispatch/create/hydrateCreate.ts","../src/dom/client/dispatch/create/nativeCreate.ts","../src/dom/client/dispatch/create/validDomNesting.ts","../src/dom/client/dispatch/create/feature.ts","../src/dom/client/dispatch/effect/feature.ts","../src/dom/client/dispatch/fallback/feature.ts","../src/dom/client/dispatch/position/append.ts","../src/dom/client/dispatch/position/getFiberWithDom.ts","../src/dom/client/dispatch/position/getInsertBeforeDom.ts","../src/dom/client/dispatch/position/insertBefore.ts","../src/dom/client/dispatch/position/feature.ts","../src/dom/client/dispatch/event/getEventName.ts","../src/dom/client/dispatch/event/addEvent.ts","../src/dom/client/dispatch/event/removeEvent.ts","../src/dom/client/dispatch/update/hydrateUpdate.ts","../src/dom/client/dispatch/update/highlight.ts","../src/dom/client/dispatch/update/nativeUpdate.ts","../src/dom/client/dispatch/update/feature.ts","../src/dom/client/dispatch/instance.ts","../src/dom/client/mount/render.ts","../src/dom/client/mount/hydrate.ts","../src/dom/server/dom/append.ts","../src/dom/server/dom/text.ts","../src/dom/server/dom/plain.ts","../src/dom/server/dom/create.ts","../src/dom/server/dom/update.ts","../src/dom/server/dispatch.ts","../src/dom/server/renderToString.ts","../src/hook/instance.ts","../src/hook/effect.ts","../src/hook/create.ts","../src/hook/feature.ts","../src/index.ts"],"sourcesContent":["export const createRef = <T = any>(value: T) => {\n  return { current: value };\n};\n","import type { MyReactFiberNode } from '../fiber';\nimport type { LinkTreeList } from '../share';\nimport type { FiberDispatch } from './interface';\n\nexport class EmptyDispatch implements FiberDispatch {\n  trigger(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  reconcileCommit(\n    _fiber: MyReactFiberNode,\n    _hydrate: boolean,\n    _parentFiberWithDom: MyReactFiberNode\n  ): boolean {\n    return false;\n  }\n  reconcileCreate(_list: LinkTreeList<MyReactFiberNode>): void {\n    void 0;\n  }\n  reconcileUpdate(_list: LinkTreeList<MyReactFiberNode>): void {\n    void 0;\n  }\n  beginProgressList(): void {\n    void 0;\n  }\n  endProgressList(): void {\n    void 0;\n  }\n  generateUpdateList(_fiber: MyReactFiberNode | MyReactFiberNode[]): void {\n    void 0;\n  }\n  pendingCreate(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  pendingUpdate(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  pendingAppend(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  pendingContext(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  pendingPosition(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  pendingUnmount(\n    _fiber: MyReactFiberNode,\n    _pendingUnmount: MyReactFiberNode | MyReactFiberNode[]\n  ): void {\n    void 0;\n  }\n  pendingLayoutEffect(\n    _fiber: MyReactFiberNode,\n    _layoutEffect: () => void\n  ): void {\n    void 0;\n  }\n  pendingEffect(_fiber: MyReactFiberNode, _effect: () => void): void {\n    void 0;\n  }\n  updateAllSync(): void {\n    void 0;\n  }\n  updateAllAsync(): void {\n    void 0;\n  }\n}\n","import { EmptyDispatch } from '../dispatch';\n\nimport { createRef } from './createRef';\n\nimport type { FiberDispatch } from '../dispatch';\nimport type { PlainElement } from '../dom';\nimport type { MyReactFiberNode } from '../fiber';\nimport type { LinkTreeList } from './listTree';\n\nexport const asyncUpdateTimeLimit = 8;\n\nexport const globalLoop = createRef(false);\n\nexport const globalDispatch = createRef<FiberDispatch>(new EmptyDispatch());\n\nexport const rootFiber = createRef<MyReactFiberNode | null>(null);\n\nexport const rootContainer = createRef<Element | PlainElement | null>(null);\n\nexport const currentRunningFiber = createRef<MyReactFiberNode | null>(null);\n\nexport const currentFunctionFiber = createRef<MyReactFiberNode | null>(null);\n\nexport const currentHookDeepIndex = createRef(0);\n\nexport const isAppMounted = createRef(false);\n\nexport const isAppCrash = createRef(false);\n\nexport const isClientRender = createRef(false);\n\nexport const isServerRender = createRef(false);\n\nexport const isHydrateRender = createRef(false);\n\n// ==== feature ==== //\nexport const enableKeyDiff = createRef(true);\n\nexport const enableHighlight = createRef(false);\n\nexport const enableDebugLog = createRef(false);\n\nexport const enableAllCheck = createRef(true);\n\nexport const enableAsyncUpdate = createRef(true);\n\nexport const enableEventSystem = createRef(true);\n\nexport const enableControlComponent = createRef(true);\n\n// ==== running ==== //\nexport const asyncUpdateTimeStep = createRef<number | null>(null);\n\nexport const nRoundTransformFiberArray = createRef<MyReactFiberNode[]>([]);\n\nexport const cRoundTransformFiberArray = createRef<MyReactFiberNode[]>([]);\n\n// ==== update ==== //\nexport const pendingModifyFiberArray = createRef<MyReactFiberNode[]>([]);\n\nexport const pendingModifyTopLevelFiber = createRef<MyReactFiberNode | null>(\n  null\n);\n\nexport const pendingUpdateFiberListArray = createRef<\n  LinkTreeList<MyReactFiberNode>[]\n>([]);\n\nexport const pendingUpdateFiberList =\n  createRef<LinkTreeList<MyReactFiberNode> | null>(null);\n","import { currentRunningFiber, enableAllCheck, isAppCrash } from './env';\n\nimport type { MixinClassComponent, MixinFunctionComponent } from '../element';\nimport type { MyReactFiberNode } from '../fiber';\n\nexport const getTrackDevLog = (fiber: MyReactFiberNode) => {\n  if (!enableAllCheck.current) return '';\n  const element = fiber.element;\n  const source = typeof element === 'object' ? element?._source : null;\n  const owner = typeof element === 'object' ? element?._owner : null;\n  let preString = '';\n  if (source) {\n    const { fileName, lineNumber } = source;\n    preString = `${preString} (${fileName}:${lineNumber})`;\n  }\n  if (\n    owner &&\n    !fiber.__isDynamicNode__ &&\n    typeof owner.element === 'object' &&\n    typeof owner.element?.type === 'function'\n  ) {\n    const typedType = owner.element.type as\n      | MixinClassComponent\n      | MixinFunctionComponent;\n    const name = typedType.displayName || owner.element.type.name;\n    preString = `${preString} (render dy ${name})`;\n  }\n  return preString;\n};\n\nexport const getFiberNodeName = (fiber: MyReactFiberNode) => {\n  if (fiber.__isMemo__) return `<Memo />${getTrackDevLog(fiber)}`;\n  if (fiber.__isLazy__) return `<Lazy />${getTrackDevLog(fiber)}`;\n  if (fiber.__isPortal__) return `<Portal />${getTrackDevLog(fiber)}`;\n  if (fiber.__isNullNode__) return `<null />${getTrackDevLog(fiber)}`;\n  if (fiber.__isEmptyNode__) return `<Empty />${getTrackDevLog(fiber)}`;\n  if (fiber.__isStrictNode__) return `<Strict />${getTrackDevLog(fiber)}`;\n  if (fiber.__isSuspense__) return `<Suspense />${getTrackDevLog(fiber)}`;\n  if (fiber.__isForwardRef__) return `<ForwardRef />${getTrackDevLog(fiber)}`;\n  if (fiber.__isFragmentNode__) return `<Fragment />${getTrackDevLog(fiber)}`;\n  if (fiber.__isContextProvider__)\n    return `<Provider />${getTrackDevLog(fiber)}`;\n  if (fiber.__isContextConsumer__)\n    return `<Consumer />${getTrackDevLog(fiber)}`;\n  if (typeof fiber.element === 'object' && fiber.element !== null) {\n    if (fiber.__isPlainNode__ && typeof fiber.element?.type === 'string') {\n      return `<${fiber.element.type} />${getTrackDevLog(fiber)}`;\n    }\n    if (fiber.__isDynamicNode__ && typeof fiber.element?.type === 'function') {\n      const typedType = fiber.element.type as\n        | MixinClassComponent\n        | MixinFunctionComponent;\n      let name =\n        typedType.displayName || fiber.element.type.name || 'anonymous';\n      name = fiber.__root__ ? `${name} (root)` : name;\n      return `<${name}* />${getTrackDevLog(fiber)}`;\n    }\n    return `<unknown />${getTrackDevLog(fiber)}`;\n  } else {\n    return `<text - (${fiber.element?.toString()}) />${getTrackDevLog(fiber)}`;\n  }\n};\n\nexport const getFiberTree = (fiber?: MyReactFiberNode | null) => {\n  if (fiber) {\n    const preString = ''.padEnd(4) + 'at'.padEnd(4);\n    let parent = fiber.parent;\n    let res = `${preString}${getFiberNodeName(fiber)}`;\n    while (parent) {\n      res = `${preString}${getFiberNodeName(parent)}\\n${res}`;\n      parent = parent.parent;\n    }\n    return `\\n${res}`;\n  }\n  return '';\n};\n\nexport const getHookTree = (\n  hookType: MyReactFiberNode['hookType'],\n  newType: MyReactFiberNode['hookType']\n) => {\n  let re =\n    '\\n' +\n    ''.padEnd(6) +\n    'Prev render:'.padEnd(20) +\n    'Next render:'.padEnd(10) +\n    '\\n';\n  for (const key in hookType) {\n    const c = hookType[key];\n    const n = newType[key];\n    re +=\n      (+key + 1).toString().padEnd(6) + c?.padEnd(20) + n?.padEnd(10) + '\\n';\n  }\n  re += ''.padEnd(6) + '^'.repeat(30) + '\\n';\n\n  return re;\n};\n\nconst cache: Record<string, boolean> = {};\n\ntype LogProps = {\n  message: string | Error;\n  fiber?: MyReactFiberNode;\n  triggerOnce?: boolean;\n  level?: 'warn' | 'error';\n};\n\nexport const log = ({\n  fiber,\n  message,\n  level = 'warn',\n  triggerOnce = false,\n}: LogProps) => {\n  const tree = getFiberTree(fiber || currentRunningFiber.current);\n  if (triggerOnce) {\n    if (cache[tree]) return;\n    cache[tree] = true;\n  }\n  console[level](\n    `[${level}]:`,\n    '\\n-----------------------------------------\\n',\n    `${\n      typeof message === 'string' ? message : message.stack || message.message\n    }`,\n    '\\n-----------------------------------------\\n',\n    'Render Tree:',\n    tree\n  );\n};\n\nexport const safeCall = <T extends any[] = any[], K = any>(\n  action: (...args: T) => K,\n  ...args: T\n) => {\n  try {\n    return action.call(null, ...args);\n  } catch (e) {\n    log({ message: e as Error, level: 'error' });\n    isAppCrash.current = true;\n    throw new Error((e as Error).message);\n  }\n};\n\nexport const safeCallWithFiber = <T extends any[] = any[], K = any>(\n  { action, fiber }: { action: (...args: T) => K; fiber: MyReactFiberNode },\n  ...args: T\n) => {\n  try {\n    return action.call(null, ...args);\n  } catch (e) {\n    log({ message: e as Error, level: 'error', fiber });\n    isAppCrash.current = true;\n    throw new Error((e as Error).message);\n  }\n};\n\nexport const debugWithDOM = (fiber: MyReactFiberNode) => {\n  if (fiber.dom) {\n    const debugDOM = fiber.dom as Element & {\n      __fiber__: MyReactFiberNode;\n      __element__: MyReactFiberNode['element'];\n      __children__: MyReactFiberNode['children'];\n    };\n    debugDOM['__fiber__'] = fiber;\n    debugDOM['__element__'] = fiber.element;\n    debugDOM['__children__'] = fiber.children;\n  }\n};\n","import type { MyReactFiberNode } from '../fiber';\n\nexport class MyReactInternalInstance {\n  __internal_instance_state__: {\n    __fiber__: MyReactFiberNode | null;\n    __context__: MyReactFiberNode | null;\n  } = {\n    __fiber__: null,\n    __context__: null,\n  };\n\n  __internal_instance_update__ = {\n    __pendingEffect__: false,\n  };\n\n  context: null | unknown = null;\n\n  get __fiber__() {\n    return this.__internal_instance_state__.__fiber__;\n  }\n\n  set __fiber__(v) {\n    this.__internal_instance_state__.__fiber__ = v;\n  }\n\n  get __context__() {\n    return this.__internal_instance_state__.__context__;\n  }\n\n  set __context__(v) {\n    this.__internal_instance_state__.__context__ = v;\n  }\n\n  get __pendingEffect__() {\n    return this.__internal_instance_update__.__pendingEffect__;\n  }\n\n  set __pendingEffect__(v) {\n    this.__internal_instance_update__.__pendingEffect__ = v;\n  }\n\n  setContext(context: MyReactFiberNode | null) {\n    if (this.__context__) this.__context__.removeDependence(this);\n    this.__context__ = context;\n    this.__context__?.addDependence(this);\n  }\n\n  setFiber(fiber: MyReactFiberNode) {\n    this.__fiber__ = fiber;\n  }\n\n  unmount() {\n    this.__context__?.removeDependence(this);\n  }\n}\n","export const NODE_TYPE_OBJ = {\n  __isNullNode__: false,\n  __isTextNode__: false,\n  __isEmptyNode__: false,\n  __isPlainNode__: false,\n  __isStrictNode__: false,\n  __isFragmentNode__: false,\n  // ====  object node ==== //\n  __isObjectNode__: false,\n  __isMemo__: false,\n  __isPortal__: false,\n  __isForwardRef__: false,\n  __isContextProvider__: false,\n  __isContextConsumer__: false,\n  __isLazy__: false,\n  __isSuspense__: false,\n  // ==== dynamic node ==== //\n  __isDynamicNode__: false,\n  __isClassComponent__: false,\n  __isFunctionComponent__: false,\n} as const;\n\nexport const NODE_TYPE_KEY = Object.keys(NODE_TYPE_OBJ) as Array<\n  keyof typeof NODE_TYPE_OBJ\n>;\n","import { NODE_TYPE_KEY } from './nodeType';\n\nexport class MyReactInternalType {\n  __internal_node_type__ = {\n    __isNullNode__: false,\n    __isTextNode__: false,\n    __isEmptyNode__: false,\n    __isPlainNode__: false,\n    __isStrictNode__: false,\n    __isFragmentNode__: false,\n    // ====  object node ==== //\n    __isObjectNode__: false,\n    __isForwardRef__: false,\n    __isPortal__: false,\n    __isMemo__: false,\n    __isContextProvider__: false,\n    __isContextConsumer__: false,\n    __isLazy__: false,\n    __isSuspense__: false,\n    // ==== dynamic node ==== //\n    __isDynamicNode__: false,\n    __isClassComponent__: false,\n    __isFunctionComponent__: false,\n  };\n\n  get __isNullNode__() {\n    return this.__internal_node_type__.__isNullNode__;\n  }\n\n  get __isTextNode__() {\n    return this.__internal_node_type__.__isTextNode__;\n  }\n  get __isEmptyNode__() {\n    return this.__internal_node_type__.__isEmptyNode__;\n  }\n  get __isPlainNode__() {\n    return this.__internal_node_type__.__isPlainNode__;\n  }\n  get __isStrictNode__() {\n    return this.__internal_node_type__.__isStrictNode__;\n  }\n  get __isFragmentNode__() {\n    return this.__internal_node_type__.__isFragmentNode__;\n  }\n  get __isObjectNode__() {\n    return this.__internal_node_type__.__isObjectNode__;\n  }\n  get __isForwardRef__() {\n    return this.__internal_node_type__.__isForwardRef__;\n  }\n  get __isPortal__() {\n    return this.__internal_node_type__.__isPortal__;\n  }\n  get __isMemo__() {\n    return this.__internal_node_type__.__isMemo__;\n  }\n  get __isContextProvider__() {\n    return this.__internal_node_type__.__isContextProvider__;\n  }\n  get __isContextConsumer__() {\n    return this.__internal_node_type__.__isContextConsumer__;\n  }\n  get __isLazy__() {\n    return this.__internal_node_type__.__isLazy__;\n  }\n  get __isSuspense__() {\n    return this.__internal_node_type__.__isSuspense__;\n  }\n  get __isDynamicNode__() {\n    return this.__internal_node_type__.__isDynamicNode__;\n  }\n  get __isClassComponent__() {\n    return this.__internal_node_type__.__isClassComponent__;\n  }\n  get __isFunctionComponent__() {\n    return this.__internal_node_type__.__isFunctionComponent__;\n  }\n\n  setNodeType(props?: { [key in typeof NODE_TYPE_KEY[number]]?: boolean }) {\n    Object.keys(props || {}).forEach((key) => {\n      const typeKey = key as typeof NODE_TYPE_KEY[number];\n      this.__internal_node_type__[typeKey] = props?.[typeKey] || false;\n    });\n  }\n\n  isSameType(props?: { [key in typeof NODE_TYPE_KEY[number]]?: boolean }) {\n    if (props) {\n      return NODE_TYPE_KEY.every((key) =>\n        this.__internal_node_type__[key]\n          ? Object.is(this.__internal_node_type__[key], props[key])\n          : true\n      );\n    } else {\n      return false;\n    }\n  }\n}\n","export const isNormalEquals = (\n  src: Record<string, unknown> | string | number | boolean | null,\n  target: Record<string, unknown> | string | number | boolean | null,\n  children = true\n) => {\n  if (\n    typeof src === 'object' &&\n    typeof target === 'object' &&\n    src !== null &&\n    target !== null\n  ) {\n    const srcKeys = Object.keys(src);\n    const targetKeys = Object.keys(target);\n    if (srcKeys.length !== targetKeys.length) return false;\n    let res = true;\n    for (const key in src) {\n      if (key === 'children') {\n        if (children) {\n          res = res && Object.is(src[key], target[key]);\n        } else {\n          continue;\n        }\n      } else {\n        res = res && Object.is(src[key], target[key]);\n      }\n      if (!res) return res;\n    }\n    return res;\n  }\n\n  return Object.is(src, target);\n};\n\nexport const isArrayEquals = (src: any[], target: any[]) => {\n  if (\n    Array.isArray(src) &&\n    Array.isArray(target) &&\n    src.length === target.length\n  ) {\n    let re = true;\n    for (const key in src) {\n      re = re && Object.is(src[key], target[key]);\n      if (!re) return re;\n    }\n    return re;\n  }\n  return false;\n};\n","export const once = <T extends any[], K = any>(action: (...args: T) => K) => {\n  let called = false;\n  return (...args: T) => {\n    if (called) return;\n    called = true;\n    action.call(null, ...args);\n  };\n};\n","export const IS_SINGLE_ELEMENT = {\n  br: true,\n  hr: true,\n  img: true,\n  input: true,\n  param: true,\n  meta: true,\n  link: true,\n};\n","export const My_React_Element = Symbol.for('react.element');\n\nexport const My_React_Memo = Symbol.for('react.memo');\n\nexport const My_React_ForwardRef = Symbol.for('react.forward_ref');\n\nexport const My_React_Portal = Symbol.for('react.portal');\n\nexport const My_React_Fragment = Symbol.for('react.fragment');\n\nexport const My_React_Context = Symbol.for('react.context');\n\nexport const My_React_Provider = Symbol.for('react.provider');\n\nexport const My_React_Consumer = Symbol.for('react.consumer');\n\nexport const My_React_Lazy = Symbol.for('react.lazy');\n\nexport const My_React_Suspense = Symbol.for('react.suspense');\n\nexport const My_React_Strict = Symbol.for('react.strict');\n","import type { MaybeArrayChildrenNode, ArrayChildrenNode } from '../element';\n\nexport const flattenChildren = (\n  children: MaybeArrayChildrenNode\n): ArrayChildrenNode => {\n  if (Array.isArray(children)) {\n    return children.reduce<ArrayChildrenNode>(\n      (p, c) => p.concat(flattenChildren(c)),\n      []\n    );\n  }\n  return [children];\n};\n","import { asyncUpdateTimeLimit, asyncUpdateTimeStep } from './env';\n\nexport const shouldPauseAsyncUpdate = () => {\n  if (!asyncUpdateTimeStep.current) {\n    asyncUpdateTimeStep.current = Date.now();\n    return false;\n  } else {\n    const result =\n      Date.now() - asyncUpdateTimeStep.current > asyncUpdateTimeLimit;\n    if (result) asyncUpdateTimeStep.current = null;\n    return result;\n  }\n};\n","import { getTypeFromVDom, isValidElement } from '../element';\nimport { enableAllCheck, globalDispatch, MyReactInternalType } from '../share';\n\nimport type { MyReactComponent } from '../component';\nimport type {\n  createContext,\n  forwardRef,\n  memo,\n  Props,\n  ChildrenNode,\n  Children,\n  DynamicChildrenNode,\n} from '../element';\nimport type { Action, MyReactHookNode } from '../hook';\nimport type { MyReactInternalInstance } from '../share';\n\nexport type ComponentUpdateQueue = {\n  type: 'state';\n  trigger: MyReactComponent;\n  isForce?: boolean;\n  payLoad?:\n    | Record<string, unknown>\n    | ((\n        state: Record<string, unknown>,\n        props: Record<string, unknown>\n      ) => Record<string, unknown>);\n  callback?: () => void;\n};\n\nexport type HookUpdateQueue = {\n  type: 'hook';\n  trigger: MyReactHookNode;\n  action: Action;\n};\n\nclass MyReactFiberInternal extends MyReactInternalType {\n  __internal_node_diff__: {\n    __renderedChildren__: Array<MyReactFiberNode | MyReactFiberNode[]>;\n    __renderedChildHead__: MyReactFiberNode | null;\n    __renderedChildFoot__: MyReactFiberNode | null;\n    __renderedCount__: number;\n    __dynamicChildren__: ChildrenNode | null;\n    __isRenderDynamic__: boolean;\n    __isUpdateRender__: boolean;\n    __updateTimeStep__: number;\n    __lastUpdateTimeStep__: number;\n    __updateTimeSpace__: number;\n    __fallback__: ChildrenNode | null;\n    __root__: boolean;\n  } = {\n    __renderedChildren__: [],\n\n    __renderedChildHead__: null,\n\n    __renderedChildFoot__: null,\n\n    __renderedCount__: 1,\n\n    __isRenderDynamic__: false,\n\n    __dynamicChildren__: null,\n\n    __isUpdateRender__: false,\n\n    __updateTimeStep__: Date.now(),\n\n    __lastUpdateTimeStep__: 0,\n\n    __updateTimeSpace__: Infinity,\n\n    __fallback__: null,\n\n    __root__: false,\n  };\n\n  get __isUpdateRender__() {\n    return this.__internal_node_diff__.__isUpdateRender__;\n  }\n\n  set __isUpdateRender__(v) {\n    this.__internal_node_diff__.__isUpdateRender__ = v;\n  }\n\n  get __isRenderDynamic__() {\n    return this.__internal_node_diff__.__isRenderDynamic__;\n  }\n\n  set __isRenderDynamic__(v) {\n    this.__internal_node_diff__.__isRenderDynamic__ = v;\n  }\n\n  get __renderedCount__() {\n    return this.__internal_node_diff__.__renderedCount__;\n  }\n\n  set __renderedCount__(v) {\n    this.__internal_node_diff__.__renderedCount__ = v;\n  }\n\n  get __renderedChildren__() {\n    return this.__internal_node_diff__.__renderedChildren__;\n  }\n\n  set __renderedChildren__(v) {\n    this.__internal_node_diff__.__renderedChildren__ = v;\n  }\n\n  get __renderedChildHead__() {\n    return this.__internal_node_diff__.__renderedChildHead__;\n  }\n\n  set __renderedChildHead__(v) {\n    this.__internal_node_diff__.__renderedChildHead__ = v;\n  }\n\n  get __renderedChildFoot__() {\n    return this.__internal_node_diff__.__renderedChildFoot__;\n  }\n\n  set __renderedChildFoot__(v) {\n    this.__internal_node_diff__.__renderedChildFoot__ = v;\n  }\n\n  get __dynamicChildren__() {\n    return this.__internal_node_diff__.__dynamicChildren__;\n  }\n\n  set __dynamicChildren__(v) {\n    this.__internal_node_diff__.__dynamicChildren__ = v;\n    this.__internal_node_diff__.__isRenderDynamic__ = true;\n  }\n\n  get __updateTimeStep__() {\n    return this.__internal_node_diff__.__updateTimeStep__;\n  }\n\n  set __updateTimeStep__(v) {\n    const diff = this.__internal_node_diff__;\n    const lastTimeStep = diff.__updateTimeStep__;\n    const nowTimeStep = v;\n    diff.__lastUpdateTimeStep__ = lastTimeStep;\n    diff.__updateTimeStep__ = nowTimeStep;\n    diff.__updateTimeSpace__ = nowTimeStep - lastTimeStep;\n  }\n\n  get __fallback__() {\n    return this.__internal_node_diff__.__fallback__;\n  }\n\n  set __fallback__(v) {\n    this.__internal_node_diff__.__fallback__ = v;\n  }\n\n  get __root__() {\n    return this.__internal_node_diff__.__root__;\n  }\n\n  set __root__(v) {\n    this.__internal_node_diff__.__root__ = v;\n  }\n\n  __internal_node_state__ = {\n    __pendingCreate__: false,\n    __pendingUpdate__: false,\n    __pendingAppend__: false,\n    __pendingPosition__: false,\n    __pendingContext__: false,\n  };\n\n  get __pendingCreate__() {\n    return this.__internal_node_state__.__pendingCreate__;\n  }\n\n  set __pendingCreate__(v) {\n    this.__internal_node_state__.__pendingCreate__ = v;\n  }\n\n  get __pendingUpdate__() {\n    return this.__internal_node_state__.__pendingUpdate__;\n  }\n\n  set __pendingUpdate__(v) {\n    this.__internal_node_state__.__pendingUpdate__ = v;\n  }\n\n  get __pendingAppend__() {\n    return this.__internal_node_state__.__pendingAppend__;\n  }\n\n  set __pendingAppend__(v) {\n    this.__internal_node_state__.__pendingAppend__ = v;\n  }\n\n  get __pendingPosition__() {\n    return this.__internal_node_state__.__pendingPosition__;\n  }\n\n  set __pendingPosition__(v) {\n    this.__internal_node_state__.__pendingPosition__ = v;\n  }\n\n  get __pendingContext__() {\n    return this.__internal_node_state__.__pendingContext__;\n  }\n\n  set __pendingContext__(v) {\n    this.__internal_node_state__.__pendingContext__ = v;\n  }\n\n  __internal_node_event__: Record<\n    string,\n    ((...args: any[]) => void) & { cb?: any[] }\n  > = {};\n\n  __internal_node_context__: {\n    __dependence__: MyReactInternalInstance[];\n    __contextMap__: Record<string, MyReactFiberNode>;\n  } = {\n    __dependence__: [],\n    __contextMap__: {},\n  };\n\n  get __dependence__() {\n    return this.__internal_node_context__.__dependence__;\n  }\n\n  set __dependence__(v) {\n    this.__internal_node_context__.__dependence__ = v;\n  }\n\n  get __contextMap__() {\n    return this.__internal_node_context__.__contextMap__;\n  }\n\n  set __contextMap__(v) {\n    this.__internal_node_context__.__contextMap__ = v;\n  }\n\n  addDependence(node: MyReactInternalInstance) {\n    const dependence = this.__dependence__;\n    if (dependence.every((n) => n !== node)) {\n      dependence.push(node);\n    }\n  }\n\n  removeDependence(node: MyReactInternalInstance) {\n    const dependence = this.__dependence__;\n    this.__dependence__ = dependence.filter((n) => n !== node);\n  }\n\n  __internal_node_props__: {\n    __vdom__: null | DynamicChildrenNode;\n    __prevVdom__: null | DynamicChildrenNode;\n    __props__: Props;\n    __prevProps__: Props;\n    __children__: Props['children'] | null;\n  } = {\n    __vdom__: null,\n    __prevVdom__: null,\n    __props__: {},\n    __prevProps__: {},\n    __children__: null,\n  };\n\n  get __vdom__() {\n    return this.__internal_node_props__.__vdom__;\n  }\n\n  set __vdom__(v) {\n    const props = this.__internal_node_props__;\n    props.__vdom__ = v;\n    props.__props__ = typeof v === 'object' ? v?.props || {} : {};\n    props.__children__ = typeof v === 'object' ? v?.props.children : [];\n  }\n\n  get __props__() {\n    return this.__internal_node_props__.__props__;\n  }\n\n  get __children__() {\n    return this.__internal_node_props__.__children__;\n  }\n\n  get __prevVdom__() {\n    return this.__internal_node_props__.__prevVdom__;\n  }\n\n  set __prevVdom__(v) {\n    const props = this.__internal_node_props__;\n    props.__prevVdom__ = v;\n    props.__prevProps__ = typeof v === 'object' ? v?.props || {} : {};\n  }\n\n  get __prevProps__() {\n    return this.__internal_node_props__.__prevProps__;\n  }\n\n  // __internal_node_dom__: {\n  //   dom: Element | Text | null;\n  //   nameSpace: string | null;\n  // } = {\n  //   dom: null,\n  //   nameSpace: null,\n  // };\n\n  // get dom() {\n  //   return this.__internal_node_dom__.dom;\n  // }\n\n  // set dom(v) {\n  //   this.__internal_node_dom__.dom = v;\n  // }\n\n  // get nameSpace() {\n  //   return this.__internal_node_dom__.nameSpace;\n  // }\n\n  // set nameSpace(v) {\n  //   this.__internal_node_dom__.nameSpace = v;\n  // }\n\n  __internal_node_hook__: {\n    hookHead: null | MyReactHookNode;\n    hookFoot: null | MyReactHookNode;\n    hookList: MyReactHookNode[];\n    hookType: MyReactHookNode['hookType'][];\n  } = {\n    hookHead: null,\n    hookFoot: null,\n    hookList: [],\n    hookType: [],\n  };\n\n  get hookHead() {\n    return this.__internal_node_hook__.hookHead;\n  }\n  set hookHead(v) {\n    this.__internal_node_hook__.hookHead = v;\n  }\n  get hookFoot() {\n    return this.__internal_node_hook__.hookFoot;\n  }\n  set hookFoot(v) {\n    this.__internal_node_hook__.hookFoot = v;\n  }\n  get hookList() {\n    return this.__internal_node_hook__.hookList;\n  }\n  set hookList(v) {\n    this.__internal_node_hook__.hookList = v;\n  }\n  get hookType() {\n    return this.__internal_node_hook__.hookType;\n  }\n  set hookType(v) {\n    this.__internal_node_hook__.hookType = v;\n  }\n\n  __internal_node_update__: {\n    __compUpdateQueue__: Array<ComponentUpdateQueue>;\n    __hookUpdateQueue__: Array<HookUpdateQueue>;\n  } = {\n    __compUpdateQueue__: [],\n    __hookUpdateQueue__: [],\n  };\n\n  __internal_node_effect__: {\n    __effectQueue__: Array<() => void>;\n    __layoutEffectQueue__: Array<() => void>;\n  } = {\n    __effectQueue__: [],\n    __layoutEffectQueue__: [],\n  };\n\n  __internal_node_unmount__: {\n    __unmountQueue__: Array<MyReactFiberNode | MyReactFiberNode[]>;\n  } = {\n    __unmountQueue__: [],\n  };\n\n  get __compUpdateQueue__() {\n    return this.__internal_node_update__.__compUpdateQueue__;\n  }\n\n  set __compUpdateQueue__(v) {\n    this.__internal_node_update__.__compUpdateQueue__ = v;\n  }\n\n  get __hookUpdateQueue__() {\n    return this.__internal_node_update__.__hookUpdateQueue__;\n  }\n\n  set __hookUpdateQueue__(v) {\n    this.__internal_node_update__.__hookUpdateQueue__ = v;\n  }\n\n  get __unmountQueue__() {\n    return this.__internal_node_unmount__.__unmountQueue__;\n  }\n\n  set __unmountQueue__(v) {\n    this.__internal_node_unmount__.__unmountQueue__ = v;\n  }\n\n  get __effectQueue__() {\n    return this.__internal_node_effect__.__effectQueue__;\n  }\n\n  set __effectQueue__(v) {\n    this.__internal_node_effect__.__effectQueue__ = v;\n  }\n\n  get __layoutEffectQueue__() {\n    return this.__internal_node_effect__.__layoutEffectQueue__;\n  }\n\n  set __layoutEffectQueue__(v) {\n    this.__internal_node_effect__.__layoutEffectQueue__ = v;\n  }\n}\n\nexport class MyReactFiberNode extends MyReactFiberInternal {\n  fiberIndex = 0;\n\n  mount = true;\n\n  dom: Element | Text | null = null;\n\n  nameSpace: string | null = null;\n\n  children: MyReactFiberNode[] = [];\n\n  child: MyReactFiberNode | null = null;\n\n  parent: MyReactFiberNode | null = null;\n\n  sibling: MyReactFiberNode | null = null;\n\n  instance: MyReactInternalInstance | null = null;\n\n  element: DynamicChildrenNode;\n\n  __needUpdate__ = true;\n\n  __needTrigger__ = false;\n\n  constructor(\n    index: number,\n    parent: MyReactFiberNode | null,\n    element: DynamicChildrenNode\n  ) {\n    super();\n    this.parent = parent;\n    this.fiberIndex = index;\n    this.element = element;\n    this.__vdom__ = element;\n  }\n\n  addChild(child: MyReactFiberNode) {\n    this.children.push(child);\n    if (this.__renderedChildFoot__) {\n      this.__renderedChildFoot__.sibling = child;\n      this.__renderedChildFoot__ = child;\n    } else {\n      this.child = child;\n      this.__renderedChildHead__ = child;\n      this.__renderedChildFoot__ = child;\n    }\n  }\n\n  initialParent() {\n    if (this.parent) {\n      this.parent.addChild(this);\n      if (this.parent.nameSpace) {\n        this.nameSpace = this.parent.nameSpace;\n      }\n      if (this.parent.__isSuspense__) {\n        this.__fallback__ = this.parent.__props__.fallback as ChildrenNode;\n      } else {\n        this.__fallback__ = this.parent.__fallback__;\n      }\n      const contextMap = Object.assign(\n        {},\n        this.parent.__contextMap__,\n        this.__contextMap__\n      );\n      if (\n        typeof this.element === 'object' &&\n        typeof this.element?.type === 'object' &&\n        this.__isContextProvider__\n      ) {\n        const typedElementType = this.element.type as ReturnType<\n          typeof createContext\n        >['Provider'];\n        const contextObj = typedElementType['Context'];\n        const contextId = contextObj['id'];\n        contextMap[contextId] = this;\n      }\n      this.__contextMap__ = contextMap;\n    }\n  }\n\n  installParent(newParent: MyReactFiberNode) {\n    this.parent = newParent;\n    this.sibling = null;\n    this.initialParent();\n  }\n\n  updateRenderState() {\n    if (enableAllCheck.current) {\n      this.__renderedCount__ += 1;\n      this.__updateTimeStep__ = Date.now();\n    }\n  }\n\n  beforeUpdate() {\n    this.child = null;\n    this.children = [];\n    this.__renderedChildHead__ = null;\n    this.__renderedChildFoot__ = null;\n  }\n\n  triggerUpdate() {\n    this.__needUpdate__ = true;\n    this.__needTrigger__ = true;\n    this.__isUpdateRender__ = true;\n  }\n\n  prepareUpdate() {\n    this.__needUpdate__ = true;\n    this.__isUpdateRender__ = true;\n  }\n\n  afterUpdate() {\n    this.__needUpdate__ = false;\n    this.__needTrigger__ = false;\n    this.__isUpdateRender__ = false;\n    this.__isRenderDynamic__ = false;\n  }\n\n  // when update, install new vdom\n  installVDom(vdom: DynamicChildrenNode) {\n    this.element = vdom;\n    this.__vdom__ = vdom;\n  }\n\n  // TODO\n  checkVDom() {\n    if (enableAllCheck.current) {\n      const vdom = this.element;\n      if (isValidElement(vdom)) {\n        const typedVDom = vdom;\n        if (!typedVDom._store['validType']) {\n          if (this.__isContextConsumer__) {\n            if (typeof typedVDom.props.children !== 'function') {\n              throw new Error(`Consumer need a function children`);\n            }\n          }\n          if (this.__isMemo__ || this.__isForwardRef__) {\n            const typedType = typedVDom.type as\n              | ReturnType<typeof forwardRef>\n              | ReturnType<typeof memo>;\n            if (\n              typeof typedType.render !== 'function' &&\n              typeof typedType.render !== 'object'\n            ) {\n              throw new Error('invalid render type');\n            }\n            if (\n              this.__isForwardRef__ &&\n              typeof typedType.render !== 'function'\n            ) {\n              throw new Error('forwardRef() need a function component');\n            }\n          }\n          if (typedVDom.ref) {\n            if (\n              typeof typedVDom.ref !== 'object' &&\n              typeof typedVDom.ref !== 'function'\n            ) {\n              throw new Error(\n                'unSupport ref usage, should be a function or a object like {current: any}'\n              );\n            }\n          }\n          if (typedVDom.key && typeof typedVDom.key !== 'string') {\n            throw new Error(`invalid key type, ${typedVDom.key}`);\n          }\n          if (\n            typedVDom.props.children &&\n            typedVDom.props['dangerouslySetInnerHTML']\n          ) {\n            throw new Error(\n              'can not render contain `children` and `dangerouslySetInnerHTML`'\n            );\n          }\n          if (typedVDom.props['dangerouslySetInnerHTML']) {\n            if (\n              typeof typedVDom.props['dangerouslySetInnerHTML'] !== 'object' ||\n              !Object.prototype.hasOwnProperty.call(\n                typedVDom.props['dangerouslySetInnerHTML'],\n                '__html'\n              )\n            ) {\n              throw new Error(\n                'invalid dangerouslySetInnerHTML props, should like {__html: string}'\n              );\n            }\n          }\n          typedVDom._store['validType'] = true;\n        }\n      }\n    }\n  }\n\n  initialType() {\n    const vdom = this.element;\n    const nodeType = getTypeFromVDom(vdom);\n    this.setNodeType(nodeType);\n    if (isValidElement(vdom)) {\n      if (vdom.type === 'svg') this.nameSpace = 'http://www.w3.org/2000/svg';\n    }\n  }\n\n  checkIsSameType(vdom: ChildrenNode) {\n    if (this.__needTrigger__) return true;\n    const nodeType = getTypeFromVDom(vdom);\n    const result = this.isSameType(nodeType);\n    const element = vdom as Children;\n    const currentElement = this.element as Children;\n    if (result) {\n      if (this.__isDynamicNode__ || this.__isPlainNode__) {\n        return Object.is(currentElement.type, element.type);\n      }\n      if (\n        this.__isObjectNode__ &&\n        typeof element.type === 'object' &&\n        typeof currentElement.type === 'object'\n      ) {\n        return Object.is(\n          element.type['$$typeof'],\n          currentElement.type['$$typeof']\n        );\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  addHook(hookNode: MyReactHookNode) {\n    this.hookList.push(hookNode);\n    this.hookType.push(hookNode.hookType);\n    if (!this.hookHead) {\n      this.hookHead = hookNode;\n      this.hookFoot = hookNode;\n    } else if (this.hookFoot) {\n      this.hookFoot.hookNext = hookNode;\n      hookNode.hookPrev = this.hookFoot;\n      this.hookFoot = hookNode;\n    }\n  }\n\n  checkHook(hookNode: MyReactHookNode) {\n    if (enableAllCheck.current) {\n      if (\n        hookNode.hookType === 'useMemo' ||\n        hookNode.hookType === 'useEffect' ||\n        hookNode.hookType === 'useCallback' ||\n        hookNode.hookType === 'useLayoutEffect'\n      ) {\n        if (typeof hookNode.value !== 'function') {\n          throw new Error(`${hookNode.hookType} initial error`);\n        }\n      }\n      if (hookNode.hookType === 'useContext') {\n        if (typeof hookNode.value !== 'object' || hookNode.value === null) {\n          throw new Error(`${hookNode.hookType} initial error`);\n        }\n      }\n    }\n  }\n\n  applyRef() {\n    if (this.__isPlainNode__) {\n      const typedElement = this.element as Children;\n      if (this.dom) {\n        const ref = typedElement.ref;\n        if (typeof ref === 'object' && ref !== null) {\n          ref.current = this.dom;\n        } else if (typeof ref === 'function') {\n          ref(this.dom as Element);\n        }\n      } else {\n        throw new Error('do not have a dom for plain node');\n      }\n    }\n    if (this.__isClassComponent__) {\n      const typedElement = this.element as Children;\n      if (this.instance) {\n        const ref = typedElement.ref;\n        if (typeof ref === 'object' && ref !== null) {\n          ref.current = this.instance;\n        } else if (typeof ref === 'function') {\n          ref(this.instance);\n        }\n      }\n    }\n  }\n\n  applyVDom() {\n    this.__prevVdom__ = this.__isTextNode__\n      ? this.__vdom__\n      : Object.assign({}, this.__vdom__);\n  }\n\n  installInstance(instance: MyReactInternalInstance) {\n    this.instance = instance;\n  }\n\n  update() {\n    globalDispatch.current.trigger(this);\n  }\n\n  unmount() {\n    this.hookList.forEach((hook) => hook.unmount());\n    this.instance && this.instance.unmount();\n    this.mount = false;\n    this.__needUpdate__ = false;\n    this.__needTrigger__ = false;\n    this.__pendingCreate__ = false;\n    this.__pendingUpdate__ = false;\n    this.__pendingAppend__ = false;\n    this.__pendingPosition__ = false;\n  }\n}\n","import type { createContext } from '../element';\nimport type { MyReactFiberNode } from './instance';\n\nexport const getContextFiber = (\n  fiber: MyReactFiberNode | null,\n  ContextObject?: ReturnType<typeof createContext> | null\n) => {\n  if (ContextObject && fiber) {\n    const id = ContextObject.id;\n    const contextFiber = fiber.__contextMap__[id];\n    return contextFiber;\n  }\n  return null;\n};\n\nexport const getContextValue = (\n  fiber: MyReactFiberNode | null,\n  ContextObject?: ReturnType<typeof createContext> | null\n) => {\n  const contextValue = (\n    fiber ? fiber.__props__.value : ContextObject?.Provider.value\n  ) as Record<string, unknown> | null;\n\n  return contextValue;\n};\n","import type { MixinMyReactComponentType } from '../component';\nimport type { MyReactFiberNode } from './instance';\n\nexport const processComponentUpdateQueue = (fiber: MyReactFiberNode) => {\n  const allComponentUpdater = fiber.__compUpdateQueue__.slice(0);\n  fiber.__compUpdateQueue__ = [];\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n  const baseState = Object.assign({}, typedInstance.state);\n  const baseProps = Object.assign({}, typedInstance.props);\n  return allComponentUpdater.reduce<{\n    newState: Record<string, unknown>;\n    isForce: boolean;\n    callback: Array<() => void>;\n  }>(\n    (p, c) => ({\n      newState: {\n        ...p.newState,\n        ...(typeof c.payLoad === 'function'\n          ? c.payLoad(baseState, baseProps)\n          : c.payLoad),\n      },\n      isForce: p.isForce || c.isForce || false,\n      callback: c.callback ? p.callback.concat(c.callback) : p.callback,\n    }),\n    { newState: { ...baseState }, isForce: false, callback: [] }\n  );\n};\n\nexport const processHookUpdateQueue = (fiber: MyReactFiberNode) => {\n  const allHookUpdater = fiber.__hookUpdateQueue__.slice(0);\n  fiber.__hookUpdateQueue__ = [];\n  allHookUpdater.forEach(({ action, trigger }) => {\n    trigger.result = trigger.reducer(trigger.result, action);\n  });\n};\n","import { globalDispatch, isNormalEquals } from '../share';\n\nimport type { Children, ChildrenNode } from '../element';\nimport type { MyReactFiberNode } from './instance';\n\nexport const updateFiberNode = (\n  {\n    fiber,\n    parent,\n    prevFiber,\n  }: {\n    fiber: MyReactFiberNode;\n    parent: MyReactFiberNode;\n    prevFiber: MyReactFiberNode;\n  },\n  newChild: ChildrenNode\n) => {\n  fiber.installParent(parent);\n\n  const prevVDom = fiber.__vdom__;\n\n  fiber.installVDom(newChild);\n\n  const newVDom = fiber.__vdom__;\n\n  fiber.checkVDom();\n\n  fiber.updateRenderState();\n\n  if (prevVDom !== newVDom) {\n    if (fiber.__isMemo__) {\n      const typedPrevVDom = prevVDom as Children;\n      const typedNewVDom = newVDom as Children;\n      if (\n        !fiber.__needTrigger__ &&\n        isNormalEquals(typedPrevVDom.props, typedNewVDom.props)\n      ) {\n        fiber.afterUpdate();\n      } else {\n        fiber.prepareUpdate();\n      }\n    } else {\n      fiber.prepareUpdate();\n\n      if (fiber.__isContextProvider__) {\n        const typedPrevVDom = prevVDom as Children;\n        const typedNewVDom = newVDom as Children;\n        if (\n          !isNormalEquals(\n            typedPrevVDom.props.value as Record<string, unknown>,\n            typedNewVDom.props.value as Record<string, unknown>\n          )\n        ) {\n          globalDispatch.current.pendingContext(fiber);\n        }\n      }\n\n      if (fiber.__isPlainNode__) {\n        const typedPrevVDom = prevVDom as Children;\n        const typedNewVDom = newVDom as Children;\n        if (!isNormalEquals(typedPrevVDom.props, typedNewVDom.props, false)) {\n          globalDispatch.current.pendingUpdate(fiber);\n        }\n      }\n\n      if (fiber.__isTextNode__) {\n        globalDispatch.current.pendingUpdate(fiber);\n      }\n    }\n  }\n\n  if (fiber !== prevFiber) {\n    globalDispatch.current.pendingPosition(fiber);\n  }\n\n  return fiber;\n};\n","import { globalDispatch } from '../share';\n\nimport { MyReactFiberNode } from './instance';\n\nimport type { Children, ChildrenNode } from '../element';\n\nexport const createFiberNode = (\n  {\n    fiberIndex,\n    parent,\n    type = 'append',\n  }: {\n    fiberIndex: number;\n    parent: MyReactFiberNode | null;\n    type?: 'append' | 'position';\n  },\n  VDom: ChildrenNode\n) => {\n  const newFiberNode = new MyReactFiberNode(fiberIndex, parent, VDom);\n\n  newFiberNode.checkVDom();\n\n  newFiberNode.initialType();\n\n  newFiberNode.initialParent();\n\n  globalDispatch.current.pendingCreate(newFiberNode);\n\n  globalDispatch.current.pendingUpdate(newFiberNode);\n\n  if (type === 'append') {\n    globalDispatch.current.pendingAppend(newFiberNode);\n  } else {\n    globalDispatch.current.pendingPosition(newFiberNode);\n  }\n\n  if (newFiberNode.__isPlainNode__ || newFiberNode.__isClassComponent__) {\n    if ((VDom as Children).ref) {\n      globalDispatch.current.pendingLayoutEffect(newFiberNode, () =>\n        newFiberNode.applyRef()\n      );\n    }\n  }\n\n  return newFiberNode;\n};\n","import type { MyReactFiberNode } from './instance';\n\nexport const unmountFiber = (fiber: MyReactFiberNode) => {\n  fiber.children.forEach(unmountFiber);\n  fiber.unmount();\n};\n","import { MyReactFiberNode } from '../fiber';\n\nexport const mapFiber = (\n  arrayLike: MyReactFiberNode | MyReactFiberNode[],\n  action: (f: MyReactFiberNode) => void\n) => {\n  if (Array.isArray(arrayLike)) {\n    arrayLike.forEach((f) => mapFiber(f, action));\n  } else {\n    if (arrayLike instanceof MyReactFiberNode) {\n      action(arrayLike);\n    }\n  }\n};\n","import { isAppCrash, isHydrateRender, isServerRender } from './env';\n\nexport const cannotUpdate = () => {\n  if (isServerRender.current)\n    throw new Error('can not update component during SSR');\n  if (isHydrateRender.current)\n    throw new Error('can not update component during hydrate');\n  if (isAppCrash.current) return true;\n  if (typeof window === 'undefined') return false;\n  return true;\n};\n","export const IS_UNIT_LESS_NUMBER = {\n  animationIterationCount: true,\n  borderImageOutset: true,\n  borderImageSlice: true,\n  borderImageWidth: true,\n  boxFlex: true,\n  boxFlexGroup: true,\n  boxOrdinalGroup: true,\n  columnCount: true,\n  columns: true,\n  flex: true,\n  flexGrow: true,\n  flexPositive: true,\n  flexShrink: true,\n  flexNegative: true,\n  flexOrder: true,\n  gridArea: true,\n  gridRow: true,\n  gridRowEnd: true,\n  gridRowSpan: true,\n  gridRowStart: true,\n  gridColumn: true,\n  gridColumnEnd: true,\n  gridColumnSpan: true,\n  gridColumnStart: true,\n  fontWeight: true,\n  lineClamp: true,\n  lineHeight: true,\n  opacity: true,\n  order: true,\n  orphans: true,\n  tabSize: true,\n  widows: true,\n  zIndex: true,\n  zoom: true,\n  // SVG-related properties\n  fillOpacity: true,\n  floodOpacity: true,\n  stopOpacity: true,\n  strokeDasharray: true,\n  strokeDashoffset: true,\n  strokeMiterlimit: true,\n  strokeOpacity: true,\n  strokeWidth: true,\n};\n","export class ListTreeNode<T> {\n  value: T;\n  prev: ListTreeNode<T> | null = null;\n  next: ListTreeNode<T> | null = null;\n  children: ListTreeNode<T>[] = [];\n\n  constructor(value: T) {\n    this.value = value;\n  }\n}\n\nexport class LinkTreeList<T> {\n  rawArray: T[] = [];\n\n  scopeRoot = { index: -1, value: new ListTreeNode<any>(false) };\n\n  scopeArray: Array<{ index: number; value: ListTreeNode<T> }> = [];\n  // listArray: ListTreeNode<T>[][] = [];\n\n  scopeLength = 0;\n\n  length = 0;\n\n  head: ListTreeNode<T> | null = null;\n  foot: ListTreeNode<T> | null = null;\n\n  scopePush(scopeItem: { index: number; value: ListTreeNode<T> }) {\n    while (\n      this.scopeLength &&\n      this.scopeArray[this.scopeLength - 1].index >= scopeItem.index\n    ) {\n      this.scopeArray.pop();\n      this.scopeLength--;\n    }\n    if (this.scopeLength) {\n      this.scopeArray[this.scopeLength - 1].value.children.push(\n        scopeItem.value\n      );\n    } else {\n      this.scopeRoot.value.children.push(scopeItem.value);\n    }\n    this.scopeArray.push(scopeItem);\n    this.scopeLength++;\n  }\n\n  append(node: T, index: number) {\n    this.length++;\n    this.rawArray.push(node);\n    const listNode = new ListTreeNode(node);\n    this.push(listNode);\n    this.scopePush({ index, value: listNode });\n    // if (this.listArray[index]) {\n    //   const array = this.listArray[index];\n    //   array.push(listNode);\n    // } else {\n    //   this.listArray[index] = [listNode];\n    // }\n  }\n\n  unshift(node: ListTreeNode<T>) {\n    if (!this.head) {\n      this.head = node;\n      this.foot = node;\n    } else {\n      this.head.prev = node;\n      node.next = this.head;\n      this.head = node;\n    }\n  }\n\n  shift() {\n    if (this.head) {\n      const re = this.head;\n      if (this.head.next) {\n        this.head = this.head.next;\n        re.next = null;\n        this.head.prev = null;\n      } else {\n        this.head = null;\n        this.foot = null;\n      }\n      return re;\n    } else {\n      return null;\n    }\n  }\n\n  push(node: ListTreeNode<T>) {\n    if (!this.foot) {\n      this.head = node;\n      this.foot = node;\n    } else {\n      this.foot.next = node;\n      node.prev = this.foot;\n      this.foot = node;\n    }\n  }\n\n  pop() {\n    if (this.foot) {\n      const re = this.foot;\n      if (this.foot.prev) {\n        this.foot = this.foot.prev;\n        re.prev = null;\n        this.foot.next = null;\n      } else {\n        this.head = null;\n        this.foot = null;\n      }\n      return re;\n    } else {\n      return null;\n    }\n  }\n\n  pickHead() {\n    return this.head;\n  }\n\n  pickFoot() {\n    return this.foot;\n  }\n\n  listToFoot(action: (p: T) => void) {\n    let node = this.head;\n    while (node) {\n      action(node.value);\n      node = node.next;\n    }\n  }\n\n  listToHead(action: (p: T) => void) {\n    let node = this.foot;\n    while (node) {\n      action(node.value);\n      node = node.prev;\n    }\n  }\n\n  reconcile(action: (p: T) => void) {\n    const reconcileScope = (node: ListTreeNode<T>) => {\n      if (node.children) {\n        node.children.forEach(reconcileScope);\n      }\n      action(node.value);\n    };\n    if (this.scopeLength) {\n      this.scopeRoot.value.children.forEach(reconcileScope);\n    }\n    // for (let i = this.listArray.length - 1; i >= 0; i--) {\n    //   const array = this.listArray[i];\n    //   if (array) {\n    //     array.forEach((p) => action(p.value));\n    //   }\n    // }\n  }\n\n  has() {\n    return this.head !== null;\n  }\n}\n","import {\n  log,\n  once,\n  enableAllCheck,\n  My_React_Consumer,\n  My_React_Element,\n  My_React_ForwardRef,\n  My_React_Fragment,\n  My_React_Lazy,\n  My_React_Memo,\n  My_React_Portal,\n  My_React_Provider,\n  My_React_Strict,\n  My_React_Suspense,\n} from '../share';\n\nimport type { NODE_TYPE_KEY } from '../share';\nimport type {\n  Children,\n  ChildrenNode,\n  DynamicChildrenNode,\n  MaybeArrayChildrenNode,\n} from './instance';\n\nexport function isValidElement(\n  element?: MaybeArrayChildrenNode | null\n): element is Children {\n  return (\n    typeof element === 'object' &&\n    !Array.isArray(element) &&\n    element?.$$typeof === My_React_Element\n  );\n}\n\nexport function getTypeFromVDom(element: DynamicChildrenNode) {\n  const nodeType: { [key in typeof NODE_TYPE_KEY[number]]?: boolean } = {};\n  if (isValidElement(element)) {\n    const rawType = element.type;\n    if (typeof rawType === 'object') {\n      nodeType.__isObjectNode__ = true;\n      const typedRawType = rawType as { ['$$typeof']: symbol };\n      switch (typedRawType['$$typeof']) {\n        case My_React_Provider:\n          nodeType.__isContextProvider__ = true;\n          break;\n        case My_React_Consumer:\n          nodeType.__isContextConsumer__ = true;\n          break;\n        case My_React_Portal:\n          nodeType.__isPortal__ = true;\n          break;\n        case My_React_Memo:\n          nodeType.__isMemo__ = true;\n          break;\n        case My_React_ForwardRef:\n          nodeType.__isForwardRef__ = true;\n          break;\n        case My_React_Lazy:\n          nodeType.__isLazy__ = true;\n          break;\n        default:\n          throw new Error(\n            `invalid object element type ${typedRawType['$$typeof'].toString()}`\n          );\n      }\n    } else if (typeof rawType === 'function') {\n      nodeType.__isDynamicNode__ = true;\n      if (rawType.prototype?.isMyReactComponent) {\n        nodeType.__isClassComponent__ = true;\n      } else {\n        nodeType.__isFunctionComponent__ = true;\n      }\n    } else if (typeof rawType === 'symbol') {\n      switch (rawType) {\n        case My_React_Fragment:\n          nodeType.__isFragmentNode__ = true;\n          break;\n        case My_React_Strict:\n          nodeType.__isStrictNode__ = true;\n          break;\n        case My_React_Suspense:\n          nodeType.__isSuspense__ = true;\n          break;\n        default:\n          throw new Error(`invalid symbol element type ${rawType.toString()}`);\n      }\n    } else if (typeof rawType === 'string') {\n      nodeType.__isPlainNode__ = true;\n    } else {\n      throw new Error(`invalid element type ${rawType}`);\n    }\n  } else {\n    if (typeof element === 'object' && element !== null) {\n      nodeType.__isEmptyNode__ = true;\n    } else if (element === null || element === undefined || element === false) {\n      nodeType.__isNullNode__ = true;\n    } else {\n      nodeType.__isTextNode__ = true;\n    }\n  }\n  return nodeType;\n}\n\nexport const checkValidKey = (children: ChildrenNode[]) => {\n  const obj: Record<string, boolean> = {};\n  const onceWarnDuplicate = once(log);\n  const onceWarnUndefined = once(log);\n  children.forEach((c) => {\n    if (isValidElement(c) && !c._store['validKey']) {\n      if (typeof c.key === 'string') {\n        if (obj[c.key]) {\n          onceWarnDuplicate({ message: 'array child have duplicate key' });\n        }\n        obj[c.key] = true;\n      } else {\n        onceWarnUndefined({\n          message: 'each array child must have a unique key props',\n          triggerOnce: true,\n        });\n      }\n      c._store['validKey'] = true;\n    }\n  });\n};\n\nexport const checkArrayChildrenKey = (children: ChildrenNode[]) => {\n  if (enableAllCheck.current) {\n    children.forEach((child) => {\n      if (Array.isArray(child)) {\n        checkValidKey(child);\n      } else {\n        if (isValidElement(child)) child._store['validKey'] = true;\n      }\n    });\n  }\n};\n\nexport const checkSingleChildrenKey = (children: ChildrenNode) => {\n  if (enableAllCheck.current) {\n    if (Array.isArray(children)) {\n      checkValidKey(children);\n    } else {\n      if (isValidElement(children)) children._store['validKey'] = true;\n    }\n  }\n};\n","/* eslint-disable prefer-rest-params */\nimport { currentFunctionFiber, My_React_Element } from '../share';\n\nimport {\n  checkArrayChildrenKey,\n  checkSingleChildrenKey,\n  isValidElement,\n} from './tool';\n\nimport type { MyReactComponent } from '../component';\nimport type { MyReactFiberNode } from '../fiber';\nimport type { createRef, MyReactInternalInstance } from '../share';\nimport type { createContext, forwardRef, lazy, memo } from './feature';\n\nexport type FunctionComponent<T extends any[] = any[]> = (\n  ...args: T\n) => Children;\n\nexport type ClassComponent = typeof MyReactComponent;\n\nexport type ObjectComponent =\n  | ReturnType<typeof createContext>['Consumer']\n  | ReturnType<typeof createContext>['Provider']\n  | ReturnType<typeof forwardRef>\n  | ReturnType<typeof memo>\n  | ReturnType<typeof lazy>\n  | { ['$$typeof']: symbol; [p: string]: unknown };\n\nexport type MixinClassComponent = ClassComponent & {\n  displayName?: string;\n  defaultProps?: Record<string, unknown>;\n};\n\nexport type MixinFunctionComponent = FunctionComponent & {\n  displayName?: string;\n  defaultProps?: Record<string, unknown>;\n};\n\nexport type ElementType =\n  | symbol\n  | string\n  | ObjectComponent\n  | ClassComponent\n  | FunctionComponent;\n\nexport type Children = ReturnType<typeof createVDom>;\n\nexport type ChildrenNode =\n  | Children\n  | string\n  | number\n  | boolean\n  | null\n  | undefined;\n\nexport type MaybeArrayChildrenNode = ChildrenNode | ChildrenNode[];\n\nexport type DynamicChildrenNode = ChildrenNode;\n\nexport type ArrayChildrenNode = ChildrenNode[];\n\nexport type Props = {\n  children?: MaybeArrayChildrenNode;\n  [key: string]: unknown;\n};\n\nexport type CreateVDomProps = {\n  type: ElementType;\n  key: string | null;\n  ref:\n    | ReturnType<typeof createRef>\n    | ((node?: Element | MyReactInternalInstance) => void)\n    | null;\n  props: Props;\n  _self: MyReactInternalInstance | null;\n  _source: { fileName: string; lineNumber: string } | null;\n  _owner: MyReactFiberNode | null;\n};\n\nexport type CreateElementConfig = {\n  ref?: CreateVDomProps['ref'];\n  key?: CreateVDomProps['key'];\n  __self?: CreateVDomProps['_self'];\n  __source?: CreateVDomProps['_source'];\n  [key: string]: unknown;\n};\n\nexport class MyReactVDom {\n  ['$$typeof'] = My_React_Element;\n\n  _store: Record<string, unknown> = {};\n\n  constructor(\n    readonly type: CreateVDomProps['type'],\n    readonly key: CreateVDomProps['key'],\n    readonly ref: CreateVDomProps['ref'],\n    readonly props: CreateVDomProps['props'],\n    readonly _self: CreateVDomProps['_self'],\n    readonly _source: CreateVDomProps['_source'],\n    readonly _owner: CreateVDomProps['_owner']\n  ) {}\n}\n\nconst createVDom = ({\n  type,\n  key,\n  ref,\n  props,\n  _self,\n  _source,\n  _owner,\n}: CreateVDomProps) => {\n  return {\n    ['$$typeof']: My_React_Element,\n    type,\n    key,\n    ref,\n    props,\n\n    _owner,\n    _self,\n    _source,\n    _store: {} as Record<string, unknown>,\n  };\n};\n\nexport function createElement(\n  type: CreateVDomProps['type'],\n  config: CreateElementConfig,\n  children?: Props['children']\n) {\n  let key: CreateVDomProps['key'] = null;\n  let ref: CreateVDomProps['ref'] = null;\n  let self: CreateVDomProps['_self'] = null;\n  let source: CreateVDomProps['_source'] = null;\n\n  const props: CreateVDomProps['props'] = {};\n\n  if (config !== null && config !== undefined) {\n    const { ref: _ref, key: _key, __self, __source, ...resProps } = config;\n    ref = _ref === undefined ? null : _ref;\n    key = _key === undefined ? null : _key + '';\n    self = __self === undefined ? null : __self;\n    source = __source === undefined ? null : __source;\n    Object.keys(resProps).forEach((key) => (props[key] = resProps[key]));\n  }\n\n  if (typeof type === 'function' || typeof type === 'object') {\n    const typedType = type as MixinClassComponent | MixinFunctionComponent;\n    Object.keys(typedType?.defaultProps || {}).forEach((key) => {\n      props[key] =\n        props[key] === undefined ? typedType.defaultProps?.[key] : props[key];\n    });\n  }\n\n  const childrenLength = arguments.length - 2;\n\n  if (childrenLength > 1) {\n    children = Array.from(arguments).slice(2);\n    checkArrayChildrenKey(children);\n    props.children = children;\n  } else if (childrenLength === 1) {\n    checkSingleChildrenKey(children as ChildrenNode);\n    props.children = children;\n  }\n\n  return createVDom({\n    type,\n    key,\n    ref,\n    props,\n    _self: self,\n    _source: source,\n    _owner: currentFunctionFiber.current,\n  });\n}\n\nexport function cloneElement(\n  element: ChildrenNode,\n  config?: CreateElementConfig,\n  children?: Props['children']\n) {\n  if (isValidElement(element)) {\n    const props = Object.assign({}, element.props);\n    let key = element.key;\n    let ref = element.ref;\n    const type = element.type;\n    const self = element._self;\n    const source = element._source;\n    let owner = element._owner;\n    if (config !== null && config !== undefined) {\n      const { ref: _ref, key: _key, __self, __source, ...resProps } = config;\n      if (_ref !== undefined) {\n        ref = _ref;\n        owner = currentFunctionFiber.current;\n      }\n      if (_key !== undefined) {\n        key = _key + '';\n      }\n      let defaultProps: Record<string, unknown> | undefined = {};\n      if (\n        typeof element.type === 'function' ||\n        typeof element.type === 'object'\n      ) {\n        const typedType = element.type as\n          | MixinClassComponent\n          | MixinFunctionComponent;\n        defaultProps = typedType?.defaultProps;\n      }\n      for (const key in resProps) {\n        if (Object.prototype.hasOwnProperty.call(resProps, key)) {\n          if (resProps[key] === undefined && defaultProps) {\n            props[key] = defaultProps[key];\n          } else {\n            props[key] = resProps[key];\n          }\n        }\n      }\n    }\n\n    const childrenLength = arguments.length - 2;\n\n    if (childrenLength > 1) {\n      children = Array.from(arguments).slice(2);\n      checkArrayChildrenKey(children);\n      props.children = children;\n    } else if (childrenLength === 1) {\n      checkSingleChildrenKey(children as ChildrenNode);\n      props.children = children;\n    }\n\n    const clonedElement = createVDom({\n      type,\n      key,\n      ref,\n      props,\n      _self: self,\n      _source: source,\n      _owner: owner,\n    });\n\n    clonedElement._store['clonedEle'] = true;\n\n    return clonedElement;\n  } else {\n    throw new Error('cloneElement() need valid element as args');\n  }\n}\n","import {\n  MyReactInternalInstance,\n  My_React_Consumer,\n  My_React_Context,\n  My_React_ForwardRef,\n  My_React_Lazy,\n  My_React_Memo,\n  My_React_Provider,\n} from '../share';\n\nimport type { ClassComponent, FunctionComponent } from '.';\n\nlet contextId = 0;\n\nexport const createContext = <T = any>(value: T) => {\n  const ContextObject = {\n    ['$$typeof']: My_React_Context,\n    id: contextId++,\n    Provider: {} as typeof Provider,\n    Consumer: {} as typeof Consumer,\n  };\n\n  const Provider = {\n    ['$$typeof']: My_React_Provider,\n    value,\n    Context: { id: 0 },\n  };\n\n  const Consumer = {\n    ['$$typeof']: My_React_Consumer,\n    Internal: MyReactInternalInstance,\n    Context: { id: 0 },\n  };\n\n  Object.defineProperty(Provider, 'Context', {\n    get() {\n      return ContextObject;\n    },\n    enumerable: false,\n    configurable: false,\n  });\n\n  Object.defineProperty(Consumer, 'Context', {\n    get() {\n      return ContextObject;\n    },\n    enumerable: false,\n    configurable: false,\n  });\n\n  ContextObject.Provider = Provider;\n  ContextObject.Consumer = Consumer;\n\n  return ContextObject;\n};\n\nexport const forwardRef = (\n  render: FunctionComponent | { ['$$typeof']: symbol; [p: string]: unknown }\n) => {\n  return {\n    ['$$typeof']: My_React_ForwardRef,\n    render,\n  };\n};\n\nexport const memo = (\n  render:\n    | FunctionComponent\n    | ClassComponent\n    | {\n        ['$$typeof']: symbol;\n        render: FunctionComponent | ClassComponent;\n        [p: string]: unknown;\n      }\n) => {\n  return { ['$$typeof']: My_React_Memo, render };\n};\n\nexport const lazy = (\n  loader: () => Promise<{ default: FunctionComponent | ClassComponent }>\n) => {\n  return {\n    ['$$typeof']: My_React_Lazy,\n    loader,\n    _loading: false,\n    _loaded: false,\n    render: null,\n  } as {\n    ['$$typeof']: typeof My_React_Lazy;\n    loader: () => Promise<\n      | { default: FunctionComponent | ClassComponent }\n      | FunctionComponent\n      | ClassComponent\n    >;\n    _loading: boolean;\n    _loaded: boolean;\n    render:\n      | null\n      | FunctionComponent\n      | ClassComponent\n      | { ['$$typeof']: symbol; [p: string]: unknown };\n  };\n};\n","import { flattenChildren } from '../share';\n\nimport type {\n  Children,\n  ChildrenNode,\n  ArrayChildrenNode,\n  MaybeArrayChildrenNode,\n} from '../element';\n\nexport const mapByJudge = <T extends MaybeArrayChildrenNode>(\n  arrayLike: T,\n  judge: (t: ChildrenNode) => boolean,\n  action: (v: Children, index: number, array: ArrayChildrenNode) => Children\n) => {\n  const arrayChildren = flattenChildren(arrayLike);\n\n  return arrayChildren.map((v, index) => {\n    if (judge(v)) {\n      return action.call(null, v as Children, index, arrayChildren);\n    } else {\n      return v;\n    }\n  });\n};\n","import { cloneElement, isValidElement } from '../element';\n\nimport { mapByJudge } from './tool';\n\nimport type { MaybeArrayChildrenNode, Children } from '../element';\n\nexport const map = (\n  arrayLike: MaybeArrayChildrenNode,\n  action: (child: Children, index: number) => Children\n) => mapByJudge(arrayLike, (v) => v !== undefined && v !== null, action);\n\nexport const toArray = (arrayLike: MaybeArrayChildrenNode) =>\n  map(arrayLike, (element, index) =>\n    cloneElement(element, {\n      key: element?.key !== undefined ? `.$${element.key}` : `.${index}`,\n    })\n  );\n\nexport const forEach = (\n  arrayLike: MaybeArrayChildrenNode,\n  action: (\n    child: Children,\n    index: number,\n    children: MaybeArrayChildrenNode\n  ) => Children\n) => {\n  mapByJudge(arrayLike, (v) => v !== undefined && v !== null, action);\n};\n\nexport const count = (arrayLike: MaybeArrayChildrenNode): number => {\n  if (Array.isArray(arrayLike)) {\n    return arrayLike.reduce<number>((p, c) => p + count(c), 0);\n  }\n  return 1;\n};\n\nexport const only = (child: MaybeArrayChildrenNode) => {\n  if (isValidElement(child)) return child;\n  if (\n    typeof child === 'string' ||\n    typeof child === 'number' ||\n    typeof child === 'boolean'\n  )\n    return true;\n\n  throw new Error(\n    'Children.only() expected to receive a single MyReact element child.'\n  );\n};\n","import { isNormalEquals, MyReactInternalInstance } from '../share';\n\nimport type { DynamicChildrenNode, createContext } from '../element';\nimport type { ComponentUpdateQueue } from '../fiber';\n\ninterface MyReactComponentType<P, S, C> {\n  render(this: MyReactComponent): DynamicChildrenNode;\n  componentDidMount?(this: MyReactComponent): void;\n  shouldComponentUpdate?(\n    this: MyReactComponent,\n    nextProps: P,\n    nextState: S,\n    nextContext: C\n  ): boolean;\n  componentDidUpdate?(\n    this: MyReactComponent,\n    prevProps: P,\n    prevState: S,\n    prevContext: C\n  ): void;\n  componentWillUnmount?(): void;\n}\n\nexport type MyReactComponentStaticType<\n  P extends Record<string, unknown> = any,\n  S extends Record<string, unknown> = any\n> = {\n  contextType: null | ReturnType<typeof createContext>;\n  getDerivedStateFromProps(props: P, state: S): S;\n};\n\nexport type MixinMyReactComponentType<\n  P extends Record<string, unknown> = any,\n  S extends Record<string, unknown> = any,\n  C extends Record<string, unknown> = any\n> = MyReactComponent<P, S, C> & MyReactComponentType<P, S, C>;\n\nexport class MyReactComponent<\n  P extends Record<string, unknown> = any,\n  S extends Record<string, unknown> = any,\n  C extends Record<string, unknown> = any\n> extends MyReactInternalInstance {\n  state: S | null = null;\n  props: P | null = null;\n  context: C | null = null;\n\n  constructor(props?: P, context?: C | null) {\n    super();\n    this.props = props || null;\n    this.context = context || null;\n  }\n\n  get isReactComponent() {\n    return true;\n  }\n\n  get isMyReactComponent() {\n    return true;\n  }\n\n  setState = (\n    payLoad: ComponentUpdateQueue['payLoad'],\n    callback: ComponentUpdateQueue['callback']\n  ) => {\n    const updater: ComponentUpdateQueue = {\n      type: 'state',\n      payLoad,\n      callback,\n      trigger: this,\n    };\n\n    this.__fiber__?.__compUpdateQueue__.push(updater);\n\n    Promise.resolve().then(() => {\n      this.__fiber__?.update();\n    });\n  };\n\n  forceUpdate = () => {\n    const updater: ComponentUpdateQueue = {\n      type: 'state',\n      isForce: true,\n      trigger: this,\n    };\n\n    this.__fiber__?.__compUpdateQueue__.push(updater);\n\n    Promise.resolve().then(() => {\n      this.__fiber__?.update();\n    });\n  };\n\n  unmount() {\n    super.unmount();\n    const instance = this as unknown as MixinMyReactComponentType;\n    instance.componentWillUnmount?.();\n  }\n}\n\nexport class MyReactPureComponent<\n  P extends Record<string, unknown> = any,\n  S extends Record<string, unknown> = any,\n  C extends Record<string, unknown> = any\n> extends MyReactComponent<P, S, C> {\n  shouldComponentUpdate(nextProps: P, nextState: S, nextContext: C) {\n    return (\n      !isNormalEquals(nextProps, this.props) ||\n      !isNormalEquals(nextState, this.state) ||\n      !isNormalEquals(nextContext, this.context)\n    );\n  }\n}\n","import { isValidElement } from '../element';\nimport { MyReactFiberNode, createFiberNode, updateFiberNode } from '../fiber';\nimport {\n  enableKeyDiff,\n  globalDispatch,\n  isAppMounted,\n  isServerRender,\n  isHydrateRender,\n} from '../share';\n\nimport type {\n  Children,\n  ChildrenNode,\n  ArrayChildrenNode,\n  MaybeArrayChildrenNode,\n} from '../element';\n\nconst getKeyMatchedChildren = (\n  newChildren: ArrayChildrenNode,\n  prevFiberChildren: Array<MyReactFiberNode | MyReactFiberNode[]>\n) => {\n  if (!isAppMounted.current) return prevFiberChildren;\n  if (isServerRender.current) return prevFiberChildren;\n  if (isHydrateRender.current) return prevFiberChildren;\n  if (!enableKeyDiff.current) return prevFiberChildren;\n  if (!prevFiberChildren) return prevFiberChildren;\n  if (prevFiberChildren.length === 0) return prevFiberChildren;\n\n  const tempChildren = prevFiberChildren.slice(0);\n  const assignPrevChildren: Array<MyReactFiberNode | MyReactFiberNode[]> =\n    Array(tempChildren.length).fill(null);\n\n  newChildren.forEach((element, index) => {\n    if (tempChildren.length) {\n      if (isValidElement(element)) {\n        if (typeof element.key === 'string') {\n          const targetIndex = tempChildren.findIndex(\n            (fiber) =>\n              fiber instanceof MyReactFiberNode &&\n              typeof fiber.element === 'object' &&\n              fiber.element?.key === element.key\n          );\n          if (targetIndex !== -1) {\n            assignPrevChildren[index] = tempChildren[targetIndex];\n            tempChildren.splice(targetIndex, 1);\n          }\n        } else {\n          // TODO\n        }\n      }\n    }\n  });\n\n  return assignPrevChildren.map((v) => {\n    if (v) return v;\n    return tempChildren.shift();\n  });\n};\n\nconst getIsSameTypeNode = (\n  newChild: MaybeArrayChildrenNode,\n  prevFiberChild?: MyReactFiberNode | MyReactFiberNode[]\n) => {\n  if (!isAppMounted.current) return false;\n  const newChildIsArray = Array.isArray(newChild);\n  const prevElementChildIsArray = Array.isArray(prevFiberChild);\n  if (newChildIsArray && prevElementChildIsArray) return true;\n  if (newChildIsArray) return false;\n  if (prevElementChildIsArray) return false;\n\n  const typedPrevFiberChild = prevFiberChild as MyReactFiberNode;\n  const typedNewChild = newChild as ChildrenNode;\n\n  const prevRenderedChild = typedPrevFiberChild?.element;\n  const result = typedPrevFiberChild?.checkIsSameType(typedNewChild);\n  if (\n    result &&\n    enableKeyDiff.current &&\n    !typedPrevFiberChild.__isTextNode__ &&\n    !typedPrevFiberChild.__isNullNode__\n  ) {\n    return (\n      (typedNewChild as Children).key === (prevRenderedChild as Children).key\n    );\n  } else {\n    return result;\n  }\n};\n\nconst getNewFiberWithUpdate = (\n  newChild: MaybeArrayChildrenNode,\n  parentFiber: MyReactFiberNode,\n  prevFiberChild?: MyReactFiberNode | MyReactFiberNode[],\n  assignPrevFiberChild?: MyReactFiberNode | MyReactFiberNode[]\n): MyReactFiberNode | MyReactFiberNode[] => {\n  const isSameType = getIsSameTypeNode(newChild, assignPrevFiberChild);\n  if (isSameType) {\n    if (\n      Array.isArray(newChild) &&\n      Array.isArray(prevFiberChild) &&\n      Array.isArray(assignPrevFiberChild)\n    ) {\n      const assignPrevFiberChildren = getKeyMatchedChildren(\n        newChild,\n        assignPrevFiberChild\n      ) as MyReactFiberNode[];\n      if (newChild.length < assignPrevFiberChildren.length) {\n        globalDispatch.current.pendingUnmount(\n          parentFiber,\n          assignPrevFiberChildren.slice(newChild.length)\n        );\n      }\n      return newChild.map((v, index) =>\n        getNewFiberWithUpdate(\n          v,\n          parentFiber,\n          prevFiberChild[index],\n          assignPrevFiberChildren[index]\n        )\n      ) as MyReactFiberNode[];\n    }\n\n    return updateFiberNode(\n      {\n        fiber: assignPrevFiberChild as MyReactFiberNode,\n        parent: parentFiber,\n        prevFiber: prevFiberChild as MyReactFiberNode,\n      },\n      newChild as ChildrenNode\n    );\n  } else {\n    if (assignPrevFiberChild) {\n      globalDispatch.current.pendingUnmount(parentFiber, assignPrevFiberChild);\n    }\n\n    if (Array.isArray(newChild)) {\n      return newChild.map((v) =>\n        getNewFiberWithUpdate(v, parentFiber)\n      ) as MyReactFiberNode[];\n    }\n\n    return createFiberNode(\n      {\n        fiberIndex: parentFiber.fiberIndex + 1,\n        parent: parentFiber,\n        type: 'position',\n      },\n      newChild\n    );\n  }\n};\n\nconst getNewFiberWithInitial = (\n  newChild: MaybeArrayChildrenNode,\n  parentFiber: MyReactFiberNode\n): MyReactFiberNode | MyReactFiberNode[] => {\n  if (Array.isArray(newChild)) {\n    return newChild.map((v) =>\n      getNewFiberWithInitial(v, parentFiber)\n    ) as MyReactFiberNode[];\n  }\n\n  return createFiberNode(\n    { fiberIndex: parentFiber.fiberIndex + 1, parent: parentFiber },\n    newChild\n  );\n};\n\nexport const transformChildrenFiber = (\n  parentFiber: MyReactFiberNode,\n  children: MaybeArrayChildrenNode | null | undefined\n) => {\n  let index = 0;\n\n  const isUpdate = parentFiber.__isUpdateRender__;\n\n  const newChildren = Array.isArray(children) ? children : [children];\n\n  const prevFiberChildren = isUpdate ? parentFiber.__renderedChildren__ : [];\n\n  const assignPrevFiberChildren = getKeyMatchedChildren(\n    newChildren,\n    prevFiberChildren\n  );\n\n  parentFiber.__renderedChildren__ = [];\n\n  parentFiber.beforeUpdate();\n\n  while (index < newChildren.length || index < assignPrevFiberChildren.length) {\n    const newChild = newChildren[index];\n    const prevFiberChild = prevFiberChildren[index];\n    const assignPrevFiberChild = assignPrevFiberChildren[index];\n\n    const newFiber = isUpdate\n      ? getNewFiberWithUpdate(\n          newChild,\n          parentFiber,\n          prevFiberChild,\n          assignPrevFiberChild\n        )\n      : getNewFiberWithInitial(newChild, parentFiber);\n\n    parentFiber.__renderedChildren__.push(newFiber);\n\n    index++;\n  }\n\n  parentFiber.afterUpdate();\n\n  return parentFiber.children;\n};\n","import { classComponentMount, classComponentUpdate } from '../component';\nimport { createElement } from '../element';\nimport {\n  getContextFiber,\n  getContextValue,\n  processHookUpdateQueue,\n} from '../fiber';\nimport {\n  isServerRender,\n  currentRunningFiber,\n  currentHookDeepIndex,\n  currentFunctionFiber,\n  pendingModifyTopLevelFiber,\n} from '../share';\n\nimport { transformChildrenFiber } from './generate';\n\nimport type {\n  lazy,\n  memo,\n  Children,\n  forwardRef,\n  createContext,\n  ClassComponent,\n  FunctionComponent,\n} from '../element';\nimport type { MyReactFiberNode } from '../fiber';\n\nexport const nextWorkCommon = (fiber: MyReactFiberNode) => {\n  if (fiber.__isRenderDynamic__) {\n    return transformChildrenFiber(fiber, fiber.__dynamicChildren__);\n  } else {\n    return transformChildrenFiber(fiber, fiber.__children__);\n  }\n};\n\nconst nextWorkClassComponent = (fiber: MyReactFiberNode) => {\n  if (!fiber.instance) {\n    return classComponentMount(fiber);\n  } else {\n    return classComponentUpdate(fiber);\n  }\n};\n\nconst nextWorkFunctionComponent = (fiber: MyReactFiberNode) => {\n  processHookUpdateQueue(fiber);\n\n  currentHookDeepIndex.current = 0;\n\n  currentFunctionFiber.current = fiber;\n\n  const typedElement = fiber.element as Children;\n\n  const children = (typedElement.type as FunctionComponent)(fiber.__props__);\n\n  currentFunctionFiber.current = null;\n\n  currentHookDeepIndex.current = 0;\n\n  fiber.__dynamicChildren__ = children;\n\n  return nextWorkCommon(fiber);\n};\n\nconst nextWorkComponent = (fiber: MyReactFiberNode) => {\n  if (fiber.__isFunctionComponent__) {\n    return nextWorkFunctionComponent(fiber);\n  } else {\n    return nextWorkClassComponent(fiber);\n  }\n};\n\nconst nextWorkMemo = (fiber: MyReactFiberNode) => {\n  const { type, ref } = fiber.element as Children;\n\n  const typedType = type as ReturnType<typeof memo>;\n\n  const render = typedType.render;\n\n  let isForwardRefRender = false;\n\n  const targetRender =\n    typeof render === 'object'\n      ? ((isForwardRefRender = true), render.render)\n      : render;\n\n  const isClassComponent = targetRender?.prototype?.isMyReactComponent;\n\n  if (isClassComponent) {\n    return nextWorkClassComponent(fiber);\n  } else {\n    processHookUpdateQueue(fiber);\n\n    currentHookDeepIndex.current = 0;\n\n    currentFunctionFiber.current = fiber;\n\n    const typedRender = targetRender as FunctionComponent;\n\n    const children = isForwardRefRender\n      ? typedRender(fiber.__props__, ref)\n      : typedRender(fiber.__props__);\n\n    currentFunctionFiber.current = null;\n\n    currentHookDeepIndex.current = 0;\n\n    fiber.__dynamicChildren__ = children;\n\n    return nextWorkCommon(fiber);\n  }\n};\n\nconst nextWorkLazy = (fiber: MyReactFiberNode) => {\n  const { type } = fiber.element as Children;\n\n  const typedType = type as ReturnType<typeof lazy>;\n\n  if (typedType._loaded === true) {\n    const render = typedType.render as ClassComponent | FunctionComponent;\n\n    fiber.__dynamicChildren__ = createElement(render, fiber.__props__);\n\n    return nextWorkCommon(fiber);\n  } else if (typedType._loading === false) {\n    if (!isServerRender.current) {\n      typedType._loading = true;\n      Promise.resolve()\n        .then(() => typedType.loader())\n        .then((re) => {\n          const render =\n            typeof re === 'object' && typeof re?.default === 'function'\n              ? re.default\n              : re;\n          typedType._loaded = true;\n          typedType._loading = false;\n          typedType.render = render as ClassComponent | FunctionComponent;\n          fiber.update();\n        });\n    }\n  }\n\n  fiber.__dynamicChildren__ = fiber.__fallback__;\n\n  return nextWorkCommon(fiber);\n};\n\nconst nextWorkForwardRef = (fiber: MyReactFiberNode) => {\n  processHookUpdateQueue(fiber);\n\n  const { type, ref } = fiber.element as Children;\n\n  const typedType = type as ReturnType<typeof forwardRef>;\n\n  const typedRender = typedType.render as FunctionComponent;\n\n  currentHookDeepIndex.current = 0;\n\n  currentFunctionFiber.current = fiber;\n\n  const children = typedRender(fiber.__props__, ref);\n\n  currentFunctionFiber.current = null;\n\n  currentHookDeepIndex.current = 0;\n\n  fiber.__dynamicChildren__ = children;\n\n  return nextWorkCommon(fiber);\n};\n\nconst nextWorkProvider = (fiber: MyReactFiberNode) => nextWorkCommon(fiber);\n\nconst nextWorkConsumer = (fiber: MyReactFiberNode) => {\n  const { type, props } = fiber.element as Children;\n\n  const typedType = type as ReturnType<typeof createContext>['Consumer'];\n\n  fiber.instance = fiber.instance || new typedType.Internal();\n\n  fiber.instance.setFiber(fiber);\n\n  const Context = typedType.Context as ReturnType<typeof createContext>;\n\n  if (!fiber.instance.__context__ || !fiber.instance.__context__.mount) {\n    const ProviderFiber = getContextFiber(fiber, Context);\n\n    const context = getContextValue(ProviderFiber, Context);\n\n    fiber.instance.context = context;\n\n    fiber.instance.setContext(ProviderFiber);\n  } else {\n    const context = getContextValue(fiber.instance.__context__, Context);\n\n    fiber.instance.context = context;\n  }\n\n  const typedChildren = props.children as unknown as FunctionComponent;\n\n  const children = typedChildren(fiber.instance.context);\n\n  fiber.__dynamicChildren__ = children;\n\n  return nextWorkCommon(fiber);\n};\n\nconst nextWorkObject = (fiber: MyReactFiberNode) => {\n  if (fiber.__isMemo__) return nextWorkMemo(fiber);\n  if (fiber.__isLazy__) return nextWorkLazy(fiber);\n  if (fiber.__isPortal__) return nextWorkCommon(fiber);\n  if (fiber.__isSuspense__) return nextWorkCommon(fiber);\n  if (fiber.__isForwardRef__) return nextWorkForwardRef(fiber);\n  if (fiber.__isContextProvider__) return nextWorkProvider(fiber);\n  if (fiber.__isContextConsumer__) return nextWorkConsumer(fiber);\n  throw new Error(`unknown element ${fiber.element}`);\n};\n\nexport const nextWorkSync = (fiber: MyReactFiberNode) => {\n  if (!fiber.mount) return [];\n\n  if (!fiber.__needUpdate__ && !fiber.__needTrigger__) return [];\n\n  currentRunningFiber.current = fiber;\n\n  let children: MyReactFiberNode[] = [];\n\n  if (fiber.__isDynamicNode__) children = nextWorkComponent(fiber);\n  else if (fiber.__isObjectNode__) children = nextWorkObject(fiber);\n  else children = nextWorkCommon(fiber);\n\n  currentRunningFiber.current = null;\n\n  return children;\n};\n\nexport const nextWorkAsync = (fiber: MyReactFiberNode) => {\n  if (!fiber.mount) return null;\n\n  if (fiber.__needUpdate__ || fiber.__needTrigger__) {\n    currentRunningFiber.current = fiber;\n\n    if (fiber.__isDynamicNode__) nextWorkComponent(fiber);\n    else if (fiber.__isObjectNode__) nextWorkObject(fiber);\n    else nextWorkCommon(fiber);\n\n    currentRunningFiber.current = null;\n\n    if (fiber.children.length) {\n      return fiber.child;\n    }\n  }\n\n  let nextFiber: MyReactFiberNode | null = fiber;\n\n  while (nextFiber && nextFiber !== pendingModifyTopLevelFiber.current) {\n    if (nextFiber.sibling) {\n      return nextFiber.sibling;\n    }\n    nextFiber = nextFiber.parent;\n  }\n\n  return null;\n};\n","import { cRoundTransformFiberArray, nRoundTransformFiberArray } from '../share';\n\nimport { nextWorkSync } from './invoke';\n\nimport type { MyReactFiberNode } from '../fiber';\n\nconst loopStart = (fiber: MyReactFiberNode) => {\n  cRoundTransformFiberArray.current.push(...nextWorkSync(fiber));\n};\n\nconst loopCurrent = () => {\n  while (cRoundTransformFiberArray.current.length) {\n    const fiber = cRoundTransformFiberArray.current.shift();\n    if (fiber) {\n      nRoundTransformFiberArray.current.push(...nextWorkSync(fiber));\n    }\n  }\n};\n\nconst loopNext = () => {\n  while (nRoundTransformFiberArray.current.length) {\n    const fiber = nRoundTransformFiberArray.current.shift();\n    if (fiber) {\n      cRoundTransformFiberArray.current.push(...nextWorkSync(fiber));\n    }\n  }\n};\n\nconst loopToEnd = () => {\n  loopCurrent();\n  loopNext();\n  if (cRoundTransformFiberArray.current.length) {\n    loopToEnd();\n  }\n};\n\nconst loopAll = (fiber: MyReactFiberNode) => {\n  loopStart(fiber);\n  loopToEnd();\n};\n\nexport const mountLoopSync = (fiber: MyReactFiberNode) => loopAll(fiber);\n","import { safeCall } from '../share';\n\nimport { nextWorkAsync } from './invoke';\n\nimport type { MyReactFiberNode } from '../fiber';\n\nexport const updateLoopSync = (\n  loopController: {\n    hasNext: () => boolean;\n    getNext: () => MyReactFiberNode | null;\n    getUpdateList: (f: MyReactFiberNode) => void;\n    setYield: (f: MyReactFiberNode | null) => void;\n  },\n  reconcileUpdate: () => void\n) => {\n  if (loopController.hasNext()) {\n    let fiber = loopController.getNext();\n    while (fiber) {\n      const _fiber = fiber as MyReactFiberNode;\n      fiber = safeCall(() => nextWorkAsync(_fiber));\n      loopController.getUpdateList(_fiber);\n      loopController.setYield(fiber);\n    }\n  }\n  reconcileUpdate();\n};\n","import { safeCall } from '../share';\n\nimport { nextWorkAsync } from './invoke';\n\nimport type { MyReactFiberNode } from '../fiber';\n\nexport const updateLoopAsync = (\n  loopController: {\n    setYield: (f: MyReactFiberNode | null) => void;\n    getNext: () => MyReactFiberNode | null;\n    getUpdateList: (f: MyReactFiberNode) => void;\n    hasNext: () => boolean;\n    doesPause: () => boolean;\n  },\n  shouldPause: () => boolean,\n  reconcileUpdate: () => void\n) => {\n  while (loopController.hasNext() && !shouldPause()) {\n    const fiber = loopController.getNext();\n    if (fiber) {\n      const nextFiber = safeCall(() => nextWorkAsync(fiber));\n      loopController.getUpdateList(fiber);\n      loopController.setYield(nextFiber);\n    }\n  }\n  if (!loopController.doesPause()) {\n    reconcileUpdate();\n  }\n};\n","import { nextWorkCommon } from '../core';\nimport {\n  getContextFiber,\n  getContextValue,\n  processComponentUpdateQueue,\n} from '../fiber';\nimport { globalDispatch } from '../share';\n\nimport type { Children, ClassComponent, memo } from '../element';\nimport type { MyReactFiberNode } from '../fiber';\nimport type {\n  MixinMyReactComponentType,\n  MyReactComponentStaticType,\n} from './instance';\n\nconst processComponentStateFromProps = (fiber: MyReactFiberNode) => {\n  const typedElement = fiber.element as Children;\n\n  const Component = fiber.__isDynamicNode__\n    ? typedElement.type\n    : (typedElement.type as ReturnType<typeof memo>).render;\n\n  const typedComponent = Component as ClassComponent &\n    MyReactComponentStaticType;\n\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n\n  const props = Object.assign({}, typedElement.props);\n  const state = Object.assign({}, typedInstance.state);\n\n  if (typeof typedComponent.getDerivedStateFromProps === 'function') {\n    const payloadState = typedComponent.getDerivedStateFromProps(props, state);\n    if (payloadState) {\n      typedInstance.state = Object.assign(\n        {},\n        typedInstance.state,\n        payloadState\n      );\n    }\n  }\n};\n\nconst processComponentInstanceOnMount = (fiber: MyReactFiberNode) => {\n  const typedElement = fiber.element as Children;\n\n  const Component = fiber.__isDynamicNode__\n    ? typedElement.type\n    : (typedElement.type as ReturnType<typeof memo>).render;\n\n  const typedComponent = Component as ClassComponent &\n    MyReactComponentStaticType;\n\n  const ProviderFiber = getContextFiber(fiber, typedComponent.contextType);\n\n  const context = getContextValue(ProviderFiber, typedComponent.contextType);\n\n  const props = Object.assign({}, typedElement.props);\n\n  const instance = new typedComponent(props, context);\n\n  instance.props = props;\n\n  instance.context = context;\n\n  fiber.installInstance(instance);\n\n  instance.setFiber(fiber);\n\n  instance.setContext(ProviderFiber);\n};\n\nconst processComponentFiberOnUpdate = (fiber: MyReactFiberNode) => {\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n  typedInstance.setFiber(fiber);\n};\n\nconst processComponentRenderOnMountAndUpdate = (fiber: MyReactFiberNode) => {\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n\n  const children = typedInstance.render();\n\n  fiber.__dynamicChildren__ = children;\n\n  return nextWorkCommon(fiber);\n};\n\nconst processComponentDidMountOnMount = (fiber: MyReactFiberNode) => {\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n\n  if (typedInstance.componentDidMount && !typedInstance.__pendingEffect__) {\n    typedInstance.__pendingEffect__ = true;\n    globalDispatch.current.pendingLayoutEffect(fiber, () => {\n      typedInstance.__pendingEffect__ = false;\n      typedInstance.componentDidMount?.();\n    });\n  }\n};\n\nconst processComponentContextOnUpdate = (fiber: MyReactFiberNode) => {\n  const typedElement = fiber.element as Children;\n\n  const Component = fiber.__isDynamicNode__\n    ? typedElement.type\n    : (typedElement.type as ReturnType<typeof memo>).render;\n\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n\n  const typedComponent = Component as ClassComponent &\n    MyReactComponentStaticType;\n\n  if (!typedInstance?.__context__ || !typedInstance.__context__.mount) {\n    const ProviderFiber = getContextFiber(fiber, typedComponent.contextType);\n\n    const context = getContextValue(ProviderFiber, typedComponent.contextType);\n\n    typedInstance?.setContext(ProviderFiber);\n\n    return context;\n  } else {\n    const context = getContextValue(\n      typedInstance.__context__,\n      typedComponent.contextType\n    );\n\n    return context;\n  }\n};\n\nconst processComponentShouldUpdateOnUpdate = (\n  fiber: MyReactFiberNode,\n  {\n    nextState,\n    nextProps,\n    nextContext,\n  }: { nextState: unknown; nextProps: unknown; nextContext: unknown }\n) => {\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n\n  if (fiber.__needTrigger__) return true;\n\n  if (typedInstance.shouldComponentUpdate) {\n    return typedInstance.shouldComponentUpdate(\n      nextProps,\n      nextState,\n      nextContext\n    );\n  }\n\n  return true;\n};\n\nconst processComponentDidUpdateOnUpdate = (\n  fiber: MyReactFiberNode,\n  {\n    baseState,\n    baseProps,\n    baseContext,\n    callback,\n  }: {\n    baseState: unknown;\n    baseProps: unknown;\n    baseContext: unknown;\n    callback: Array<() => void>;\n  }\n) => {\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n  const hasEffect = typedInstance.componentDidUpdate || callback.length;\n\n  // TODO it is necessary to use __pendingEffect__ field ?\n  if (hasEffect && !typedInstance.__pendingEffect__) {\n    typedInstance.__pendingEffect__ = true;\n    globalDispatch.current.pendingLayoutEffect(fiber, () => {\n      typedInstance.__pendingEffect__ = false;\n      callback.forEach((c) => c.call(null));\n      typedInstance.componentDidUpdate?.(baseProps, baseState, baseContext);\n    });\n  }\n};\n\nexport const classComponentMount = (fiber: MyReactFiberNode) => {\n  processComponentInstanceOnMount(fiber);\n  processComponentStateFromProps(fiber);\n  const children = processComponentRenderOnMountAndUpdate(fiber);\n  processComponentDidMountOnMount(fiber);\n  return children;\n};\n\nexport const classComponentUpdate = (fiber: MyReactFiberNode) => {\n  processComponentFiberOnUpdate(fiber);\n  processComponentStateFromProps(fiber);\n  const { newState, isForce, callback } = processComponentUpdateQueue(fiber);\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n  const baseState = typedInstance.state;\n  const baseProps = typedInstance.props;\n  const baseContext = typedInstance.context;\n  const nextState = Object.assign({}, baseState, newState);\n  const nextProps = Object.assign({}, fiber.__props__);\n  const nextContext = processComponentContextOnUpdate(fiber);\n  let shouldUpdate = isForce;\n  if (!shouldUpdate) {\n    shouldUpdate = processComponentShouldUpdateOnUpdate(fiber, {\n      nextState,\n      nextProps,\n      nextContext,\n    });\n  }\n  typedInstance.state = nextState;\n  typedInstance.props = nextProps;\n  typedInstance.context = nextContext;\n  if (shouldUpdate) {\n    const children = processComponentRenderOnMountAndUpdate(fiber);\n    processComponentDidUpdateOnUpdate(fiber, {\n      baseContext,\n      baseProps,\n      baseState,\n      callback,\n    });\n    return children;\n  } else {\n    return [];\n  }\n};\n","import { globalDispatch } from '../../share';\n\nimport type { MyReactFiberNode } from '../../fiber';\n\nexport const reconcileMount = (fiber: MyReactFiberNode, hydrate: boolean) => {\n  globalDispatch.current.reconcileCommit(fiber, hydrate, fiber);\n};\n","import { mountLoopSync } from '../../core';\nimport { globalLoop, isAppMounted, safeCall } from '../../share';\n\nimport { reconcileMount } from './reconcileMount';\n\nimport type { MyReactFiberNode } from '../../fiber';\n\nexport const startRender = (fiber: MyReactFiberNode, hydrate = false) => {\n  globalLoop.current = true;\n\n  safeCall(() => mountLoopSync(fiber));\n\n  reconcileMount(fiber, hydrate);\n\n  isAppMounted.current = true;\n\n  globalLoop.current = false;\n};\n","import { createElement } from '../../element';\nimport { My_React_Portal } from '../../share';\n\nimport type { Children } from '../../element';\n\nexport const createPortal = (element: Children, container: HTMLElement) => {\n  return createElement(\n    { ['$$typeof']: My_React_Portal },\n    { container },\n    element\n  );\n};\n","export const isInternal = (key: string) => key.startsWith('_');\n\nexport const isChildren = (key: string) =>\n  key === 'children' || key === 'dangerouslySetInnerHTML';\n\nexport const isEvent = (key: string) => key.startsWith('on');\n\nexport const isStyle = (key: string) => key === 'style';\n\nexport const isProperty = (key: string) =>\n  !isChildren(key) && !isEvent(key) && !isStyle(key) && !isInternal(key);\n\nexport const isNew =\n  (oldProps: Record<string, unknown>, newProps: Record<string, unknown>) =>\n  (key: string) =>\n    oldProps[key] !== newProps[key];\n\nexport const isGone = (newProps: Record<string, unknown>) => (key: string) =>\n  !(key in newProps);\n","import { MyReactComponent } from '../../component';\n\nimport type { MyReactFiberNode } from '../../fiber';\nimport type { MyReactInternalInstance } from '../../share';\n\nconst findDOMFromFiber = (fiber: MyReactFiberNode) => {\n  const currentArray = [fiber];\n  while (currentArray.length) {\n    const next = currentArray.shift();\n    if (next?.dom) return next.dom;\n    currentArray.push(...(next?.children || []));\n  }\n  return null;\n};\n\nconst findDOMFromComponentFiber = (fiber: MyReactFiberNode) => {\n  if (fiber) {\n    if (fiber.dom) return fiber.dom;\n    for (let i = 0; i < fiber.children.length; i++) {\n      const dom = findDOMFromFiber(fiber.children[i]);\n      if (dom) return dom;\n    }\n  }\n  return null;\n};\n\nexport const findDOMNode = (instance: MyReactInternalInstance) => {\n  if (instance instanceof MyReactComponent && instance.__fiber__) {\n    return findDOMFromComponentFiber(instance.__fiber__);\n  } else {\n    return null;\n  }\n};\n","import {\n  cannotUpdate,\n  enableAsyncUpdate,\n  globalDispatch,\n  globalLoop,\n  pendingModifyFiberArray,\n} from '../../share';\n\nimport type { MyReactFiberNode } from '../../fiber';\n\nconst updateEntry = () => {\n  if (globalLoop.current) return;\n  if (enableAsyncUpdate.current) {\n    globalDispatch.current.updateAllAsync();\n  } else {\n    globalDispatch.current.updateAllSync();\n  }\n};\n\nconst asyncUpdate = () => Promise.resolve().then(updateEntry);\n\nexport const triggerUpdate = (fiber: MyReactFiberNode) => {\n  const canUpdate = cannotUpdate();\n  if (canUpdate) {\n    fiber.triggerUpdate();\n    pendingModifyFiberArray.current.push(fiber);\n    asyncUpdate();\n  }\n};\n","import type { MyReactFiberNode } from '../../../../fiber';\n\nexport const clearFiberDom = (fiber: MyReactFiberNode) => {\n  if (fiber.dom) {\n    if (!fiber.__isPortal__ && !fiber.__root__) {\n      fiber.dom?.remove();\n    } else {\n      fiber.children.forEach(clearFiberDom);\n    }\n  } else {\n    fiber.children.forEach(clearFiberDom);\n  }\n};\n","import { unmountFiber } from '../../../../fiber';\nimport { mapFiber } from '../../../../share';\n\nimport { clearFiberDom } from './clearFiberDom';\n\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport const _unmount = (fiber: MyReactFiberNode) => {\n  unmountFiber(fiber);\n  clearFiberDom(fiber);\n};\n\nexport const unmount = (fiber: MyReactFiberNode) => {\n  const allUnmountFiber = fiber.__unmountQueue__.slice(0);\n\n  if (allUnmountFiber.length) {\n    mapFiber(allUnmountFiber as MyReactFiberNode | MyReactFiberNode[], (f) =>\n      _unmount(f)\n    );\n  }\n\n  fiber.__unmountQueue__ = [];\n};\n","import { MyReactFiberNode } from '../../fiber';\nimport { _unmount } from '../client/dispatch/unmount';\n\nexport const unmountComponentAtNode = (\n  container: Element & { __fiber__: MyReactFiberNode }\n) => {\n  const fiber = container.__fiber__;\n  if (fiber instanceof MyReactFiberNode) {\n    _unmount(fiber);\n  }\n};\n","import { globalDispatch, pendingUpdateFiberListArray } from '../../share';\n\nexport const reconcileUpdate = () => {\n  const allPendingList = pendingUpdateFiberListArray.current.slice(0);\n\n  allPendingList.forEach((l) => globalDispatch.current.reconcileCreate(l));\n\n  allPendingList.forEach((l) => globalDispatch.current.reconcileUpdate(l));\n\n  pendingUpdateFiberListArray.current = [];\n};\n","import type { MyReactFiberNode } from '../../fiber';\n\nexport const getFiberWithDom = (\n  fiber: MyReactFiberNode | null,\n  transform: (f: MyReactFiberNode) => MyReactFiberNode | null\n): MyReactFiberNode | null => {\n  if (fiber) {\n    if (fiber.dom) return fiber;\n    return getFiberWithDom(transform(fiber), transform);\n  }\n  return null;\n};\n","import {\n  isAppCrash,\n  pendingModifyTopLevelFiber,\n  pendingModifyFiberArray,\n  globalDispatch,\n} from '../../../share';\n\nimport type { MyReactFiberNode } from '../../../fiber';\n\nlet currentYield: MyReactFiberNode | null = null;\n\nexport const updateFiberController = {\n  setYield: (fiber: MyReactFiberNode | null) => {\n    if (fiber) {\n      currentYield = fiber;\n    } else {\n      currentYield = null;\n      globalDispatch.current.endProgressList();\n    }\n  },\n  getNext: () => {\n    if (isAppCrash.current) return null;\n    const yieldFiber = currentYield;\n    currentYield = null;\n    if (yieldFiber) return yieldFiber;\n    while (pendingModifyFiberArray.current.length) {\n      const newProgressFiber = pendingModifyFiberArray.current.shift();\n      if (newProgressFiber?.mount) {\n        globalDispatch.current.beginProgressList();\n        pendingModifyTopLevelFiber.current = newProgressFiber;\n        return newProgressFiber;\n      }\n    }\n    return null;\n  },\n  getUpdateList: (fiber: MyReactFiberNode) => {\n    globalDispatch.current.generateUpdateList(fiber);\n  },\n  hasNext: () => {\n    if (isAppCrash.current) return false;\n    return currentYield !== null || pendingModifyFiberArray.current.length > 0;\n  },\n  doesPause: () => currentYield !== null,\n};\n","import { updateLoopAsync, updateLoopSync } from '../../../core';\nimport { globalLoop, shouldPauseAsyncUpdate } from '../../../share';\nimport { reconcileUpdate } from '../../shared';\n\nimport { updateFiberController } from './tool';\n\nexport const updateAllSync = () => {\n  globalLoop.current = true;\n\n  updateLoopSync(updateFiberController, reconcileUpdate);\n\n  globalLoop.current = false;\n\n  Promise.resolve().then(() => {\n    if (updateFiberController.hasNext()) {\n      updateAllSync();\n    }\n  });\n};\n\nexport const updateAllAsync = () => {\n  globalLoop.current = true;\n\n  updateLoopAsync(\n    updateFiberController,\n    shouldPauseAsyncUpdate,\n    reconcileUpdate\n  );\n\n  globalLoop.current = false;\n\n  Promise.resolve().then(() => {\n    if (updateFiberController.hasNext()) {\n      updateAllAsync();\n    }\n  });\n};\n","import { IS_SINGLE_ELEMENT } from '../../../../share';\n\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport const append = (\n  fiber: MyReactFiberNode,\n  parentFiberWithDom: MyReactFiberNode\n) => {\n  if (fiber.__pendingAppend__) {\n    if (!fiber.dom || !parentFiberWithDom.dom)\n      throw new Error('append error, dom not exist');\n    const parentDom = parentFiberWithDom.dom as Element;\n    if (\n      !Object.prototype.hasOwnProperty.call(\n        IS_SINGLE_ELEMENT,\n        parentDom.tagName.toLowerCase()\n      )\n    ) {\n      parentDom.appendChild(fiber.dom);\n    }\n    fiber.__pendingAppend__ = false;\n  }\n};\n","import type { MyReactFiberNode } from '../../../../fiber';\n\nexport const context = (fiber: MyReactFiberNode) => {\n  if (fiber.__pendingContext__) {\n    const allListeners = fiber.__dependence__.slice(0);\n    Promise.resolve().then(() => {\n      allListeners\n        .map((f) => f.__fiber__)\n        .forEach((f) => f?.mount && f.update());\n    });\n    fiber.__pendingContext__ = false;\n  }\n};\n","import { IS_SINGLE_ELEMENT, log } from '../../../../share';\n\nimport type { Children } from '../../../../element';\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport type HydrateDOM = Element & {\n  __hydrate__: boolean;\n};\n\nconst getNextHydrateDom = (parentDom: Element) => {\n  const children = Array.from(parentDom.childNodes);\n\n  return children.find(\n    (dom) =>\n      dom.nodeType !== document.COMMENT_NODE && !(dom as HydrateDOM).__hydrate__\n  );\n};\n\nconst checkHydrateDom = (fiber: MyReactFiberNode, dom?: ChildNode) => {\n  if (!dom) {\n    log({\n      fiber,\n      level: 'error',\n      message: 'hydrate error, dom not render from server',\n    });\n    return false;\n  }\n  if (fiber.__isTextNode__) {\n    if (dom.nodeType !== Node.TEXT_NODE) {\n      log({\n        fiber,\n        level: 'error',\n        message: `hydrate error, dom not match from server. server: ${dom.nodeName.toLowerCase()}, client: ${\n          fiber.element\n        }`,\n      });\n      return false;\n    }\n    return true;\n  }\n  if (fiber.__isPlainNode__) {\n    const typedElement = fiber.element as Children;\n    if (dom.nodeType !== Node.ELEMENT_NODE) {\n      log({\n        fiber,\n        level: 'error',\n        message: `hydrate error, dom not match from server. server: ${dom.nodeName.toLowerCase()}, client: ${typedElement.type.toString()}`,\n      });\n      return false;\n    }\n    if (typedElement.type.toString() !== dom.nodeName.toLowerCase()) {\n      log({\n        fiber,\n        level: 'error',\n        message: `hydrate error, dom not match from server. server: ${dom.nodeName.toLowerCase()}, client: ${typedElement.type.toString()}`,\n      });\n      return false;\n    }\n    return true;\n  }\n  throw new Error('hydrate error, look like a bug');\n};\n\nexport const getHydrateDom = (fiber: MyReactFiberNode, parentDom: Element) => {\n  if (\n    IS_SINGLE_ELEMENT[\n      parentDom.tagName.toLowerCase() as keyof typeof IS_SINGLE_ELEMENT\n    ]\n  )\n    return { result: true };\n  const dom = getNextHydrateDom(parentDom);\n  const result = checkHydrateDom(fiber, dom);\n  if (result) {\n    const typedDom = dom as HydrateDOM;\n    fiber.dom = typedDom;\n    return { dom: typedDom, result };\n  } else {\n    return { dom, result };\n  }\n};\n","// import { fallback } from './fallback';\nimport { getHydrateDom } from './getHydrateDom';\n\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport const hydrateCreate = (\n  fiber: MyReactFiberNode,\n  parentFiberWithDom: MyReactFiberNode\n): boolean => {\n  if (fiber.__isTextNode__ || fiber.__isPlainNode__) {\n    const { result } = getHydrateDom(fiber, parentFiberWithDom.dom as Element);\n    return result;\n  }\n  throw new Error('hydrate error, portal element can not hydrate');\n};\n","import type { Children } from '../../../../element';\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport const nativeCreate = (fiber: MyReactFiberNode) => {\n  if (fiber.__isTextNode__) {\n    fiber.dom = document.createTextNode(fiber.element as string);\n  } else if (fiber.__isPlainNode__) {\n    const typedElement = fiber.element as Children;\n    if (fiber.nameSpace) {\n      fiber.dom = document.createElementNS(\n        fiber.nameSpace,\n        typedElement.type as string\n      );\n    } else {\n      fiber.dom = document.createElement(typedElement.type as string);\n    }\n  } else {\n    fiber.dom = fiber.__props__.container as Element;\n  }\n};\n","// for invalid dom structure\n\nimport { enableAllCheck, log } from '../../../../share';\n\nimport type { Children } from '../../../../element';\nimport type { MyReactFiberNode } from '../../../../fiber';\n\n// TODO\nexport const validDomNesting = (fiber: MyReactFiberNode) => {\n  if (!enableAllCheck.current) return;\n  if (fiber.__isPlainNode__) {\n    const typedElement = fiber.element as Children;\n    if (typedElement.type === 'p') {\n      let parent = fiber.parent;\n      while (parent && parent.__isPlainNode__) {\n        const typedParentElement = parent.element as Children;\n        if (typedParentElement.type === 'p') {\n          log({\n            fiber,\n            level: 'warn',\n            triggerOnce: true,\n            message: `invalid dom nesting: <p> cannot appear as a child of <p>`,\n          });\n        }\n        parent = parent.parent;\n      }\n    }\n  }\n};\n","import { isHydrateRender, enableAllCheck } from '../../../../share';\n\nimport { hydrateCreate } from './hydrateCreate';\nimport { nativeCreate } from './nativeCreate';\nimport { validDomNesting } from './validDomNesting';\n\nimport type { MyReactFiberNode } from '../../../../fiber';\nimport type { HydrateDOM } from './getHydrateDom';\n\nexport const create = (\n  fiber: MyReactFiberNode,\n  hydrate: boolean,\n  parentFiberWithDom: MyReactFiberNode\n): boolean => {\n  if (fiber.__pendingCreate__) {\n    let re = false;\n    validDomNesting(fiber);\n    if (hydrate) {\n      const result = hydrateCreate(fiber, parentFiberWithDom);\n      if (!result) {\n        nativeCreate(fiber);\n      }\n      re = result;\n    } else {\n      nativeCreate(fiber);\n    }\n    if (isHydrateRender.current) {\n      const typedDom = fiber.dom as HydrateDOM;\n      typedDom.__hydrate__ = true;\n      if (enableAllCheck.current && fiber.__isPlainNode__) {\n        if (!re) {\n          typedDom.setAttribute('debug_hydrate', 'fail');\n        } else {\n          typedDom.setAttribute('debug_hydrate', 'success');\n        }\n      }\n    }\n    fiber.__pendingCreate__ = false;\n    return re;\n  }\n  return hydrate;\n};\n","import type { MyReactFiberNode } from '../../../../fiber';\n\nexport const layoutEffect = (fiber: MyReactFiberNode) => {\n  const allLayoutEffect = fiber.__layoutEffectQueue__.slice(0);\n\n  allLayoutEffect.forEach((layoutEffect) => layoutEffect.call(null));\n\n  fiber.__layoutEffectQueue__ = [];\n};\n\nexport const effect = (fiber: MyReactFiberNode) => {\n  const allEffect = fiber.__effectQueue__.slice(0);\n\n  allEffect.forEach((effect) => effect.call(null));\n\n  fiber.__effectQueue__ = [];\n};\n","import { isHydrateRender } from '../../../../share';\n\nimport type { MyReactFiberNode } from '../../../../fiber';\nimport type { HydrateDOM } from '../create/getHydrateDom';\n\nexport const fallback = (fiber: MyReactFiberNode) => {\n  if (isHydrateRender.current && fiber.__isPlainNode__) {\n    const dom = fiber.dom as Element;\n    const children = Array.from(dom.childNodes);\n    children.forEach((node) => {\n      const typedNode = node as Partial<HydrateDOM>;\n      if (\n        typedNode.nodeType !== document.COMMENT_NODE &&\n        !typedNode.__hydrate__\n      ) {\n        node.remove();\n      }\n      delete typedNode['__hydrate__'];\n    });\n  }\n};\n","import type { MyReactFiberNode } from '../../../../fiber';\n\nexport const append = (fiber: MyReactFiberNode, parentDOM: Element) => {\n  if (!fiber) throw new Error('position error, look like a bug');\n  fiber.__pendingAppend__ = false;\n  fiber.__pendingPosition__ = false;\n  if (fiber.__isPortal__) return;\n  if (fiber.__isPlainNode__ || fiber.__isTextNode__) {\n    parentDOM.appendChild(fiber.dom as Element);\n    return;\n  }\n  let child = fiber.child;\n  while (child) {\n    append(child, parentDOM);\n    child = child.sibling;\n  }\n};\n","import type { MyReactFiberNode } from '../../../../fiber';\n\nexport const getFiberWithDom = (\n  fiber: MyReactFiberNode | null,\n  transform: (\n    f: MyReactFiberNode\n  ) => MyReactFiberNode | MyReactFiberNode[] | null = (f) => f.parent\n): MyReactFiberNode | null => {\n  if (!fiber) return null;\n  if (fiber.__isPortal__) return null;\n  if (fiber.dom) return fiber;\n  const nextFibers = transform(fiber);\n  if (Array.isArray(nextFibers)) {\n    return nextFibers.reduce<MyReactFiberNode | null>((p, c) => {\n      if (p) return p;\n      p = getFiberWithDom(c, transform);\n      return p;\n    }, null);\n  } else {\n    return getFiberWithDom(nextFibers, transform);\n  }\n};\n","import { getFiberWithDom } from './getFiberWithDom';\n\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nconst getInsertBeforeDomFromSibling = (\n  fiber: MyReactFiberNode | null\n): MyReactFiberNode | null => {\n  if (!fiber) return null;\n  const sibling = fiber.sibling;\n  if (sibling) {\n    return (\n      getFiberWithDom(sibling, (f) => f.children) ||\n      getInsertBeforeDomFromSibling(sibling)\n    );\n  } else {\n    return null;\n  }\n};\n\nexport const getInsertBeforeDomFromSiblingAndParent = (\n  fiber: MyReactFiberNode | null,\n  parentFiber: MyReactFiberNode | null\n): MyReactFiberNode | null => {\n  if (!fiber) return null;\n  if (fiber === parentFiber) return null;\n  const beforeDom = getInsertBeforeDomFromSibling(fiber);\n  if (beforeDom) return beforeDom;\n  return getInsertBeforeDomFromSiblingAndParent(\n    fiber.parent,\n    parentFiber\n  ) as MyReactFiberNode | null;\n};\n","import type { MyReactFiberNode } from '../../../../fiber';\n\nexport const insertBefore = (\n  fiber: MyReactFiberNode,\n  beforeDOM: Element,\n  parentDOM: Element\n) => {\n  if (!fiber) throw new Error('position error, look like a bug');\n  fiber.__pendingAppend__ = false;\n  fiber.__pendingPosition__ = false;\n  if (fiber.__isPortal__) return;\n  if (fiber.__isPlainNode__ || fiber.__isTextNode__) {\n    parentDOM.insertBefore(fiber.dom as Element, beforeDOM);\n    return;\n  }\n  let child = fiber.child;\n  while (child) {\n    insertBefore(child, beforeDOM, parentDOM);\n    child = child.sibling;\n  }\n  // fiber.children.forEach((f) => insertBefore(f, beforeDOM, parentDOM));\n};\n","import { append } from './append';\nimport { getInsertBeforeDomFromSiblingAndParent } from './getInsertBeforeDom';\nimport { insertBefore } from './insertBefore';\n\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport const position = (\n  fiber: MyReactFiberNode,\n  parentFiberWithDom: MyReactFiberNode\n) => {\n  if (fiber.__pendingPosition__) {\n    const beforeFiberWithDom = getInsertBeforeDomFromSiblingAndParent(\n      fiber,\n      parentFiberWithDom\n    );\n    if (beforeFiberWithDom) {\n      insertBefore(\n        fiber,\n        beforeFiberWithDom.dom as Element,\n        parentFiberWithDom.dom as Element\n      );\n    } else {\n      append(fiber, parentFiberWithDom.dom as Element);\n    }\n    fiber.__pendingPosition__ = false;\n  }\n};\n","export const getNativeEventName = (\n  eventName: string,\n  tagName: string,\n  props: Record<string, unknown>\n) => {\n  let isCapture = false;\n  let nativeName = eventName;\n  if (eventName.endsWith('Capture')) {\n    isCapture = true;\n    nativeName = eventName.split('Capture')[0];\n  }\n  if (nativeName === 'DoubleClick') {\n    nativeName = 'dblclick';\n  } else if (nativeName === 'Change') {\n    if (tagName === 'input') {\n      if (props.type === 'radio' || props.type === 'checkbox') {\n        nativeName = 'click';\n      } else {\n        nativeName = 'input';\n      }\n    } else {\n      nativeName = 'change';\n    }\n  } else {\n    nativeName = nativeName.toLowerCase();\n  }\n\n  return { nativeName, isCapture };\n};\n","import {\n  enableControlComponent,\n  enableEventSystem,\n  safeCallWithFiber,\n} from '../../../../share';\n\nimport { getNativeEventName } from './getEventName';\n\nimport type { Children } from '../../../../element';\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nconst controlElementTag: Record<string, boolean> = {\n  input: true,\n  // textarea: true,\n  // select: true,\n};\n\nexport const addEventListener = (\n  fiber: MyReactFiberNode,\n  dom: Element,\n  key: string\n) => {\n  const typedElement = fiber.element as Children;\n  const callback = typedElement.props[key] as (...args: any[]) => void;\n  const { nativeName, isCapture } = getNativeEventName(\n    key.slice(2),\n    typedElement.type as string,\n    typedElement.props\n  );\n  if (enableEventSystem.current) {\n    const eventState = fiber.__internal_node_event__;\n    const eventName = `${nativeName}_${isCapture}`;\n    if (eventState[eventName]) {\n      eventState[eventName].cb?.push(callback);\n    } else {\n      const handler: ((...args: any[]) => void) & { cb?: any[] } = (\n        ...args: any[]\n      ) => {\n        const e = args[0];\n        e.nativeEvent = e;\n        safeCallWithFiber({\n          action: () =>\n            handler.cb?.forEach(\n              (cb) => typeof cb === 'function' && cb.call(null, ...args)\n            ),\n          fiber,\n        });\n        if (enableControlComponent) {\n          if (\n            controlElementTag[typedElement.type as string] &&\n            typeof typedElement.props['value'] !== 'undefined'\n          ) {\n            (dom as unknown as HTMLInputElement)['value'] = typedElement.props[\n              'value'\n            ] as string;\n            dom.setAttribute('value', typedElement.props['value'] as string);\n          }\n        }\n      };\n      handler.cb = [callback];\n      eventState[eventName] = handler;\n      dom.addEventListener(nativeName, handler, isCapture);\n    }\n  } else {\n    dom.addEventListener(nativeName, callback, isCapture);\n  }\n};\n","import { enableEventSystem } from '../../../../share';\n\nimport { getNativeEventName } from './getEventName';\n\nimport type { Children } from '../../../../element';\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport const removeEventListener = (\n  fiber: MyReactFiberNode,\n  dom: Element,\n  key: string\n) => {\n  const typedElement = fiber.__prevVdom__ as Children;\n  const callback = typedElement.props[key] as (...args: any[]) => void;\n  const { nativeName, isCapture } = getNativeEventName(\n    key.slice(2),\n    typedElement.type as string,\n    typedElement.props\n  );\n  if (enableEventSystem.current) {\n    const eventState = fiber.__internal_node_event__;\n    const eventName = `${nativeName}_${isCapture}`;\n    if (!eventState[eventName]) return;\n    eventState[eventName].cb = eventState[eventName].cb?.filter(\n      (c) => c !== callback || typeof c !== 'function'\n    );\n  } else {\n    dom.removeEventListener(nativeName, callback, isCapture);\n  }\n};\n","import { debugWithDOM, IS_UNIT_LESS_NUMBER, log } from '../../../../share';\nimport { isEvent, isProperty, isStyle } from '../../../shared';\nimport { addEventListener } from '../event';\n\nimport type { Children } from '../../../../element';\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nconst domPropsHydrate = (fiber: MyReactFiberNode, dom: Element) => {\n  if (fiber.__isTextNode__) {\n    if (dom.textContent !== String(fiber.element)) {\n      if (dom.textContent === ' ' && fiber.element === '') {\n        dom.textContent = '';\n      } else {\n        log({\n          fiber,\n          message: `hydrate warning, text not match from server. server: ${dom.textContent}, client: ${fiber.element}`,\n        });\n        dom.textContent = fiber.element as string;\n      }\n    }\n  } else if (fiber.__isPlainNode__) {\n    const typedElement = fiber.element as Children;\n    const props = typedElement.props;\n    Object.keys(props)\n      .filter(isProperty)\n      .forEach((key) => {\n        if (\n          props[key] !== null &&\n          props[key] !== false &&\n          props[key] !== undefined\n        ) {\n          if (key === 'className') {\n            if (fiber.nameSpace) {\n              const v = dom.getAttribute('class')?.toString();\n              if (v !== String(props[key])) {\n                log({\n                  fiber,\n                  message: `hydrate warning, dom ${key} not match from server. server: ${v}, client: ${props[key]}`,\n                });\n                dom.setAttribute('class', props[key] as string);\n              }\n            } else {\n              if (dom[key].toString() !== String(props[key])) {\n                log({\n                  fiber,\n                  message: `hydrate warning, dom ${key} not match from server. server: ${dom[key]}, client: ${props[key]}`,\n                });\n                dom[key] == (props[key] as string);\n              }\n            }\n          } else {\n            if (key in dom && !fiber.nameSpace) {\n              if ((dom as any)[key].toString() !== String(props[key])) {\n                log({\n                  fiber,\n                  message: `hydrate warning, dom ${key} props not match from server. server: ${\n                    (dom as any)[key]\n                  }, client: ${props[key]}`,\n                });\n                (dom as any)[key] = props[key] as string;\n              }\n            } else {\n              const v = dom.getAttribute(key);\n              if (v?.toString() !== String(props[key])) {\n                log({\n                  fiber,\n                  message: `hydrate warning, dom ${v} attr not match from server. server: ${v}, client: ${props[key]}`,\n                });\n                dom.setAttribute(key, props[key] as string);\n              }\n            }\n          }\n        }\n      });\n  }\n};\n\nconst domStyleHydrate = (fiber: MyReactFiberNode, dom: Element) => {\n  if (fiber.__isPlainNode__) {\n    const typedElement = fiber.element as Children;\n    const props = typedElement.props;\n    Object.keys(props)\n      .filter(isStyle)\n      .forEach((styleKey) => {\n        const typedProps = (props[styleKey] as Record<string, unknown>) || {};\n        Object.keys(typedProps).forEach((styleName) => {\n          if (\n            Object.prototype.hasOwnProperty.call(\n              IS_UNIT_LESS_NUMBER,\n              styleName\n            ) &&\n            typeof typedProps[styleName] === 'number'\n          ) {\n            (dom as any)[styleKey][styleName] = `${typedProps[styleName]}px`;\n            return;\n          }\n          if (\n            typedProps[styleName] !== null &&\n            typedProps[styleName] !== undefined\n          ) {\n            (dom as any)[styleKey][styleName] = typedProps[styleName];\n          }\n        });\n      });\n  }\n};\n\nconst domEventHydrate = (fiber: MyReactFiberNode, dom: Element) => {\n  if (fiber.__isPlainNode__) {\n    const typedElement = fiber.element as Children;\n    const props = typedElement.props;\n    Object.keys(props)\n      .filter(isEvent)\n      .forEach((key) => {\n        addEventListener(fiber, dom, key);\n      });\n  }\n};\n\nexport const hydrateUpdate = (fiber: MyReactFiberNode) => {\n  const dom = fiber.dom as Element;\n\n  // for now it is necessary to judge\n  if (dom) {\n    domPropsHydrate(fiber, dom);\n    domStyleHydrate(fiber, dom);\n    domEventHydrate(fiber, dom);\n\n    debugWithDOM(fiber);\n  }\n\n  fiber.__pendingCreate__ = false;\n\n  fiber.__pendingUpdate__ = false;\n\n  fiber.__pendingAppend__ = false;\n\n  fiber.__pendingPosition__ = false;\n};\n","import type { MyReactFiberNode } from '../../../../fiber';\n\ntype HighlightDOM = HTMLElement & {\n  __pendingHighLight__: boolean;\n};\n\nexport class HighLight {\n  /**\n   * @type HighLight\n   */\n  static instance: HighLight | undefined = undefined;\n\n  /**\n   *\n   * @returns HighLight\n   */\n  static getHighLightInstance = () => {\n    HighLight.instance = HighLight.instance || new HighLight();\n    return HighLight.instance;\n  };\n\n  map: HTMLElement[] = [];\n\n  container: HTMLElement | null = null;\n\n  range = document.createRange();\n\n  __pendingUpdate__: MyReactFiberNode[] = [];\n\n  constructor() {\n    this.container = document.createElement('div');\n    this.container.setAttribute('debug_highlight', 'MyReact');\n    this.container.style.cssText = `\n      position: absolute;\n      z-index: 999999;\n      width: 100%;\n      left: 0;\n      top: 0;\n      pointer-events: none;\n      `;\n    document.body.append(this.container);\n  }\n\n  createHighLight = () => {\n    const element = document.createElement('div');\n    this.container?.append(element);\n    return element;\n  };\n\n  getHighLight = () => {\n    if (this.map.length > 0) {\n      return this.map.shift() as HTMLElement;\n    }\n    return this.createHighLight();\n  };\n\n  highLight = (fiber: MyReactFiberNode) => {\n    if (fiber.dom) {\n      const typedDom = fiber.dom as HighlightDOM;\n      if (!typedDom.__pendingHighLight__) {\n        typedDom.__pendingHighLight__ = true;\n        this.startHighLight(fiber);\n      }\n    }\n  };\n\n  startHighLight = (fiber: MyReactFiberNode) => {\n    this.__pendingUpdate__.push(fiber);\n    this.flashPending();\n  };\n\n  flashPending = () => {\n    Promise.resolve().then(() => {\n      const allFiber = this.__pendingUpdate__.slice(0);\n      this.__pendingUpdate__ = [];\n      const allWrapper: HTMLElement[] = [];\n      allFiber.forEach((f) => {\n        const wrapperDom = this.getHighLight();\n        allWrapper.push(wrapperDom);\n        f.__isTextNode__\n          ? this.range.selectNodeContents(f.dom as Text)\n          : this.range.selectNode(f.dom as HTMLElement);\n        const rect = this.range.getBoundingClientRect();\n        const left = rect.left + (document.scrollingElement?.scrollLeft || 0);\n        const top = rect.top + (document.scrollingElement?.scrollTop || 0);\n        const width = rect.width + 4;\n        const height = rect.height + 4;\n        const positionLeft = left - 2;\n        const positionTop = top - 2;\n        wrapperDom.style.cssText = `\n          position: absolute;\n          width: ${width}px;\n          height: ${height}px;\n          left: ${positionLeft}px;\n          top: ${positionTop}px;\n          pointer-events: none;\n          box-shadow: 0.0625rem 0.0625rem 0.0625rem red, -0.0625rem -0.0625rem 0.0625rem red;\n          `;\n      });\n      setTimeout(() => {\n        allWrapper.forEach((wrapperDom) => {\n          wrapperDom.style.boxShadow = 'none';\n          this.map.push(wrapperDom);\n        });\n        allFiber.forEach(\n          (f) => ((f.dom as HighlightDOM).__pendingHighLight__ = false)\n        );\n      }, 100);\n    });\n  };\n}\n","import {\n  debugWithDOM,\n  enableHighlight,\n  isAppMounted,\n  isHydrateRender,\n  isServerRender,\n  IS_UNIT_LESS_NUMBER,\n} from '../../../../share';\nimport { isEvent, isGone, isNew, isProperty, isStyle } from '../../../shared';\nimport { addEventListener, removeEventListener } from '../event';\n\nimport { HighLight } from './highlight';\n\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport const nativeUpdate = (fiber: MyReactFiberNode) => {\n  if (!fiber.dom) throw new Error('update error, dom not exist');\n  if (fiber.__isTextNode__) {\n    if (fiber.__vdom__ !== fiber.__prevVdom__) {\n      fiber.dom.textContent = fiber.element as string;\n    }\n  } else {\n    const dom = fiber.dom as HTMLElement;\n    const oldProps = fiber.__prevProps__ || {};\n    const newProps = fiber.__props__ || {};\n    Object.keys(oldProps)\n      .filter(isEvent)\n      .filter((key) => isGone(newProps)(key) || isNew(oldProps, newProps)(key))\n      .forEach((key) => removeEventListener(fiber, dom, key));\n    Object.keys(oldProps)\n      .filter(isProperty)\n      .filter(isGone(newProps))\n      .forEach((key) => {\n        if (key === 'className') {\n          if (fiber.nameSpace) {\n            dom.removeAttribute('class');\n          } else {\n            dom[key] = '';\n          }\n        } else {\n          if (key in dom && !fiber.nameSpace) {\n            (dom as any)[key] = '';\n          } else {\n            dom.removeAttribute(key);\n          }\n        }\n      });\n    Object.keys(oldProps)\n      .filter(isStyle)\n      .forEach((styleKey) => {\n        Object.keys((oldProps[styleKey] as Record<string, unknown>) || {})\n          .filter(isGone((newProps[styleKey] as Record<string, unknown>) || {}))\n          .forEach((styleName) => {\n            (dom.style as any)[styleName] = '';\n          });\n      });\n    Object.keys(newProps)\n      .filter(isEvent)\n      .filter(isNew(oldProps, newProps))\n      .forEach((key) => addEventListener(fiber, dom, key));\n    Object.keys(newProps)\n      .filter(isProperty)\n      .filter(isNew(oldProps, newProps))\n      .forEach((key) => {\n        if (key === 'className') {\n          if (fiber.nameSpace) {\n            dom.setAttribute('class', (newProps[key] as string) || '');\n          } else {\n            dom[key] = (newProps[key] as string) || '';\n          }\n        } else {\n          if (key in dom && !fiber.nameSpace) {\n            if (\n              newProps[key] !== null &&\n              newProps[key] !== false &&\n              newProps[key] !== undefined\n            ) {\n              (dom as any)[key] = newProps[key];\n            } else {\n              (dom as any)[key] = '';\n            }\n          } else {\n            if (\n              newProps[key] !== null &&\n              newProps[key] !== false &&\n              newProps[key] !== undefined\n            ) {\n              dom.setAttribute(key, String(newProps[key]));\n            } else {\n              dom.removeAttribute(key);\n            }\n          }\n          if ((key === 'autofocus' || key === 'autoFocus') && newProps[key]) {\n            Promise.resolve().then(() => dom.focus());\n          }\n        }\n      });\n    Object.keys(newProps)\n      .filter(isStyle)\n      .forEach((styleKey) => {\n        const typedNewProps = newProps[styleKey] as Record<string, unknown>;\n        const typedOldProps = oldProps[styleKey] as Record<string, unknown>;\n        Object.keys(typedNewProps || {})\n          .filter(isNew(typedOldProps || {}, typedNewProps))\n          .forEach((styleName) => {\n            if (\n              !Object.prototype.hasOwnProperty.call(\n                IS_UNIT_LESS_NUMBER,\n                styleName\n              ) &&\n              typeof typedNewProps[styleName] === 'number'\n            ) {\n              (dom as any)[styleKey][\n                styleName\n              ] = `${typedNewProps[styleName]}px`;\n              return;\n            }\n            if (\n              typedNewProps[styleName] !== null &&\n              typedNewProps[styleName] !== undefined\n            ) {\n              (dom as any)[styleKey][styleName] = typedNewProps[styleName];\n            } else {\n              (dom as any)[styleKey][styleName] = '';\n            }\n          });\n      });\n    if (\n      newProps['dangerouslySetInnerHTML'] &&\n      newProps['dangerouslySetInnerHTML'] !==\n        oldProps['dangerouslySetInnerHTML']\n    ) {\n      const typedProps = newProps['dangerouslySetInnerHTML'] as Record<\n        string,\n        unknown\n      >;\n      dom.innerHTML = typedProps.__html as string;\n    }\n  }\n\n  debugWithDOM(fiber);\n\n  if (\n    isAppMounted.current &&\n    !isHydrateRender.current &&\n    !isServerRender.current &&\n    (enableHighlight.current || (window as any).__highlight__)\n  ) {\n    HighLight.getHighLightInstance().highLight(fiber);\n  }\n};\n","import { hydrateUpdate } from './hydrateUpdate';\nimport { nativeUpdate } from './nativeUpdate';\n\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport const update = (fiber: MyReactFiberNode, hydrate: boolean) => {\n  if (fiber.__pendingUpdate__) {\n    if (hydrate) {\n      hydrateUpdate(fiber);\n    } else {\n      nativeUpdate(fiber);\n    }\n\n    fiber.applyVDom();\n\n    fiber.__pendingUpdate__ = false;\n  }\n};\n","import {\n  safeCallWithFiber,\n  pendingUpdateFiberList,\n  LinkTreeList,\n  pendingUpdateFiberListArray,\n} from '../../../share';\nimport { getFiberWithDom, triggerUpdate } from '../../shared';\nimport { updateAllAsync, updateAllSync } from '../update';\n\nimport { append } from './append';\nimport { context } from './context';\nimport { create } from './create';\nimport { effect, layoutEffect } from './effect';\nimport { fallback } from './fallback';\nimport { position } from './position';\nimport { unmount } from './unmount';\nimport { update } from './update';\n\nimport type { FiberDispatch } from '../../../dispatch';\nimport type { MyReactFiberNode } from '../../../fiber';\n\nexport class ClientDispatch implements FiberDispatch {\n  trigger(_fiber: MyReactFiberNode): void {\n    triggerUpdate(_fiber);\n  }\n  beginProgressList(): void {\n    pendingUpdateFiberList.current = new LinkTreeList();\n  }\n  endProgressList(): void {\n    if (pendingUpdateFiberList.current?.length) {\n      pendingUpdateFiberListArray.current.push(pendingUpdateFiberList.current);\n    }\n    pendingUpdateFiberList.current = null;\n  }\n  generateUpdateList(_fiber: MyReactFiberNode): void {\n    if (_fiber) {\n      if (pendingUpdateFiberList.current) {\n        if (\n          _fiber.__pendingCreate__ ||\n          _fiber.__pendingUpdate__ ||\n          _fiber.__pendingAppend__ ||\n          _fiber.__pendingContext__ ||\n          _fiber.__pendingPosition__ ||\n          _fiber.__effectQueue__.length ||\n          _fiber.__unmountQueue__.length ||\n          _fiber.__layoutEffectQueue__.length\n        ) {\n          pendingUpdateFiberList.current.append(_fiber, _fiber.fiberIndex);\n        }\n      } else {\n        throw new Error('error');\n      }\n    }\n  }\n  reconcileCommit(\n    _fiber: MyReactFiberNode,\n    _hydrate: boolean,\n    _parentFiberWithDom: MyReactFiberNode\n  ): boolean {\n    const _result = safeCallWithFiber({\n      fiber: _fiber,\n      action: () => create(_fiber, _hydrate, _parentFiberWithDom),\n    });\n\n    safeCallWithFiber({\n      fiber: _fiber,\n      action: () => update(_fiber, _result),\n    });\n\n    safeCallWithFiber({\n      fiber: _fiber,\n      action: () => append(_fiber, _parentFiberWithDom),\n    });\n\n    let _final = _hydrate;\n\n    if (_fiber.child) {\n      _final = this.reconcileCommit(\n        _fiber.child,\n        _result,\n        _fiber.dom ? _fiber : _parentFiberWithDom\n      );\n      fallback(_fiber);\n    }\n\n    safeCallWithFiber({ fiber: _fiber, action: () => layoutEffect(_fiber) });\n\n    Promise.resolve().then(() =>\n      safeCallWithFiber({ fiber: _fiber, action: () => effect(_fiber) })\n    );\n\n    if (_fiber.sibling) {\n      this.reconcileCommit(\n        _fiber.sibling,\n        _fiber.dom ? _result : _final,\n        _parentFiberWithDom\n      );\n    }\n\n    if (_fiber.dom) {\n      return _result;\n    } else {\n      return _final;\n    }\n  }\n  reconcileCreate(_list: LinkTreeList<MyReactFiberNode>): void {\n    _list.listToFoot((_fiber) => {\n      safeCallWithFiber({\n        fiber: _fiber,\n        action: () => create(_fiber, false, _fiber),\n      });\n\n      safeCallWithFiber({\n        fiber: _fiber,\n        action: () => update(_fiber, false),\n      });\n\n      safeCallWithFiber({\n        fiber: _fiber,\n        action: () => unmount(_fiber),\n      });\n\n      safeCallWithFiber({ fiber: _fiber, action: () => context(_fiber) });\n    });\n  }\n  reconcileUpdate(_list: LinkTreeList<MyReactFiberNode>): void {\n    _list.listToHead((_fiber) => {\n      const _parentFiberWithDom = getFiberWithDom(\n        _fiber.parent,\n        (f) => f.parent\n      ) as MyReactFiberNode;\n\n      safeCallWithFiber({\n        fiber: _fiber,\n        action: () => position(_fiber, _parentFiberWithDom),\n      });\n    });\n\n    _list.listToFoot((_fiber) => {\n      const _parentFiberWithDom = getFiberWithDom(\n        _fiber.parent,\n        (f) => f.parent\n      ) as MyReactFiberNode;\n\n      safeCallWithFiber({\n        fiber: _fiber,\n        action: () => append(_fiber, _parentFiberWithDom),\n      });\n    });\n\n    _list.reconcile((_fiber) => {\n      safeCallWithFiber({\n        fiber: _fiber,\n        action: () => layoutEffect(_fiber),\n      });\n\n      Promise.resolve().then(() =>\n        safeCallWithFiber({ fiber: _fiber, action: () => effect(_fiber) })\n      );\n    });\n  }\n  pendingCreate(_fiber: MyReactFiberNode): void {\n    if (\n      !_fiber.__isTextNode__ &&\n      !_fiber.__isPlainNode__ &&\n      !_fiber.__isPortal__\n    )\n      return;\n    _fiber.__pendingCreate__ = true;\n  }\n  pendingUpdate(_fiber: MyReactFiberNode): void {\n    if (!_fiber.__isTextNode__ && !_fiber.__isPlainNode__) return;\n    _fiber.__pendingUpdate__ = true;\n  }\n  pendingAppend(_fiber: MyReactFiberNode): void {\n    if (!_fiber.__isTextNode__ && !_fiber.__isPlainNode__) return;\n    _fiber.__pendingAppend__ = true;\n  }\n  pendingContext(_fiber: MyReactFiberNode): void {\n    _fiber.__pendingContext__ = true;\n  }\n  pendingPosition(_fiber: MyReactFiberNode): void {\n    _fiber.__pendingPosition__ = true;\n  }\n  pendingUnmount(\n    _fiber: MyReactFiberNode,\n    _pendingUnmount: MyReactFiberNode | MyReactFiberNode[]\n  ): void {\n    _fiber.__unmountQueue__.push(_pendingUnmount);\n  }\n  pendingLayoutEffect(\n    _fiber: MyReactFiberNode,\n    _layoutEffect: () => void\n  ): void {\n    _fiber.__layoutEffectQueue__.push(_layoutEffect);\n  }\n  pendingEffect(_fiber: MyReactFiberNode, _effect: () => void): void {\n    _fiber.__effectQueue__.push(_effect);\n  }\n  updateAllSync(): void {\n    updateAllSync();\n  }\n  updateAllAsync(): void {\n    updateAllAsync();\n  }\n}\n","import { createFiberNode, MyReactFiberNode } from '../../../fiber';\nimport {\n  globalDispatch,\n  isAppCrash,\n  rootContainer,\n  rootFiber,\n} from '../../../share';\nimport { startRender, unmountComponentAtNode } from '../../shared';\nimport { ClientDispatch } from '../dispatch';\n\nimport type { Children } from '../../../element';\n\nexport const render = (\n  element: Children,\n  container: Element & { __fiber__: MyReactFiberNode }\n) => {\n  globalDispatch.current = new ClientDispatch();\n\n  isAppCrash.current = false;\n\n  const containerFiber = container.__fiber__;\n  if (containerFiber instanceof MyReactFiberNode) {\n    if (containerFiber.checkIsSameType(element)) {\n      containerFiber.installVDom(element);\n      containerFiber.update();\n      return;\n    } else {\n      unmountComponentAtNode(container);\n    }\n  }\n  Array.from(container.children).forEach((n) => n.remove?.());\n\n  const fiber = createFiberNode({ fiberIndex: 0, parent: null }, element);\n\n  fiber.dom = container;\n\n  fiber.__root__ = true;\n\n  rootFiber.current = fiber;\n\n  rootContainer.current = container;\n\n  container.setAttribute?.('render', 'MyReact');\n\n  container.__fiber__ = fiber;\n\n  startRender(fiber);\n};\n","import { createFiberNode } from '../../../fiber';\nimport {\n  globalDispatch,\n  isHydrateRender,\n  rootContainer,\n  rootFiber,\n} from '../../../share';\nimport { startRender } from '../../shared';\nimport { ClientDispatch } from '../dispatch';\n\nimport type { Children } from '../../../element';\nimport type { MyReactFiberNode } from '../../../fiber';\n\nexport const hydrate = (\n  element: Children,\n  container: Element & { __fiber__: MyReactFiberNode }\n) => {\n  globalDispatch.current = new ClientDispatch();\n\n  isHydrateRender.current = true;\n\n  const fiber = createFiberNode({ fiberIndex: 0, parent: null }, element);\n\n  fiber.dom = container;\n\n  fiber.__root__ = true;\n\n  rootFiber.current = fiber;\n\n  rootContainer.current = container;\n\n  container.setAttribute?.('hydrate', 'MyReact');\n\n  container.__fiber__ = fiber;\n\n  startRender(fiber, true);\n\n  isHydrateRender.current = false;\n};\n","import type { MyReactFiberNode } from '../../../fiber';\n\nexport const append = (\n  fiber: MyReactFiberNode,\n  parentFiberWithDom: MyReactFiberNode\n) => {\n  if (fiber.__pendingAppend__) {\n    if (!fiber.dom || !parentFiberWithDom.dom) throw new Error('append error');\n    const parentDom = parentFiberWithDom.dom as Element;\n    if (fiber.dom) {\n      parentDom.appendChild(fiber.dom);\n    }\n    fiber.__pendingAppend__ = false;\n  }\n};\n","export class TextElement {\n  content = '';\n  constructor(content: string) {\n    this.content = content === '' ? ' ' : content;\n  }\n\n  toString() {\n    return this.content.toString();\n  }\n}\n","import { IS_SINGLE_ELEMENT } from '../../../share';\n\nimport { TextElement } from './text';\n\nexport class PlainElement {\n  type: string;\n  className: string | null = null;\n  // attrs\n  style: Record<string, string | null | undefined> = {};\n  attrs: Record<string, string | boolean | null | undefined> = {};\n  children: Array<TextElement | PlainElement | string> = [];\n  constructor(type: string) {\n    this.type = type;\n  }\n\n  addEventListener() {\n    void 0;\n  }\n\n  removeEventListener() {\n    void 0;\n  }\n\n  removeAttribute(key: string) {\n    delete this.attrs[key];\n  }\n  setAttribute(\n    key: string,\n    value: string | boolean | null | undefined | number\n  ) {\n    if (value !== false && value !== null && value !== undefined) {\n      this.attrs[key] = value.toString();\n    }\n  }\n\n  /**\n   *\n   * @param {Element} dom\n   */\n  append(...dom: Array<TextElement | PlainElement>) {\n    dom.forEach((d) => this.appendChild(d));\n  }\n\n  appendChild(dom: PlainElement | TextElement | string) {\n    if (Object.prototype.hasOwnProperty.call(IS_SINGLE_ELEMENT, this.type))\n      return;\n    if (\n      dom instanceof PlainElement ||\n      dom instanceof TextElement ||\n      typeof dom === 'string'\n    ) {\n      this.children.push(dom);\n      return dom;\n    } else {\n      throw new Error('element instance error');\n    }\n  }\n\n  serializeStyle() {\n    const styleKeys = Object.keys(this.style).filter(\n      (key) => this.style[key] !== null && this.style[key] !== undefined\n    );\n    if (styleKeys.length) {\n      return `style=\"${styleKeys\n        .map((key) => `${key}: ${this.style[key]?.toString()};`)\n        .reduce((p, c) => p + c, '')}\"`;\n    }\n    return '';\n  }\n\n  serializeAttrs() {\n    const attrsKeys = Object.keys(this.attrs);\n    if (attrsKeys.length) {\n      return attrsKeys\n        .map((key) => `${key}='${this.attrs[key]?.toString()}'`)\n        .reduce((p, c) => `${p} ${c}`, '');\n    } else {\n      return '';\n    }\n  }\n\n  serializeProps() {\n    let props = '';\n    if (this.className !== undefined && this.className !== null) {\n      props += ` class=\"${this.className}\"`;\n    }\n    return props;\n  }\n\n  serialize() {\n    return `${this.serializeProps()} ${this.serializeStyle()} ${this.serializeAttrs()}`;\n  }\n\n  toString(): string {\n    if (Object.prototype.hasOwnProperty.call(IS_SINGLE_ELEMENT, this.type)) {\n      return `<${this.type} ${this.serialize()} />`;\n    } else {\n      if (this.type) {\n        return `<${this.type} ${this.serialize()} >${this.children\n          .reduce<Array<TextElement | string | PlainElement>>((p, c) => {\n            if (\n              p.length &&\n              c instanceof TextElement &&\n              p[p.length - 1] instanceof TextElement\n            ) {\n              p.push('<!-- -->');\n              p.push(c);\n            } else {\n              p.push(c);\n            }\n            return p;\n          }, [])\n          .map((dom) => dom.toString())\n          .reduce((p, c) => p + c, '')}</${this.type}>`;\n      } else {\n        return this.children\n          .reduce<Array<TextElement | string | PlainElement>>((p, c) => {\n            if (\n              p.length &&\n              c instanceof TextElement &&\n              p[p.length - 1] instanceof TextElement\n            ) {\n              p.push('<!-- -->');\n              p.push(c);\n            } else {\n              p.push(c);\n            }\n            return p;\n          }, [])\n          .map((dom) => dom.toString())\n          .reduce((p, c) => p + c, '');\n      }\n    }\n  }\n}\n","import { PlainElement } from './plain';\nimport { TextElement } from './text';\n\nimport type { Children } from '../../../element';\nimport type { MyReactFiberNode } from '../../../fiber';\n\nexport const create = (fiber: MyReactFiberNode) => {\n  if (fiber.__pendingCreate__) {\n    if (fiber.__isTextNode__) {\n      fiber.dom = new TextElement(\n        fiber.element as string\n      ) as unknown as Element;\n    } else if (fiber.__isPlainNode__) {\n      const typedElement = fiber.element as Children;\n      fiber.dom = new PlainElement(\n        typedElement.type as string\n      ) as unknown as Element;\n    } else {\n      throw new Error('createPortal() can not call on the server');\n    }\n    fiber.__pendingCreate__ = false;\n  }\n};\n","import { IS_UNIT_LESS_NUMBER } from '../../../share';\nimport { isProperty, isStyle } from '../../shared';\n\nimport type { MyReactFiberNode } from '../../../fiber';\n\nexport const update = (fiber: MyReactFiberNode) => {\n  if (fiber.__pendingUpdate__) {\n    if (fiber.__isPlainNode__) {\n      const dom = fiber.dom as HTMLElement;\n      const props = fiber.__props__ || {};\n      Object.keys(props)\n        .filter(isProperty)\n        .forEach((key) => {\n          if (key === 'className') {\n            dom[key] = props[key] as string;\n          } else {\n            dom.setAttribute(key, props[key] as string);\n          }\n        });\n      Object.keys(props)\n        .filter(isStyle)\n        .forEach((styleKey) => {\n          const typedProps = (props[styleKey] as Record<string, unknown>) || {};\n          Object.keys(typedProps).forEach((styleName) => {\n            if (\n              !Object.prototype.hasOwnProperty.call(\n                IS_UNIT_LESS_NUMBER,\n                styleName\n              ) &&\n              typeof typedProps[styleName] === 'number'\n            ) {\n              (dom as any)[styleKey][styleName] = `${typedProps[styleName]}px`;\n              return;\n            }\n            (dom as any)[styleKey][styleName] = typedProps[styleName];\n          });\n        });\n      if (props['dangerouslySetInnerHTML']) {\n        const typedProps = props['dangerouslySetInnerHTML'] as Record<\n          string,\n          unknown\n        >;\n        dom.append(typedProps.__html as string);\n      }\n    }\n    fiber.__pendingUpdate__ = false;\n  }\n};\n","import { safeCallWithFiber } from '../../share';\n\nimport { append, create, update } from './dom';\n\nimport type { FiberDispatch } from '../../dispatch';\nimport type { MyReactFiberNode } from '../../fiber';\nimport type { LinkTreeList } from '../../share';\n\nexport class ServerDispatch implements FiberDispatch {\n  trigger(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  reconcileCommit(\n    _fiber: MyReactFiberNode,\n    _hydrate: boolean,\n    _parentFiberWithDom: MyReactFiberNode\n  ): boolean {\n    safeCallWithFiber({ fiber: _fiber, action: () => create(_fiber) });\n    safeCallWithFiber({ fiber: _fiber, action: () => update(_fiber) });\n    safeCallWithFiber({\n      fiber: _fiber,\n      action: () => append(_fiber, _parentFiberWithDom),\n    });\n    if (_fiber.child) {\n      this.reconcileCommit(\n        _fiber.child,\n        _hydrate,\n        _fiber.dom ? _fiber : _parentFiberWithDom\n      );\n    }\n    if (_fiber.sibling) {\n      this.reconcileCommit(_fiber.sibling, _hydrate, _parentFiberWithDom);\n    }\n    return true;\n  }\n  reconcileCreate(_list: LinkTreeList<MyReactFiberNode>): void {\n    void 0;\n  }\n  reconcileUpdate(_list: LinkTreeList<MyReactFiberNode>): void {\n    void 0;\n  }\n  beginProgressList(): void {\n    void 0;\n  }\n  endProgressList(): void {\n    void 0;\n  }\n  generateUpdateList(\n    _fiber: MyReactFiberNode | MyReactFiberNode[] | null\n  ): void {\n    void 0;\n  }\n  pendingCreate(_fiber: MyReactFiberNode): void {\n    if (_fiber.__isPortal__) {\n      throw new Error('should not use portal element on the server');\n    }\n    if (!_fiber.__isTextNode__ && !_fiber.__isPlainNode__) return;\n    _fiber.__pendingCreate__ = true;\n  }\n  pendingUpdate(_fiber: MyReactFiberNode): void {\n    if (!_fiber.__isTextNode__ && !_fiber.__isPlainNode__) return;\n    _fiber.__pendingUpdate__ = true;\n  }\n  pendingAppend(_fiber: MyReactFiberNode): void {\n    if (!_fiber.__isTextNode__ && !_fiber.__isPlainNode__) return;\n    _fiber.__pendingAppend__ = true;\n  }\n  pendingContext(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  pendingPosition(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  pendingUnmount(\n    _fiber: MyReactFiberNode,\n    _pendingUnmount: MyReactFiberNode | MyReactFiberNode[]\n  ): void {\n    void 0;\n  }\n  pendingLayoutEffect(\n    _fiber: MyReactFiberNode,\n    _layoutEffect: () => void\n  ): void {\n    void 0;\n  }\n  pendingEffect(_fiber: MyReactFiberNode, _effect: () => void): void {\n    void 0;\n  }\n  updateAllSync(): void {\n    void 0;\n  }\n  updateAllAsync(): void {\n    void 0;\n  }\n}\n","import { createFiberNode } from '../../fiber';\nimport {\n  globalDispatch,\n  isServerRender,\n  rootContainer,\n  rootFiber,\n} from '../../share';\nimport { startRender } from '../shared';\n\nimport { ServerDispatch } from './dispatch';\nimport { PlainElement } from './dom';\n\nimport type { Children } from '../../element';\n\n// TODO should create global scope for every render\nexport const renderToString = (element: Children) => {\n  globalDispatch.current = new ServerDispatch();\n\n  isServerRender.current = true;\n\n  const container = new PlainElement('');\n\n  const fiber = createFiberNode({ fiberIndex: 0, parent: null }, element);\n\n  fiber.dom = container as unknown as Element;\n\n  fiber.__root__ = true;\n\n  rootFiber.current = fiber;\n\n  rootContainer.current = container;\n\n  startRender(fiber, false);\n\n  isServerRender.current = false;\n\n  return container.toString();\n};\n","import { getContextFiber, getContextValue } from '../fiber';\nimport { MyReactInternalInstance, isArrayEquals } from '../share';\n\nimport type { HookUpdateQueue } from '../fiber';\n\nexport type HOOK_TYPE =\n  | 'useRef'\n  | 'useMemo'\n  | 'useState'\n  | 'useEffect'\n  | 'useContext'\n  | 'useReducer'\n  | 'useCallback'\n  | 'useDebugValue'\n  | 'useLayoutEffect'\n  | 'useImperativeHandle';\n\nexport type Action = (s: any) => any | { type: string; payload: any };\n\nexport type Reducer = (state?: any, action?: Action) => any;\n\nexport class MyReactHookNode extends MyReactInternalInstance {\n  hookIndex = 0;\n\n  hookNext: MyReactHookNode | null = null;\n\n  hookPrev: MyReactHookNode | null = null;\n\n  hookType: HOOK_TYPE | null = null;\n\n  cancel: (() => void) | null = null;\n\n  effect = false;\n\n  value: any = null;\n\n  reducer: Reducer;\n\n  deps: any[] = [];\n\n  result: any = null;\n\n  constructor(\n    hookIndex: number,\n    hookType: HOOK_TYPE,\n    value: any,\n    reducer: Reducer,\n    deps: any[]\n  ) {\n    super();\n    this.deps = deps;\n    this.value = value;\n    this.reducer = reducer;\n    this.hookType = hookType;\n    this.hookIndex = hookIndex;\n  }\n\n  initialResult() {\n    if (\n      this.hookType === 'useMemo' ||\n      this.hookType === 'useState' ||\n      this.hookType === 'useReducer'\n    ) {\n      this.result = this.value.call(null);\n      return;\n    }\n\n    if (\n      this.hookType === 'useEffect' ||\n      this.hookType === 'useLayoutEffect' ||\n      this.hookType === 'useImperativeHandle'\n    ) {\n      this.effect = true;\n      return;\n    }\n\n    if (this.hookType === 'useRef' || this.hookType === 'useCallback') {\n      this.result = this.value;\n      return;\n    }\n\n    if (this.hookType === 'useContext') {\n      const ProviderFiber = getContextFiber(this.__fiber__, this.value);\n      this.setContext(ProviderFiber);\n      this.result = getContextValue(ProviderFiber, this.value);\n      this.context = this.result;\n      return;\n    }\n  }\n\n  updateResult(newValue: any, newReducer: Reducer, newDeps: any[]) {\n    if (\n      this.hookType === 'useMemo' ||\n      this.hookType === 'useEffect' ||\n      this.hookType === 'useCallback' ||\n      this.hookType === 'useLayoutEffect' ||\n      this.hookType === 'useImperativeHandle'\n    ) {\n      if (newDeps && !this.deps) {\n        throw new Error('deps state change');\n      }\n      if (!newDeps && this.deps) {\n        throw new Error('deps state change');\n      }\n    }\n\n    if (\n      this.hookType === 'useEffect' ||\n      this.hookType === 'useLayoutEffect' ||\n      this.hookType === 'useImperativeHandle'\n    ) {\n      if (!newDeps) {\n        this.value = newValue;\n        this.reducer = newReducer || this.reducer;\n        this.deps = newDeps;\n        this.effect = true;\n      } else if (!isArrayEquals(this.deps, newDeps)) {\n        this.value = newValue;\n        this.reducer = newReducer || this.reducer;\n        this.deps = newDeps;\n        this.effect = true;\n      }\n      return;\n    }\n\n    if (this.hookType === 'useCallback') {\n      if (!isArrayEquals(this.deps, newDeps)) {\n        this.value = newValue;\n        this.result = newValue;\n        this.deps = newDeps;\n      }\n      return;\n    }\n\n    if (this.hookType === 'useMemo') {\n      if (!isArrayEquals(this.deps, newDeps)) {\n        this.value = newValue;\n        this.result = newValue.call(null);\n        this.deps = newDeps;\n      }\n      return;\n    }\n\n    if (this.hookType === 'useContext') {\n      if (\n        !this.__context__ ||\n        !this.__context__.mount ||\n        !Object.is(this.value, newValue)\n      ) {\n        this.value = newValue;\n        const ProviderFiber = getContextFiber(this.__fiber__, this.value);\n        this.setContext(ProviderFiber);\n        this.result = getContextValue(ProviderFiber, this.value);\n        this.context = this.result;\n      } else {\n        this.result = getContextValue(this.__context__, this.value);\n        this.context = this.result;\n      }\n      return;\n    }\n\n    if (this.hookType === 'useReducer') {\n      this.value = newValue;\n      this.reducer = newReducer;\n    }\n  }\n\n  unmount() {\n    if (this.hookType === 'useEffect' || this.hookType === 'useLayoutEffect') {\n      this.effect = false;\n      this.cancel && this.cancel();\n      return;\n    }\n    if (this.hookType === 'useContext') {\n      this.__context__?.removeDependence(this);\n    }\n  }\n\n  dispatch = (action: Action) => {\n    const updater: HookUpdateQueue = {\n      type: 'hook',\n      trigger: this,\n      action,\n    };\n\n    this.__fiber__?.__hookUpdateQueue__.push(updater);\n\n    Promise.resolve().then(() => {\n      this.__fiber__?.update();\n    });\n  };\n}\n","import { globalDispatch } from '../share';\n\nimport type { MyReactFiberNode } from '../fiber';\nimport type { MyReactHookNode } from './instance';\n\nexport const effect = (fiber: MyReactFiberNode, hookNode: MyReactHookNode) => {\n  if (hookNode.effect && !hookNode.__pendingEffect__) {\n    hookNode.__pendingEffect__ = true;\n\n    if (hookNode.hookType === 'useEffect') {\n      globalDispatch.current.pendingEffect(fiber, () => {\n        hookNode.cancel && hookNode.cancel();\n\n        if (hookNode.__fiber__?.mount) hookNode.cancel = hookNode.value();\n\n        hookNode.effect = false;\n\n        hookNode.__pendingEffect__ = false;\n      });\n    }\n\n    if (hookNode.hookType === 'useLayoutEffect') {\n      globalDispatch.current.pendingLayoutEffect(fiber, () => {\n        hookNode.cancel && hookNode.cancel();\n\n        if (hookNode.__fiber__?.mount) hookNode.cancel = hookNode.value();\n\n        hookNode.effect = false;\n\n        hookNode.__pendingEffect__ = false;\n      });\n    }\n\n    if (hookNode.hookType === 'useImperativeHandle') {\n      globalDispatch.current.pendingLayoutEffect(fiber, () => {\n        if (hookNode.value && typeof hookNode.value === 'object')\n          hookNode.value.current = hookNode.reducer.call(null);\n\n        hookNode.effect = false;\n\n        hookNode.__pendingEffect__ = false;\n      });\n    }\n  }\n};\n","import { getHookTree } from '../share';\n\nimport { effect } from './effect';\nimport { MyReactHookNode } from './instance';\n\nimport type { MyReactFiberNode } from '../fiber';\nimport type { Reducer, Action, HOOK_TYPE } from './instance';\n\nconst defaultReducer: Reducer = (state?: unknown, action?: Action) => {\n  return typeof action === 'function' ? action(state) : action;\n};\n\ntype CreateHookParams = {\n  hookIndex: number;\n  hookType: HOOK_TYPE;\n  value: unknown;\n  reducer: Reducer | null;\n  deps: unknown[];\n};\n\nexport const createHookNode = (\n  { hookIndex, hookType, value, reducer, deps }: CreateHookParams,\n  fiber: MyReactFiberNode\n) => {\n  const newHookNode = new MyReactHookNode(\n    hookIndex,\n    hookType,\n    value,\n    reducer || defaultReducer,\n    deps\n  );\n\n  newHookNode.setFiber(fiber);\n\n  fiber.addHook(newHookNode);\n\n  fiber.checkHook(newHookNode);\n\n  newHookNode.initialResult();\n\n  return newHookNode;\n};\n\nexport const getHookNode = (\n  { hookIndex, hookType, value, reducer, deps }: CreateHookParams,\n  fiber: MyReactFiberNode | null\n) => {\n  if (!fiber) throw new Error('can not use hook out of component');\n\n  let currentHook: null | MyReactHookNode = null;\n\n  if (fiber.hookList.length > hookIndex) {\n    currentHook = fiber.hookList[hookIndex];\n\n    if (currentHook.hookType !== hookType) {\n      const array = fiber.hookType.slice(0, hookIndex);\n      throw new Error(\n        getHookTree([...array, currentHook.hookType], [...array, hookType])\n      );\n    }\n\n    currentHook.setFiber(fiber);\n\n    currentHook.updateResult(value, reducer || defaultReducer, deps);\n  } else if (!fiber.__isUpdateRender__) {\n    currentHook = createHookNode(\n      { hookIndex, hookType, value, reducer, deps },\n      fiber\n    );\n  } else {\n    throw new Error(\n      getHookTree([...fiber.hookType], [...fiber.hookType, hookType])\n    );\n  }\n\n  effect(fiber, currentHook);\n\n  return currentHook;\n};\n","import {\n  createRef,\n  currentFunctionFiber,\n  currentHookDeepIndex,\n  enableDebugLog,\n  getFiberTree,\n} from '../share';\n\nimport { getHookNode } from './create';\n\nimport type { createContext } from '../element';\nimport type { Reducer } from './instance';\n\nexport const useState = <T = any>(initial: T | (() => T)) => {\n  const currentHookNode = getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useState',\n      value: typeof initial === 'function' ? initial : () => initial,\n      reducer: null,\n      deps: [],\n    },\n    currentFunctionFiber.current\n  );\n\n  return [currentHookNode.result, currentHookNode.dispatch];\n};\n\nexport const useEffect = (action: () => any, deps: any[]) => {\n  getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useEffect',\n      value: action,\n      reducer: null,\n      deps,\n    },\n    currentFunctionFiber.current\n  );\n};\n\nexport const useLayoutEffect = (action: () => any, deps: any[]) => {\n  getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useLayoutEffect',\n      value: action,\n      reducer: null,\n      deps,\n    },\n    currentFunctionFiber.current\n  );\n};\n\nexport const useCallback = <\n  T extends (...args: any[]) => any = (...args: any[]) => any\n>(\n  callback: T,\n  deps: any[]\n) => {\n  return getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useCallback',\n      value: callback,\n      reducer: null,\n      deps,\n    },\n    currentFunctionFiber.current\n  ).result;\n};\n\nexport const useMemo = <T extends () => any = () => any>(\n  action: T,\n  deps: any[]\n) => {\n  return getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useMemo',\n      value: action,\n      reducer: null,\n      deps,\n    },\n    currentFunctionFiber.current\n  ).result;\n};\n\nexport const useRef = <T = any>(value: T) => {\n  return getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useRef',\n      value: createRef(value),\n      reducer: null,\n      deps: [],\n    },\n    currentFunctionFiber.current\n  ).result;\n};\n\nexport const useContext = (Context: ReturnType<typeof createContext>) => {\n  return getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useContext',\n      value: Context,\n      reducer: null,\n      deps: [],\n    },\n    currentFunctionFiber.current\n  ).result;\n};\n\nexport const useReducer = (\n  reducer: Reducer,\n  initialArgs: any,\n  init?: (...args: any) => any\n) => {\n  const currentHookNode = getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useReducer',\n      value:\n        typeof init === 'function'\n          ? () => init(initialArgs)\n          : () => initialArgs,\n      reducer,\n      deps: [],\n    },\n    currentFunctionFiber.current\n  );\n\n  return [currentHookNode.result, currentHookNode.dispatch];\n};\n\nexport const useImperativeHandle = (\n  ref: any,\n  createHandle: Reducer,\n  deps: any[]\n) => {\n  getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useImperativeHandle',\n      value: ref,\n      reducer: createHandle,\n      deps,\n    },\n    currentFunctionFiber.current\n  );\n};\n\nexport const useDebugValue = (...args: any[]) => {\n  if (enableDebugLog.current) {\n    console.log(\n      `[debug]: `,\n      ...args,\n      getFiberTree(currentFunctionFiber.current)\n    );\n  }\n};\n","import { count, forEach, map, only, toArray } from './children';\nimport { MyReactComponent, MyReactPureComponent } from './component';\nimport {\n  render,\n  renderToString,\n  hydrate,\n  createPortal,\n  findDOMNode,\n  unmountComponentAtNode,\n} from './dom';\nimport {\n  createElement,\n  cloneElement,\n  isValidElement,\n  forwardRef,\n  createContext,\n  memo,\n  lazy,\n} from './element';\nimport {\n  useRef,\n  useMemo,\n  useState,\n  useEffect,\n  useReducer,\n  useContext,\n  useCallback,\n  useDebugValue,\n  useLayoutEffect,\n  useImperativeHandle,\n} from './hook';\nimport {\n  My_React_Portal as Portal,\n  My_React_Element as Element,\n  My_React_Strict as StrictMode,\n  My_React_Fragment as Fragment,\n  My_React_Provider as Provider,\n  My_React_Consumer as Consumer,\n  My_React_Suspense as Suspense,\n  My_React_ForwardRef as ForwardRef,\n  createRef,\n  safeCall,\n} from './share';\n\nconst unstable_batchedUpdates = safeCall;\n\nconst Component = MyReactComponent;\nconst PureComponent = MyReactPureComponent;\n\nconst Children = {\n  map,\n  only,\n  count,\n  toArray,\n  forEach,\n};\n\nconst React = {\n  Component,\n  PureComponent,\n\n  createElement,\n  cloneElement,\n  isValidElement,\n\n  lazy,\n  memo,\n  createRef,\n  forwardRef,\n  createContext,\n\n  Portal,\n  Element,\n  Provider,\n  Consumer,\n  Fragment,\n  Suspense,\n  StrictMode,\n  ForwardRef,\n\n  useRef,\n  useMemo,\n  useState,\n  useEffect,\n  useReducer,\n  useContext,\n  useCallback,\n  useDebugValue,\n  useLayoutEffect,\n  useImperativeHandle,\n\n  Children,\n\n  version: '0.0.1',\n};\n\nconst ReactDOM = {\n  render,\n  hydrate,\n  findDOMNode,\n  createPortal,\n  renderToString,\n  unmountComponentAtNode,\n  unstable_batchedUpdates,\n\n  version: '0.0.1',\n};\n\nconst mixin = { ...React, ...ReactDOM };\n\n(globalThis as any).React = React;\n\n(globalThis as any).ReactDOM = ReactDOM;\n\nexport { React, ReactDOM };\n\nexport {\n  Component,\n  PureComponent,\n  createElement,\n  cloneElement,\n  isValidElement,\n  lazy,\n  memo,\n  createRef,\n  forwardRef,\n  createContext,\n  Portal,\n  Element,\n  Provider,\n  Consumer,\n  Fragment,\n  Suspense,\n  StrictMode,\n  ForwardRef,\n  useRef,\n  useMemo,\n  useState,\n  useEffect,\n  useReducer,\n  useContext,\n  useCallback,\n  useDebugValue,\n  useLayoutEffect,\n  useImperativeHandle,\n  Children,\n  render,\n  hydrate,\n  findDOMNode,\n  createPortal,\n  renderToString,\n  unmountComponentAtNode,\n  unstable_batchedUpdates,\n};\n\nexport default mixin;\n"],"names":["createRef","value","current","EmptyDispatch","trigger","_fiber","reconcileCommit","_hydrate","_parentFiberWithDom","reconcileCreate","_list","reconcileUpdate","beginProgressList","endProgressList","generateUpdateList","pendingCreate","pendingUpdate","pendingAppend","pendingContext","pendingPosition","pendingUnmount","_pendingUnmount","pendingLayoutEffect","_layoutEffect","pendingEffect","_effect","updateAllSync","updateAllAsync","asyncUpdateTimeLimit","globalLoop","globalDispatch","currentRunningFiber","currentFunctionFiber","currentHookDeepIndex","isAppMounted","isAppCrash","isServerRender","isHydrateRender","enableKeyDiff","enableHighlight","enableDebugLog","enableAllCheck","enableAsyncUpdate","enableEventSystem","enableControlComponent","asyncUpdateTimeStep","nRoundTransformFiberArray","cRoundTransformFiberArray","pendingModifyFiberArray","pendingModifyTopLevelFiber","pendingUpdateFiberListArray","pendingUpdateFiberList","getTrackDevLog","fiber","element","source","_source","owner","_owner","preString","fileName","lineNumber","__isDynamicNode__","type","typedType","name","displayName","getFiberNodeName","__isMemo__","__isLazy__","__isPortal__","__isNullNode__","__isEmptyNode__","__isStrictNode__","__isSuspense__","__isForwardRef__","__isFragmentNode__","__isContextProvider__","__isContextConsumer__","__isPlainNode__","__root__","toString","getFiberTree","padEnd","parent","res","getHookTree","hookType","newType","re","key","c","n","repeat","cache","log","message","level","triggerOnce","tree","console","stack","safeCall","action","args","call","e","Error","safeCallWithFiber","debugWithDOM","dom","debugDOM","children","MyReactInternalInstance","__fiber__","__context__","__pendingEffect__","setContext","context","removeDependence","addDependence","setFiber","unmount","__internal_instance_state__","v","__internal_instance_update__","NODE_TYPE_OBJ","__isTextNode__","__isObjectNode__","__isClassComponent__","__isFunctionComponent__","NODE_TYPE_KEY","Object","keys","MyReactInternalType","setNodeType","props","forEach","typeKey","__internal_node_type__","isSameType","every","is","isNormalEquals","src","target","srcKeys","targetKeys","length","isArrayEquals","Array","isArray","once","called","IS_SINGLE_ELEMENT","br","hr","img","input","param","meta","link","My_React_Element","Symbol","My_React_Memo","My_React_ForwardRef","My_React_Portal","My_React_Fragment","My_React_Context","My_React_Provider","My_React_Consumer","My_React_Lazy","My_React_Suspense","My_React_Strict","flattenChildren","reduce","p","concat","shouldPauseAsyncUpdate","Date","now","result","MyReactFiberInternal","__renderedChildren__","__renderedChildHead__","__renderedChildFoot__","__renderedCount__","__isRenderDynamic__","__dynamicChildren__","__isUpdateRender__","__updateTimeStep__","__lastUpdateTimeStep__","__updateTimeSpace__","Infinity","__fallback__","__pendingCreate__","__pendingUpdate__","__pendingAppend__","__pendingPosition__","__pendingContext__","__dependence__","__contextMap__","__vdom__","__prevVdom__","__props__","__prevProps__","__children__","hookHead","hookFoot","hookList","__compUpdateQueue__","__hookUpdateQueue__","__effectQueue__","__layoutEffectQueue__","__unmountQueue__","node","dependence","push","filter","__internal_node_diff__","diff","lastTimeStep","nowTimeStep","__internal_node_state__","__internal_node_context__","__internal_node_props__","__internal_node_hook__","__internal_node_update__","__internal_node_unmount__","__internal_node_effect__","MyReactFiberNode","index","fiberIndex","addChild","child","sibling","initialParent","nameSpace","fallback","contextMap","assign","typedElementType","contextObj","contextId","installParent","newParent","updateRenderState","beforeUpdate","triggerUpdate","__needUpdate__","__needTrigger__","prepareUpdate","afterUpdate","installVDom","vdom","checkVDom","isValidElement","typedVDom","_store","render","ref","prototype","hasOwnProperty","initialType","nodeType","getTypeFromVDom","checkIsSameType","currentElement","addHook","hookNode","hookNext","hookPrev","checkHook","applyRef","typedElement","instance","applyVDom","installInstance","update","hook","mount","getContextFiber","ContextObject","id","contextFiber","getContextValue","contextValue","Provider","processComponentUpdateQueue","allComponentUpdater","slice","typedInstance","baseState","state","baseProps","newState","payLoad","isForce","callback","processHookUpdateQueue","allHookUpdater","reducer","updateFiberNode","newChild","prevFiber","prevVDom","newVDom","typedPrevVDom","typedNewVDom","createFiberNode","VDom","newFiberNode","unmountFiber","mapFiber","arrayLike","f","cannotUpdate","window","IS_UNIT_LESS_NUMBER","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","ListTreeNode","LinkTreeList","scopePush","scopeItem","scopeLength","scopeArray","pop","scopeRoot","append","rawArray","listNode","unshift","head","foot","prev","next","shift","pickHead","pickFoot","listToFoot","listToHead","reconcile","reconcileScope","has","$$typeof","rawType","typedRawType","isMyReactComponent","undefined","checkValidKey","obj","onceWarnDuplicate","onceWarnUndefined","checkArrayChildrenKey","checkSingleChildrenKey","createVDom","_self","createElement","config","self","_ref","_key","__self","__source","resProps","defaultProps","childrenLength","arguments","from","cloneElement","clonedElement","createContext","Consumer","Context","Internal","defineProperty","get","enumerable","configurable","forwardRef","memo","lazy","loader","_loading","_loaded","mapByJudge","judge","arrayChildren","map","toArray","count","only","MyReactComponent","updater","Promise","resolve","then","componentWillUnmount","MyReactPureComponent","shouldComponentUpdate","nextProps","nextState","nextContext","getKeyMatchedChildren","newChildren","prevFiberChildren","tempChildren","assignPrevChildren","fill","targetIndex","findIndex","splice","getIsSameTypeNode","prevFiberChild","newChildIsArray","prevElementChildIsArray","typedPrevFiberChild","typedNewChild","prevRenderedChild","getNewFiberWithUpdate","parentFiber","assignPrevFiberChild","assignPrevFiberChildren","getNewFiberWithInitial","transformChildrenFiber","isUpdate","newFiber","nextWorkCommon","nextWorkClassComponent","classComponentMount","classComponentUpdate","nextWorkFunctionComponent","nextWorkComponent","nextWorkMemo","isForwardRefRender","targetRender","isClassComponent","typedRender","nextWorkLazy","nextWorkForwardRef","nextWorkProvider","nextWorkConsumer","ProviderFiber","typedChildren","nextWorkObject","nextWorkSync","nextWorkAsync","nextFiber","loopStart","loopCurrent","loopNext","loopToEnd","loopAll","mountLoopSync","updateLoopSync","loopController","hasNext","getNext","getUpdateList","setYield","updateLoopAsync","shouldPause","doesPause","processComponentStateFromProps","Component","typedComponent","getDerivedStateFromProps","payloadState","processComponentInstanceOnMount","contextType","processComponentFiberOnUpdate","processComponentRenderOnMountAndUpdate","processComponentDidMountOnMount","componentDidMount","processComponentContextOnUpdate","processComponentShouldUpdateOnUpdate","processComponentDidUpdateOnUpdate","baseContext","hasEffect","componentDidUpdate","shouldUpdate","reconcileMount","hydrate","startRender","createPortal","container","isInternal","startsWith","isChildren","isEvent","isStyle","isProperty","isNew","oldProps","newProps","isGone","findDOMFromFiber","currentArray","findDOMFromComponentFiber","i","findDOMNode","updateEntry","asyncUpdate","canUpdate","clearFiberDom","remove","_unmount","allUnmountFiber","unmountComponentAtNode","allPendingList","l","getFiberWithDom","transform","currentYield","updateFiberController","yieldFiber","newProgressFiber","parentFiberWithDom","parentDom","tagName","toLowerCase","appendChild","allListeners","getNextHydrateDom","childNodes","find","document","COMMENT_NODE","__hydrate__","checkHydrateDom","Node","TEXT_NODE","nodeName","ELEMENT_NODE","getHydrateDom","typedDom","hydrateCreate","nativeCreate","createTextNode","createElementNS","validDomNesting","typedParentElement","create","setAttribute","layoutEffect","allLayoutEffect","effect","allEffect","typedNode","parentDOM","nextFibers","getInsertBeforeDomFromSibling","getInsertBeforeDomFromSiblingAndParent","beforeDom","insertBefore","beforeDOM","position","beforeFiberWithDom","getNativeEventName","eventName","isCapture","nativeName","endsWith","split","controlElementTag","addEventListener","eventState","__internal_node_event__","cb","handler","nativeEvent","removeEventListener","domPropsHydrate","textContent","String","getAttribute","domStyleHydrate","styleKey","typedProps","styleName","domEventHydrate","hydrateUpdate","HighLight","createRange","createHighLight","__pendingHighLight__","startHighLight","flashPending","allFiber","allWrapper","wrapperDom","getHighLight","range","selectNodeContents","selectNode","rect","getBoundingClientRect","left","scrollingElement","scrollLeft","top","scrollTop","width","height","positionLeft","positionTop","style","cssText","setTimeout","boxShadow","body","nativeUpdate","removeAttribute","focus","typedNewProps","typedOldProps","innerHTML","__html","__highlight__","getHighLightInstance","highLight","ClientDispatch","_result","_final","containerFiber","TextElement","content","PlainElement","attrs","d","serializeStyle","styleKeys","serializeAttrs","attrsKeys","serializeProps","className","serialize","ServerDispatch","renderToString","MyReactHookNode","hookIndex","deps","initialResult","updateResult","newValue","newReducer","newDeps","cancel","defaultReducer","createHookNode","newHookNode","getHookNode","currentHook","array","useState","initial","currentHookNode","dispatch","useEffect","useLayoutEffect","useCallback","useMemo","useRef","useContext","useReducer","initialArgs","init","useImperativeHandle","createHandle","useDebugValue","unstable_batchedUpdates","PureComponent","Children","React","Portal","Element","Fragment","Suspense","StrictMode","ForwardRef","version","ReactDOM","mixin","globalThis"],"mappings":"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"}