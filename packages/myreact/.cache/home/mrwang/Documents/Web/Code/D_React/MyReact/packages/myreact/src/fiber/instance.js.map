{"version":3,"file":"instance.js","sourceRoot":"","sources":["instance.ts"],"names":[],"mappings":"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","sourcesContent":["import { getTypeFromVDom, isValidElement } from \"../element\";\nimport { MyReactInternalType } from \"../internal\";\nimport { globalDispatch } from \"../share\";\n\nimport type { MyReactComponent } from \"../component\";\nimport type {\n  memo,\n  forwardRef,\n  createContext,\n  Props,\n  ElementNode,\n  DynamicElementNode,\n  Element as MyReactELement,\n} from \"../element\";\nimport type { Action, MyReactHookNode } from \"../hook\";\nimport type { MyReactInternalInstance } from \"../internal\";\n\nexport type ComponentUpdateQueue = {\n  type: \"state\";\n  trigger: MyReactComponent;\n  isForce?: boolean;\n  payLoad?:\n    | Record<string, unknown>\n    | ((state: Record<string, unknown>, props: Record<string, unknown>) => Record<string, unknown>);\n  callback?: () => void;\n};\n\nexport type HookUpdateQueue = {\n  type: \"hook\";\n  trigger: MyReactHookNode;\n  action: Action;\n};\n\nclass MyReactFiberInternal extends MyReactInternalType {\n  __internal_node_diff__: {\n    __renderedChildren__: Array<MyReactFiberNode | MyReactFiberNode[]>;\n    __renderedChildHead__: MyReactFiberNode | null;\n    __renderedChildFoot__: MyReactFiberNode | null;\n    __renderedCount__: number;\n    __dynamicChildren__: ElementNode | null;\n    __isRenderDynamic__: boolean;\n    __isUpdateRender__: boolean;\n    __updateTimeStep__: number;\n    __lastUpdateTimeStep__: number;\n    __updateTimeSpace__: number;\n    __fallback__: ElementNode | null;\n    __root__: boolean;\n  } = {\n    __renderedChildren__: [],\n\n    __renderedChildHead__: null,\n\n    __renderedChildFoot__: null,\n\n    __renderedCount__: 1,\n\n    __isRenderDynamic__: false,\n\n    __dynamicChildren__: null,\n\n    __isUpdateRender__: false,\n\n    __updateTimeStep__: Date.now(),\n\n    __lastUpdateTimeStep__: 0,\n\n    __updateTimeSpace__: Infinity,\n\n    __fallback__: null,\n\n    __root__: false,\n  };\n\n  get __isUpdateRender__() {\n    return this.__internal_node_diff__.__isUpdateRender__;\n  }\n\n  set __isUpdateRender__(v) {\n    this.__internal_node_diff__.__isUpdateRender__ = v;\n  }\n\n  get __isRenderDynamic__() {\n    return this.__internal_node_diff__.__isRenderDynamic__;\n  }\n\n  set __isRenderDynamic__(v) {\n    this.__internal_node_diff__.__isRenderDynamic__ = v;\n  }\n\n  get __renderedCount__() {\n    return this.__internal_node_diff__.__renderedCount__;\n  }\n\n  set __renderedCount__(v) {\n    this.__internal_node_diff__.__renderedCount__ = v;\n  }\n\n  get __renderedChildren__() {\n    return this.__internal_node_diff__.__renderedChildren__;\n  }\n\n  set __renderedChildren__(v) {\n    this.__internal_node_diff__.__renderedChildren__ = v;\n  }\n\n  get __renderedChildHead__() {\n    return this.__internal_node_diff__.__renderedChildHead__;\n  }\n\n  set __renderedChildHead__(v) {\n    this.__internal_node_diff__.__renderedChildHead__ = v;\n  }\n\n  get __renderedChildFoot__() {\n    return this.__internal_node_diff__.__renderedChildFoot__;\n  }\n\n  set __renderedChildFoot__(v) {\n    this.__internal_node_diff__.__renderedChildFoot__ = v;\n  }\n\n  get __dynamicChildren__() {\n    return this.__internal_node_diff__.__dynamicChildren__;\n  }\n\n  set __dynamicChildren__(v) {\n    this.__internal_node_diff__.__dynamicChildren__ = v;\n    this.__internal_node_diff__.__isRenderDynamic__ = true;\n  }\n\n  get __updateTimeStep__() {\n    return this.__internal_node_diff__.__updateTimeStep__;\n  }\n\n  set __updateTimeStep__(v) {\n    const diff = this.__internal_node_diff__;\n    const lastTimeStep = diff.__updateTimeStep__;\n    const nowTimeStep = v;\n    diff.__lastUpdateTimeStep__ = lastTimeStep;\n    diff.__updateTimeStep__ = nowTimeStep;\n    diff.__updateTimeSpace__ = nowTimeStep - lastTimeStep;\n  }\n\n  get __fallback__() {\n    return this.__internal_node_diff__.__fallback__;\n  }\n\n  set __fallback__(v) {\n    this.__internal_node_diff__.__fallback__ = v;\n  }\n\n  get __root__() {\n    return this.__internal_node_diff__.__root__;\n  }\n\n  set __root__(v) {\n    this.__internal_node_diff__.__root__ = v;\n  }\n\n  __internal_node_state__ = {\n    __pendingCreate__: false,\n    __pendingUpdate__: false,\n    __pendingAppend__: false,\n    __pendingPosition__: false,\n    __pendingContext__: false,\n  };\n\n  get __pendingCreate__() {\n    return this.__internal_node_state__.__pendingCreate__;\n  }\n\n  set __pendingCreate__(v) {\n    this.__internal_node_state__.__pendingCreate__ = v;\n  }\n\n  get __pendingUpdate__() {\n    return this.__internal_node_state__.__pendingUpdate__;\n  }\n\n  set __pendingUpdate__(v) {\n    this.__internal_node_state__.__pendingUpdate__ = v;\n  }\n\n  get __pendingAppend__() {\n    return this.__internal_node_state__.__pendingAppend__;\n  }\n\n  set __pendingAppend__(v) {\n    this.__internal_node_state__.__pendingAppend__ = v;\n  }\n\n  get __pendingPosition__() {\n    return this.__internal_node_state__.__pendingPosition__;\n  }\n\n  set __pendingPosition__(v) {\n    this.__internal_node_state__.__pendingPosition__ = v;\n  }\n\n  get __pendingContext__() {\n    return this.__internal_node_state__.__pendingContext__;\n  }\n\n  set __pendingContext__(v) {\n    this.__internal_node_state__.__pendingContext__ = v;\n  }\n\n  __internal_node_event__: Record<string, ((...args: any[]) => void) & { cb?: any[] }> = {};\n\n  __internal_node_context__: {\n    __dependence__: MyReactInternalInstance[];\n    __contextMap__: Record<string, MyReactFiberNode>;\n  } = {\n    __dependence__: [],\n    __contextMap__: {},\n  };\n\n  get __dependence__() {\n    return this.__internal_node_context__.__dependence__;\n  }\n\n  set __dependence__(v) {\n    this.__internal_node_context__.__dependence__ = v;\n  }\n\n  get __contextMap__() {\n    return this.__internal_node_context__.__contextMap__;\n  }\n\n  set __contextMap__(v) {\n    this.__internal_node_context__.__contextMap__ = v;\n  }\n\n  addDependence(node: MyReactInternalInstance) {\n    const dependence = this.__dependence__;\n    if (dependence.every((n) => n !== node)) {\n      dependence.push(node);\n    }\n  }\n\n  removeDependence(node: MyReactInternalInstance) {\n    const dependence = this.__dependence__;\n    this.__dependence__ = dependence.filter((n) => n !== node);\n  }\n\n  __internal_node_props__: {\n    __vdom__: null | DynamicElementNode;\n    __prevVdom__: null | DynamicElementNode;\n    __props__: Props;\n    __prevProps__: Props;\n    __children__: Props[\"children\"] | null;\n  } = {\n    __vdom__: null,\n    __prevVdom__: null,\n    __props__: {},\n    __prevProps__: {},\n    __children__: null,\n  };\n\n  get __vdom__() {\n    return this.__internal_node_props__.__vdom__;\n  }\n\n  set __vdom__(v) {\n    const props = this.__internal_node_props__;\n    props.__vdom__ = v;\n    props.__props__ = typeof v === \"object\" ? v?.props || {} : {};\n    props.__children__ = typeof v === \"object\" ? v?.props.children : [];\n  }\n\n  get __props__() {\n    return this.__internal_node_props__.__props__;\n  }\n\n  get __children__() {\n    return this.__internal_node_props__.__children__;\n  }\n\n  get __prevVdom__() {\n    return this.__internal_node_props__.__prevVdom__;\n  }\n\n  set __prevVdom__(v) {\n    const props = this.__internal_node_props__;\n    props.__prevVdom__ = v;\n    props.__prevProps__ = typeof v === \"object\" ? v?.props || {} : {};\n  }\n\n  get __prevProps__() {\n    return this.__internal_node_props__.__prevProps__;\n  }\n\n  // __internal_node_dom__: {\n  //   dom: Element | Text | null;\n  //   nameSpace: string | null;\n  // } = {\n  //   dom: null,\n  //   nameSpace: null,\n  // };\n\n  // get dom() {\n  //   return this.__internal_node_dom__.dom;\n  // }\n\n  // set dom(v) {\n  //   this.__internal_node_dom__.dom = v;\n  // }\n\n  // get nameSpace() {\n  //   return this.__internal_node_dom__.nameSpace;\n  // }\n\n  // set nameSpace(v) {\n  //   this.__internal_node_dom__.nameSpace = v;\n  // }\n\n  __internal_node_hook__: {\n    hookHead: null | MyReactHookNode;\n    hookFoot: null | MyReactHookNode;\n    hookList: MyReactHookNode[];\n    hookType: MyReactHookNode[\"hookType\"][];\n  } = {\n    hookHead: null,\n    hookFoot: null,\n    hookList: [],\n    hookType: [],\n  };\n\n  get hookHead() {\n    return this.__internal_node_hook__.hookHead;\n  }\n  set hookHead(v) {\n    this.__internal_node_hook__.hookHead = v;\n  }\n  get hookFoot() {\n    return this.__internal_node_hook__.hookFoot;\n  }\n  set hookFoot(v) {\n    this.__internal_node_hook__.hookFoot = v;\n  }\n  get hookList() {\n    return this.__internal_node_hook__.hookList;\n  }\n  set hookList(v) {\n    this.__internal_node_hook__.hookList = v;\n  }\n  get hookType() {\n    return this.__internal_node_hook__.hookType;\n  }\n  set hookType(v) {\n    this.__internal_node_hook__.hookType = v;\n  }\n\n  __internal_node_update__: {\n    __compUpdateQueue__: Array<ComponentUpdateQueue>;\n    __hookUpdateQueue__: Array<HookUpdateQueue>;\n  } = {\n    __compUpdateQueue__: [],\n    __hookUpdateQueue__: [],\n  };\n\n  __internal_node_effect__: {\n    __effectQueue__: Array<() => void>;\n    __layoutEffectQueue__: Array<() => void>;\n  } = {\n    __effectQueue__: [],\n    __layoutEffectQueue__: [],\n  };\n\n  __internal_node_unmount__: {\n    __unmountQueue__: Array<MyReactFiberNode | MyReactFiberNode[]>;\n  } = {\n    __unmountQueue__: [],\n  };\n\n  get __compUpdateQueue__() {\n    return this.__internal_node_update__.__compUpdateQueue__;\n  }\n\n  set __compUpdateQueue__(v) {\n    this.__internal_node_update__.__compUpdateQueue__ = v;\n  }\n\n  get __hookUpdateQueue__() {\n    return this.__internal_node_update__.__hookUpdateQueue__;\n  }\n\n  set __hookUpdateQueue__(v) {\n    this.__internal_node_update__.__hookUpdateQueue__ = v;\n  }\n\n  get __unmountQueue__() {\n    return this.__internal_node_unmount__.__unmountQueue__;\n  }\n\n  set __unmountQueue__(v) {\n    this.__internal_node_unmount__.__unmountQueue__ = v;\n  }\n\n  get __effectQueue__() {\n    return this.__internal_node_effect__.__effectQueue__;\n  }\n\n  set __effectQueue__(v) {\n    this.__internal_node_effect__.__effectQueue__ = v;\n  }\n\n  get __layoutEffectQueue__() {\n    return this.__internal_node_effect__.__layoutEffectQueue__;\n  }\n\n  set __layoutEffectQueue__(v) {\n    this.__internal_node_effect__.__layoutEffectQueue__ = v;\n  }\n}\n\nexport class MyReactFiberNode extends MyReactFiberInternal {\n  fiberIndex = 0;\n\n  mount = true;\n\n  dom: Element | Text | null = null;\n\n  nameSpace: string | null = null;\n\n  children: MyReactFiberNode[] = [];\n\n  child: MyReactFiberNode | null = null;\n\n  parent: MyReactFiberNode | null = null;\n\n  sibling: MyReactFiberNode | null = null;\n\n  instance: MyReactInternalInstance | null = null;\n\n  element: DynamicElementNode;\n\n  __needUpdate__ = true;\n\n  __needTrigger__ = false;\n\n  constructor(index: number, parent: MyReactFiberNode | null, element: DynamicElementNode) {\n    super();\n    this.parent = parent;\n    this.fiberIndex = index;\n    this.element = element;\n    this.__vdom__ = element;\n  }\n\n  addChild(child: MyReactFiberNode) {\n    this.children.push(child);\n    if (this.__renderedChildFoot__) {\n      this.__renderedChildFoot__.sibling = child;\n      this.__renderedChildFoot__ = child;\n    } else {\n      this.child = child;\n      this.__renderedChildHead__ = child;\n      this.__renderedChildFoot__ = child;\n    }\n  }\n\n  initialParent() {\n    if (this.parent) {\n      this.parent.addChild(this);\n      if (this.parent.nameSpace) {\n        this.nameSpace = this.parent.nameSpace;\n      }\n      if (this.parent.__isSuspense__) {\n        this.__fallback__ = this.parent.__props__.fallback as ElementNode;\n      } else {\n        this.__fallback__ = this.parent.__fallback__;\n      }\n      const contextMap = Object.assign({}, this.parent.__contextMap__, this.__contextMap__);\n      if (typeof this.element === \"object\" && typeof this.element?.type === \"object\" && this.__isContextProvider__) {\n        const typedElementType = this.element.type as ReturnType<typeof createContext>[\"Provider\"];\n        const contextObj = typedElementType[\"Context\"];\n        const contextId = contextObj[\"id\"];\n        contextMap[contextId] = this;\n      }\n      this.__contextMap__ = contextMap;\n    }\n  }\n\n  installParent(newParent: MyReactFiberNode) {\n    this.parent = newParent;\n    this.sibling = null;\n    this.initialParent();\n  }\n\n  updateRenderState() {\n    if (__DEV__) {\n      this.__renderedCount__ += 1;\n      this.__updateTimeStep__ = Date.now();\n    }\n  }\n\n  beforeUpdate() {\n    this.child = null;\n    this.children = [];\n    this.__renderedChildHead__ = null;\n    this.__renderedChildFoot__ = null;\n  }\n\n  triggerUpdate() {\n    this.__needUpdate__ = true;\n    this.__needTrigger__ = true;\n    this.__isUpdateRender__ = true;\n  }\n\n  prepareUpdate() {\n    this.__needUpdate__ = true;\n    this.__isUpdateRender__ = true;\n  }\n\n  afterUpdate() {\n    this.__needUpdate__ = false;\n    this.__needTrigger__ = false;\n    this.__isUpdateRender__ = false;\n    this.__isRenderDynamic__ = false;\n  }\n\n  // when update, install new vdom\n  installVDom(vdom: DynamicElementNode) {\n    this.element = vdom;\n    this.__vdom__ = vdom;\n  }\n\n  // TODO\n  checkVDom() {\n    if (__DEV__) {\n      const vdom = this.element;\n      if (isValidElement(vdom)) {\n        const typedVDom = vdom;\n        if (!typedVDom._store[\"validType\"]) {\n          if (this.__isContextConsumer__) {\n            if (typeof typedVDom.props.children !== \"function\") {\n              throw new Error(`Consumer need a function children`);\n            }\n          }\n          if (this.__isMemo__ || this.__isForwardRef__) {\n            const typedType = typedVDom.type as ReturnType<typeof forwardRef> | ReturnType<typeof memo>;\n            if (typeof typedType.render !== \"function\" && typeof typedType.render !== \"object\") {\n              throw new Error(\"invalid render type\");\n            }\n            if (this.__isForwardRef__ && typeof typedType.render !== \"function\") {\n              throw new Error(\"forwardRef() need a function component\");\n            }\n          }\n          if (typedVDom.ref) {\n            if (typeof typedVDom.ref !== \"object\" && typeof typedVDom.ref !== \"function\") {\n              throw new Error(\"unSupport ref usage, should be a function or a object like {current: any}\");\n            }\n          }\n          if (typedVDom.key && typeof typedVDom.key !== \"string\") {\n            throw new Error(`invalid key type, ${typedVDom.key}`);\n          }\n          if (typedVDom.props.children && typedVDom.props[\"dangerouslySetInnerHTML\"]) {\n            throw new Error(\"can not render contain `children` and `dangerouslySetInnerHTML`\");\n          }\n          if (typedVDom.props[\"dangerouslySetInnerHTML\"]) {\n            if (\n              typeof typedVDom.props[\"dangerouslySetInnerHTML\"] !== \"object\" ||\n              !Object.prototype.hasOwnProperty.call(typedVDom.props[\"dangerouslySetInnerHTML\"], \"__html\")\n            ) {\n              throw new Error(\"invalid dangerouslySetInnerHTML props, should like {__html: string}\");\n            }\n          }\n          typedVDom._store[\"validType\"] = true;\n        }\n      }\n    }\n  }\n\n  initialType() {\n    const vdom = this.element;\n    const nodeType = getTypeFromVDom(vdom);\n    this.setNodeType(nodeType);\n    if (isValidElement(vdom)) {\n      if (vdom.type === \"svg\") this.nameSpace = \"http://www.w3.org/2000/svg\";\n    }\n  }\n\n  checkIsSameType(vdom: ElementNode) {\n    if (this.__needTrigger__) return true;\n    const nodeType = getTypeFromVDom(vdom);\n    const result = this.isSameType(nodeType);\n    const element = vdom as MyReactELement;\n    const currentElement = this.element as MyReactELement;\n    if (result) {\n      if (this.__isDynamicNode__ || this.__isPlainNode__) {\n        return Object.is(currentElement.type, element.type);\n      }\n      if (this.__isObjectNode__ && typeof element.type === \"object\" && typeof currentElement.type === \"object\") {\n        return Object.is(element.type[\"$$typeof\"], currentElement.type[\"$$typeof\"]);\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  addHook(hookNode: MyReactHookNode) {\n    this.hookList.push(hookNode);\n    this.hookType.push(hookNode.hookType);\n    if (!this.hookHead) {\n      this.hookHead = hookNode;\n      this.hookFoot = hookNode;\n    } else if (this.hookFoot) {\n      this.hookFoot.hookNext = hookNode;\n      hookNode.hookPrev = this.hookFoot;\n      this.hookFoot = hookNode;\n    }\n  }\n\n  checkHook(hookNode: MyReactHookNode) {\n    if (__DEV__) {\n      if (\n        hookNode.hookType === \"useMemo\" ||\n        hookNode.hookType === \"useEffect\" ||\n        hookNode.hookType === \"useCallback\" ||\n        hookNode.hookType === \"useLayoutEffect\"\n      ) {\n        if (typeof hookNode.value !== \"function\") {\n          throw new Error(`${hookNode.hookType} initial error`);\n        }\n      }\n      if (hookNode.hookType === \"useContext\") {\n        if (typeof hookNode.value !== \"object\" || hookNode.value === null) {\n          throw new Error(`${hookNode.hookType} initial error`);\n        }\n      }\n    }\n  }\n\n  applyRef() {\n    if (this.__isPlainNode__) {\n      const typedElement = this.element as MyReactELement;\n      if (this.dom) {\n        const ref = typedElement.ref;\n        if (typeof ref === \"object\" && ref !== null) {\n          ref.current = this.dom;\n        } else if (typeof ref === \"function\") {\n          ref(this.dom as Element);\n        }\n      } else {\n        throw new Error(\"do not have a dom for plain node\");\n      }\n    }\n    if (this.__isClassComponent__) {\n      const typedElement = this.element as MyReactELement;\n      if (this.instance) {\n        const ref = typedElement.ref;\n        if (typeof ref === \"object\" && ref !== null) {\n          ref.current = this.instance;\n        } else if (typeof ref === \"function\") {\n          ref(this.instance);\n        }\n      }\n    }\n  }\n\n  applyVDom() {\n    this.__prevVdom__ = this.__isTextNode__ ? this.__vdom__ : Object.assign({}, this.__vdom__);\n  }\n\n  installInstance(instance: MyReactInternalInstance) {\n    this.instance = instance;\n  }\n\n  update() {\n    globalDispatch.current.trigger(this);\n  }\n\n  unmount() {\n    this.hookList.forEach((hook) => hook.unmount());\n    this.instance && this.instance.unmount();\n    this.mount = false;\n    this.__needUpdate__ = false;\n    this.__needTrigger__ = false;\n    this.__pendingCreate__ = false;\n    this.__pendingUpdate__ = false;\n    this.__pendingAppend__ = false;\n    this.__pendingPosition__ = false;\n  }\n}\n"]}